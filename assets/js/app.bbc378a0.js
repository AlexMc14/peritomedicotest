(function(e){function a(a){for(var s,o,l=a[0],c=a[1],r=a[2],d=0,p=[];d<l.length;d++)o=l[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);u&&u(a);while(p.length)p.shift()();return n.push.apply(n,r||[]),t()}function t(){for(var e,a=0;a<n.length;a++){for(var t=n[a],s=!0,o=1;o<t.length;o++){var c=t[o];0!==i[c]&&(s=!1)}s&&(n.splice(a--,1),e=l(l.s=t[0]))}return e}var s={},i={app:0},n=[];function o(e){return l.p+"assets/js/"+({}[e]||e)+"."+{"chunk-2d209639":"97670acb","chunk-2d216214":"1f54003d","chunk-2d219ff9":"aa1513ee","chunk-813299b2":"cf0faba4"}[e]+".js"}function l(a){if(s[a])return s[a].exports;var t=s[a]={i:a,l:!1,exports:{}};return e[a].call(t.exports,t,t.exports,l),t.l=!0,t.exports}l.e=function(e){var a=[],t=i[e];if(0!==t)if(t)a.push(t[2]);else{var s=new Promise((function(a,s){t=i[e]=[a,s]}));a.push(t[2]=s);var n,c=document.createElement("script");c.charset="utf-8",c.timeout=120,l.nc&&c.setAttribute("nonce",l.nc),c.src=o(e);var r=new Error;n=function(a){c.onerror=c.onload=null,clearTimeout(d);var t=i[e];if(0!==t){if(t){var s=a&&("load"===a.type?"missing":a.type),n=a&&a.target&&a.target.src;r.message="Loading chunk "+e+" failed.\n("+s+": "+n+")",r.name="ChunkLoadError",r.type=s,r.request=n,t[1](r)}i[e]=void 0}};var d=setTimeout((function(){n({type:"timeout",target:c})}),12e4);c.onerror=c.onload=n,document.head.appendChild(c)}return Promise.all(a)},l.m=e,l.c=s,l.d=function(e,a,t){l.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,a){if(1&a&&(e=l(e)),8&a)return e;if(4&a&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(l.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var s in e)l.d(t,s,function(a){return e[a]}.bind(null,s));return t},l.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(a,"a",a),a},l.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},l.p="/peritomedicotest/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=a,c=c.slice();for(var d=0;d<c.length;d++)a(c[d]);var u=r;n.push([0,"chunk-vendors"]),t()})({0:function(e,a,t){e.exports=t("56d7")},"01e2":function(e,a,t){},"041d":function(e,a,t){"use strict";t("3373")},"0536":function(e,a,t){},"09e5":function(e,a,t){},"0b99":function(e,a,t){"use strict";t("09e5")},"0c2f":function(e,a,t){"use strict";t("3da7")},"0e00":function(e,a,t){},"125a":function(e,a,t){"use strict";t("580a")},1663:function(e,a,t){},"1ae4":function(e,a,t){e.exports=t.p+"assets/img/logo.87de87a4.svg"},2576:function(e,a,t){"use strict";t("31d4")},"25db":function(e,a,t){"use strict";t("6d71")},"26a2":function(e,a,t){},"297a":function(e,a,t){"use strict";t("f418")},"2cb6":function(e,a,t){},3080:function(e,a,t){},"31d4":function(e,a,t){},3373:function(e,a,t){},"35cf":function(e,a,t){},3758:function(e,a,t){"use strict";t("b83e")},"392c":function(e,a,t){"use strict";t("498e")},"3b19":function(e,a,t){"use strict";t("c5b7")},"3b84":function(e,a,t){e.exports=t.p+"assets/img/word.5656a2c2.png"},"3d58":function(e,a,t){},"3da7":function(e,a,t){},"3e14":function(e,a,t){},"3e67":function(e,a,t){},"3fdb":function(e,a,t){},"42e2":function(e,a,t){"use strict";t("3d58")},"498e":function(e,a,t){},"4c8b":function(e,a,t){e.exports=t.p+"assets/img/png.559c2422.png"},"510d":function(e,a,t){"use strict";t("3080")},5194:function(e,a,t){"use strict";t("0536")},"54a1":function(e,a,t){"use strict";t("7c44")},"56d7":function(e,a,t){"use strict";t.r(a);var s=t("2b0e"),i=function(){var e=this,a=e._self._c;return a("div",{class:{"nav-open":e.$sidebar.showSidebar}},[a("notifications"),a("router-view")],1)},n=[],o=t("bc7b"),l=t("c057"),c=t("6a92"),r=t("dcc1");t("5fe4");const d={apiKey:"AIzaSyARY6o2T21ML33G6DC0r_VwSS6KP13lOE4",authDomain:"informesmedicospericiale-aefa2.firebaseapp.com",projectId:"informesmedicospericiale-aefa2",storageBucket:"informesmedicospericiale-aefa2.appspot.com",messagingSenderId:"478457945260",appId:"1:478457945260:web:a0a17c0cb730c7edeed309"},u=Object(o["a"])(d),p=Object(l["g"])(u,"produccion"),m=Object(r["a"])(u),v=Object(c["d"])(u);var b=t("be8c"),f={setup(){const e=Object(s["ref"])(0),a=Object(s["ref"])(0),t=Object(s["ref"])(0),i=Object(s["ref"])(!1),n=Object(s["ref"])(JSON.parse(localStorage.getItem("userInform")));let o=null,c=null,r=null;const d=Object(b["b"])(),u=()=>{Object(b["c"])(d,e=>{i.value=!!e})},m=()=>{console.log("Suscribiendo a los escuchadores...");const s=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("telEspecialista","==",null),Object(l["n"])("status","==","0"),Object(l["n"])("confirmaCaso","==","1"));o=Object(l["i"])(s,a=>{a.docs.length>e.value&&f("Caso sin asignar","Debes asignar un especialista"),e.value=a.docs.length});const i=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("status","==","1"));c=Object(l["i"])(i,e=>{e.docs.length>a.value&&f("Cliente sin presupuesto","Se debe enviar un presupuesto al cliente"),a.value=e.docs.length});const n=Object(l["k"])(Object(l["b"])(p,"clientes"),Object(l["n"])("confirmaCaso","==","0"));r=Object(l["i"])(n,e=>{e.docs.length>t.value&&f("Llamar a cliente","Se necesita confirmar la especialidad para el cliente"),t.value=e.docs.length})},v=()=>{console.log("Desuscribiendo de los escuchadores..."),o&&o(),c&&c(),r&&r()};function f(e,a){if("granted"===Notification.permission){const t=new Notification(e,{body:a,appName:"Informes médicos periciales",icon:"./src/img/vue-logo.png"});t.onclick=function(e){console.log("Notificación clicada",e)}}else"denied"!==Notification.permission&&Notification.requestPermission().then(t=>{"granted"===t&&f(e,a)})}return Object(s["watch"])(i,e=>{e&&n.value.admin&&!0===n.value.admin?m():v()}),Object(s["onMounted"])(()=>{u(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.addEventListener("updatefound",()=>{const a=e.installing;a.addEventListener("statechange",()=>{"installed"===a.state&&navigator.serviceWorker.controller&&(console.log("Nueva versión disponible. Limpiando caché y recargando."),caches.keys().then(e=>{e.forEach(e=>{caches.delete(e)})}).then(()=>{window.location.reload()}))})})})}),Object(s["onUnmounted"])(()=>{v()}),{casosSinAsignar:e,casosSinPresupuesto:a,clientesLlamar:t,isAuthenticated:i}}},C=f,h=(t("0b99"),t("2877")),g=Object(h["a"])(C,i,n,!1,null,null,null),y=g.exports,_=t("8c4f"),w=function(){var e=this,a=e._self._c;return a("div",[e.authState.isAuthenticated?a("div",{staticClass:"wrapper"},[a("side-bar",[a("div",{directives:[{name:"show",rawName:"v-show",value:null!==e.dataUser,expression:"dataUser !== null"}],staticClass:"text-center text-black mt-2 saludo-usuario"},[e._v("Hola, "+e._s(e.dataUser.nombre?e.dataUser.nombre:e.dataUser.email))]),a("div",{directives:[{name:"show",rawName:"v-show",value:null!==e.dataUser,expression:"dataUser !== null"}],staticClass:"text-center text-black mt-2 mb-2 conexion-usuario"},[e._v("Tu última conexión: "),a("br"),e._v(" "+e._s(e.lastLogin))]),a("template",{slot:"links"},[e._l(e.routes,(function(t,s){return a("sidebar-link",{key:s,class:e.currentPage===s?"currentPage":"",staticStyle:{color:"red !important"},style:{display:e.needShow(t.path)?"block":"none"},attrs:{to:t.path,name:t.name,icon:t.icon}})})),e.showValmerDropdown?a("li",{staticClass:"nav-item valmer-dropdown"},[a("a",{staticClass:"nav-link dropdown-toggle",staticStyle:{cursor:"pointer"},on:{click:function(a){e.valmerOpen=!e.valmerOpen}}},[a("i",{staticClass:"ti-folder"}),a("p",[e._v("Valmer "),a("i",{class:e.valmerOpen?"ti-angle-up":"ti-angle-down",staticStyle:{float:"right","margin-right":"10px"}})])]),a("ul",{directives:[{name:"show",rawName:"v-show",value:e.valmerOpen,expression:"valmerOpen"}],staticClass:"nav valmer-submenu"},[e.needShow("/alta-casos-valmer")?a("sidebar-link",{class:"/alta-casos-valmer"===e.$route.path?"currentPage":"",attrs:{to:"/alta-casos-valmer",name:"Alta Casos",icon:"ti-plus"}}):e._e(),e.needShow("/listado-casos-valmer")?a("sidebar-link",{class:"/listado-casos-valmer"===e.$route.path?"currentPage":"",attrs:{to:"/listado-casos-valmer",name:"Listado Casos",icon:"ti-list"}}):e._e(),e.needShow("/mis-casos-valmer")?a("sidebar-link",{class:"/mis-casos-valmer"===e.$route.path?"currentPage":"",attrs:{to:"/mis-casos-valmer",name:"Mis Casos",icon:"ti-user"}}):e._e()],1)]):e._e(),a("div",{staticClass:"mt-2",staticStyle:{width:"100%"},on:{click:e.logout}},[a("sidebar-link",{attrs:{icon:"ti-power-off",to:"/",name:"Desconectarse"}})],1),a("div",{staticStyle:{width:"100%","text-align":"center"}},[e._v("\n            v 27.11.25\n        ")])],2),a("mobile-menu")],2),a("div",{staticClass:"main-panel"},[a("top-navbar"),a("dashboard-content",{nativeOn:{click:function(a){return e.toggleSidebar.apply(null,arguments)}}}),a("content-footer")],1)],1):a("div",[a("router-view")],1)])},O=[],j=function(){var e=this,a=e._self._c;return a("nav",{staticClass:"navbar navbar-expand-lg navbar-light"},[a("div",{staticClass:"container-fluid"},[a("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[e._v(e._s(e.routeName))]),a("button",{staticClass:"navbar-toggler navbar-burger",attrs:{type:"button","aria-expanded":e.$sidebar.showSidebar,"aria-label":"Toggle navigation"},on:{click:e.toggleSidebar}},[a("span",{staticClass:"navbar-toggler-bar"}),a("span",{staticClass:"navbar-toggler-bar"}),a("span",{staticClass:"navbar-toggler-bar"})]),a("div",{staticClass:"collapse navbar-collapse"})])])},k=[],A={computed:{routeName(){const{name:e}=this.$route;return this.capitalizeFirstLetter(e)}},data(){return{activeNotifications:!1}},methods:{capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)},toggleNotificationDropDown(){this.activeNotifications=!this.activeNotifications},closeDropDown(){this.activeNotifications=!1},toggleSidebar(){this.$sidebar.displaySidebar(!this.$sidebar.showSidebar)},hideSidebar(){this.$sidebar.displaySidebar(!1)}}},x=A,S=Object(h["a"])(x,j,k,!1,null,null,null),D=S.exports,E=function(){var e=this;e._self._c;return e._m(0)},P=[function(){var e=this,a=e._self._c;return a("footer",{staticClass:"footer"},[a("div",{staticClass:"container-fluid d-flex flex-wrap justify-content-between"},[a("nav",[a("ul",[a("li")])])])])}],F={},N=F,I=Object(h["a"])(N,E,P,!1,null,null,null),L=I.exports,T=function(){var e=this,a=e._self._c;return a("div",{staticClass:"content"},[a("div",{staticClass:"container-fluid card W90 py-4 px-4",staticStyle:{overflow:"scroll"}},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)],1)])},Q=[],M={},$=M,B=(t("5d2b"),Object(h["a"])($,T,Q,!1,null,null,null)),V=B.exports,z=function(){var e=this,a=e._self._c;return a("ul",{staticClass:"nav navbar-nav nav-mobile-menu"},[e._t("default")],2)},R=[],J={},q=J,U=Object(h["a"])(q,z,R,!1,null,null,null),H=U.exports,W={components:{TopNavbar:D,ContentFooter:L,DashboardContent:V,MobileMenu:H},data(){return{dataUser:null,currentPage:0,lastLogin:null,authState:{isAuthenticated:!1,user:null},routesWatch:[],routes:[{path:"/dashboard",name:"Dashboard",icon:"ti-panel"},{path:"/mis-casos",name:"Mis Casos",icon:"ti-panel"},{path:"/mis-casos-abogados",name:"Mis Casos",icon:"ti-panel"},{path:"/seguimiento-casos",name:"Seguimiento casos",icon:"ti-panel"},{path:"/listado-clientes",name:"Listado clientes",icon:"ti-infinite"},{path:"/listado-clientes-llamar",name:"Clientes por llamar",icon:"ti-headphone-alt"},{path:"/listado-clientes-sin-abogado",name:"Clientes sin abogado",icon:"ti-headphone-alt"},{path:"/listado-clientes-sin-abogado-llamar",name:"Clientes por llamar sin abogado",icon:"ti-headphone-alt"},{path:"/listado-casos-viable-juridicamente",name:"Casos viable jurídicamente",icon:"ti-check-box"},{path:"/listado-presupuestos-abogado-enviados",name:"Presupuestos abogado enviados",icon:"ti-send"},{path:"/listado-presupuestos-enviados-seguimiento-abogado",name:"Presupuestos enviados seguimiento abogado",icon:"ti-send"},{path:"/casos-sin-asignar",name:"Casos sin asignar",icon:"ti-eye"},{path:"/clientes-sin-presupuesto",name:"Clientes sin presupuesto",icon:"ti-write"},{path:"/clientes-presupuesto-pendiente",name:"Clientes presupuesto pte",icon:"ti-agenda"},{path:"/presupuestos-aceptados",name:"Presupuestos Aceptados",icon:"ti-thumb-up"},{path:"/listado-especialistas",name:"Listado especialistas",icon:"ti-briefcase"},{path:"/listado-despachos",name:"Listado despachos",icon:"ti-infinite"},{path:"/alta-clientes",name:"Alta clientes",icon:"ti-user"},{path:"/alta-especialista",name:"Alta especialista",icon:"ti-user"},{path:"/alta-despacho",name:"Alta despacho",icon:"ti-user"},{path:"/citas",name:"Citas",icon:"ti-calendar"},{path:"/calendario",name:"Calendario",icon:"ti-calendar"},{path:"/calendario-remesas",name:"Calendario Remesas",icon:"ti-money"},{path:"/listado-notificaciones-chats",name:"Listado Notificaciones",icon:"ti-infinite"},{path:"/historico-login",name:"Historico Accesos",icon:"ti-infinite"},{path:"/subir-facturas",name:"Subir Facturas",icon:"ti-upload"},{path:"/listado-facturas-propias",name:"Mis Facturas",icon:"ti-list"},{path:"/listado-casos-con-fecha-encargo",name:"Casos con fecha encargo",icon:"ti-calendar"},{path:"/curso",name:"Curso",icon:"ti-video-camera"}],valmerOpen:!1}},computed:{showValmerDropdown(){return this.needShow("/alta-casos-valmer")||this.needShow("/listado-casos-valmer")||this.needShow("/mis-casos-valmer")}},methods:{toggleSidebar(){this.$sidebar.showSidebar&&this.$sidebar.displaySidebar(!1)},needShow(e){const a=e.replace("/","");return!("curso"!==a||!this.dataUser||!0!==this.dataUser.admin)||this.routesWatch.some(e=>e.path===a&&!0===e.visibility)},logout(){const e=Object(b["b"])();Object(b["e"])(e).then(()=>{this.authState.isAuthenticated=!1,this.authState.user=null,localStorage.removeItem("userInform"),this.$router.push("/login")}).catch(e=>{console.error("Error al hacer logout:",e)})},async checkLogIn(){const e=await Object(b["b"])(),a=Object(l["g"])();Object(b["c"])(e,async e=>{this.authState.isAuthenticated=!!e,this.authState.user=e,this.lastLogin=e.metadata.lastSignInTime,await Object(l["l"])(Object(l["d"])(a,"users",e.uid),{email:e.email,lastLogin:(new Date).toISOString()},{merge:!0}),this.dataUser=JSON.parse(localStorage.getItem("userInform"))?JSON.parse(localStorage.getItem("userInform")):e,setTimeout(()=>{const e=localStorage.getItem("userInform");this.routesWatch=e&&JSON.parse(e).routes||[]},"200")})}},async mounted(){this.currentPage=this.routes.findIndex(e=>e.path===this.$route.path),this.checkLogIn()},watch:{$route(e,a){console.log("Te encuentras en la URL: ",e.fullPath),this.currentPage=this.routes.findIndex(a=>a.path===e.path)},"authState.isAuthenticated"(e){e&&this.checkLogIn()}}},G=W,Y=(t("9028"),Object(h["a"])(G,w,O,!1,null,null,null)),K=Y.exports,Z=function(){var e=this,a=e._self._c;return a("div",{staticClass:"contact-us full-screen"},[a("nav",{staticClass:"navbar navbar-ct-default",attrs:{role:"navigation-demo"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"navbar-header"},[e._m(0),a("router-link",{staticClass:"navbar-brand",attrs:{to:{path:"/"}}},[e._v("Site title")])],1),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navigation-example-2"}},[a("ul",{staticClass:"nav navbar-nav navbar-right"},[a("li",[a("router-link",{attrs:{to:{path:"/"}}},[e._v("Home")])],1)])])])]),e._m(1),a("footer",{staticClass:"footer-demo"},[a("div",{staticClass:"container"},[a("nav",{staticClass:"pull-left"},[a("ul",[a("li",[a("router-link",{attrs:{to:{path:"/"}}},[e._v("Home")])],1),a("li",[a("router-link",{attrs:{to:{path:"/register"}}},[e._v("Register")])],1)])]),e._m(2)])])])},X=[function(){var e=this,a=e._self._c;return a("button",{staticClass:"navbar-toggle",attrs:{type:"button","data-toggle":"collapse","data-target":"#navigation-example-2"}},[a("span",{staticClass:"sr-only"},[e._v("Toggle navigation")]),a("span",{staticClass:"icon-bar"}),a("span",{staticClass:"icon-bar"}),a("span",{staticClass:"icon-bar"})])},function(){var e=this,a=e._self._c;return a("div",{staticClass:"wrapper wrapper-full-page section content"},[a("div",{},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8 col-md-offset-2 text-center"},[a("h2",{staticClass:"title text-danger"},[e._v("404 Not Found")]),a("h2",{staticClass:"title"},[e._v("\n              Oops! It seems that this page does not exist.\n            ")])])])])])])},function(){var e=this,a=e._self._c;return a("div",{staticClass:"copyright pull-right"},[e._v("\n        © 2017, made with\n        "),a("i",{staticClass:"fa fa-heart heart"}),e._v(" by Paper admin\n      ")])}],ee={},ae=ee,te=Object(h["a"])(ae,Z,X,!1,null,null,null),se=te.exports,ie=function(){var e=this,a=e._self._c;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6 col-xl-3",on:{click:function(a){return e.$router.push({path:"listado-clientes-llamar",query:{llamada:"1"}})}}},[a("stats-card",[a("div",{staticClass:"icon-big text-center",attrs:{slot:"header"},slot:"header"},[a("i",{staticClass:"ti-pulse"})]),a("div",{staticClass:"numbers",attrs:{slot:"content"},slot:"content"},[a("p",[e._v("Clientes para llamar")]),e._v("\n          "+e._s(e.clientesLlamar)+"\n        ")])])],1),a("div",{staticClass:"col-md-6 col-xl-3",on:{click:function(a){return e.$router.push({name:"casos-sin-asignar"})}}},[a("stats-card",[a("div",{staticClass:"icon-big text-center",attrs:{slot:"header"},slot:"header"},[a("i",{staticClass:"ti-pulse"})]),a("div",{staticClass:"numbers",attrs:{slot:"content"},slot:"content"},[a("p",[e._v("Casos sin asignar")]),e._v("\n          "+e._s(e.casosSinAsignar)+"\n        ")])])],1),a("div",{staticClass:"col-md-6 col-xl-3",on:{click:function(a){return e.$router.push({name:"clientes-sin-presupuesto"})}}},[a("stats-card",{on:{click:function(a){return e.$router.push({name:"ClientesSinPresupuesto"})}}},[a("div",{staticClass:"icon-big text-center",attrs:{slot:"header"},slot:"header"},[a("i",{staticClass:"ti-pulse"})]),a("div",{staticClass:"numbers",attrs:{slot:"content"},slot:"content"},[a("p",[e._v("Clientes sin presupuesto")]),e._v("\n          "+e._s(e.clientesSinPresupuesto)+"\n        ")])])],1)]),a("div",{staticClass:"dashboard-tabs q-mt-lg"},[a("button",{staticClass:"dashboard-tab",class:{"dashboard-tab-active":"actual"===e.selectedTab},on:{click:function(a){return e.setTab("actual")}}},[e._v("\n      Datos mes actual\n    ")]),a("button",{staticClass:"dashboard-tab",class:{"dashboard-tab-active":"mensual"===e.selectedTab},on:{click:function(a){return e.setTab("mensual")}}},[e._v("\n      Datos mensuales\n    ")])]),"actual"===e.selectedTab?a("div",{staticClass:"q-mt-xl"},[a("div",{staticClass:"row items-center q-mb-md",staticStyle:{"align-items":"center"}},[a("button",{staticClass:"btn btn-light",staticStyle:{"font-size":"1.5em"},on:{click:function(a){return e.cambiarMes(-1)}}},[e._v("←")]),a("span",{staticClass:"text-h6 q-mx-md",staticStyle:{margin:"0 16px"}},[e._v("\n        "+e._s(["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"][e.mesActual])+" "+e._s(e.anioActual)+"\n      ")]),a("button",{staticClass:"btn btn-light",staticStyle:{"font-size":"1.5em"},on:{click:function(a){return e.cambiarMes(1)}}},[e._v("→")])]),a("div",{staticClass:"text-h5 text-center"},[e._v("Casos cerrados "+e._s(["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"][e.mesActual])+" "+e._s(e.anioActual)+": "),a("b",[e._v(e._s(e.casosMes))])]),a("div",{staticClass:"q-mt-lg distribucion-row"},[a("div",{staticClass:"distribucion-col"},[a("h6",{staticClass:"text-center"},[e._v("Distribución por comunidad "+e._s(["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"][e.mesActual])+" "+e._s(e.anioActual))]),a("div",{staticClass:"barh-chart"},e._l(e.comunidadesOrdenadas,(function(t,s){return a("div",{key:"barh-"+s,staticClass:"barh-item"},[a("span",{staticClass:"barh-label"},[e._v(e._s(t.nombre))]),a("div",{staticClass:"barh-bar-wrap"},[a("div",{staticClass:"barh-bar",style:{width:18*t.valor+"px"}}),a("span",{staticClass:"barh-value"},[e._v(e._s(t.valor))])])])})),0)]),a("div",{staticClass:"distribucion-col"},[a("h6",{staticClass:"text-center"},[e._v("Distribución por perito "+e._s(["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"][e.mesActual])+" "+e._s(e.anioActual))]),a("div",{staticClass:"barh-chart"},e._l(e.distribucionPeritos,(function(t,s){return a("div",{key:"barh-perito-"+s,staticClass:"barh-item"},[a("span",{staticClass:"barh-label"},[e._v(e._s(t.nombre)+" "+e._s(t.apellidos))]),a("div",{staticClass:"barh-bar-wrap"},[a("div",{staticClass:"barh-bar",style:{width:18*t.valor+"px",background:"#43a047"}}),a("span",{staticClass:"barh-value"},[e._v(e._s(t.valor))])])])})),0)])]),a("div",{staticClass:"distribucion-row"},[a("div",{staticClass:"distribucion-col q-mt-lg",staticStyle:{"max-width":"400px",margin:"60px auto 0"}},[a("h6",{staticClass:"text-center"},[e._v("Distribución por tipo de cliente ("+e._s(["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"][e.mesActual])+" "+e._s(e.anioActual)+")")]),a("div",{staticClass:"pie-chart-wrap"},[a("div",{staticClass:"pie-chart",style:e.pieChartStyle}),a("div",{staticClass:"pie-legend"},[a("div",[a("span",{staticClass:"pie-dot pie-particular"}),e._v(" Particular: "+e._s(e.pieData.particular))]),a("div",[a("span",{staticClass:"pie-dot pie-despacho"}),e._v(" Despacho: "+e._s(e.pieData.despacho))])])])]),a("div",{staticClass:"distribucion-col q-mt-lg",staticStyle:{"max-width":"400px",margin:"60px auto 0"}},[a("h6",{staticClass:"text-center"},[e._v("Distribución por especialidad ("+e._s(["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"][e.mesActual])+" "+e._s(e.anioActual)+")")]),a("div",{staticClass:"pie-chart-wrap"},[a("div",{staticClass:"pie-chart",style:e.pieEspecialidadesStyle}),a("div",{staticClass:"pie-legend"},e._l(e.pieEspecialidades,(function(t,s){return a("div",{key:"esp-"+s},[a("span",{staticClass:"pie-dot",style:{background:e.pieColors[s%e.pieColors.length]}}),e._v("\n              "+e._s(t.nombre)+": "+e._s(t.valor)+"\n            ")])})),0)])])]),a("div",{staticClass:"q-mt-lg",staticStyle:{"max-width":"600px",margin:"60px auto 0"}},[a("h6",{staticClass:"text-center"},[e._v("Top Despachos ("+e._s(["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"][e.mesActual])+" "+e._s(e.anioActual)+")")]),a("div",{staticClass:"barh-chart"},e._l(e.topDespachos,(function(t,s){return a("div",{key:"desp-"+s,staticClass:"barh-item"},[a("span",{staticClass:"barh-label"},[e._v(e._s(t.nombre))]),a("div",{staticClass:"barh-bar-wrap"},[a("div",{staticClass:"barh-bar",style:{width:18*t.valor+"px",background:"#9c27b0"}}),a("span",{staticClass:"barh-value"},[e._v(e._s(t.valor))])])])})),0)]),a("div",{staticClass:"text-h5 mt-5"},[e._v("Graficos de casos cerrados últimos 6 meses")]),a("div",{staticClass:"q-mt-md",staticStyle:{"max-width":"700px",margin:"40px auto 0"}},[a("div",{staticClass:"bar-chart"},e._l(e.casosUltimos6Meses.datasets[0].data,(function(t,s){return a("div",{key:s,staticClass:"bar-item"},[a("div",{staticClass:"bar-value",staticStyle:{"margin-bottom":"4px"}},[e._v(e._s(t))]),a("div",{staticClass:"bar",style:{height:6*t+10+"px"},attrs:{title:t}}),a("div",{staticClass:"bar-label"},[e._v(e._s(e.casosUltimos6Meses.labels[s]))])])})),0)]),a("div",{staticClass:"text-h5 mt-5"},[e._v("Pagos por especialidad y tipo ("+e._s(["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"][e.mesActual])+" "+e._s(e.anioActual)+")")]),a("div",{staticClass:"q-mt-md",staticStyle:{"max-width":"900px",margin:"40px auto 0"}},[a("div",{staticClass:"pagos-chart"},e._l(e.pagosPorEspecialidad,(function(t,s){return a("div",{key:"pagos-"+s,staticClass:"pagos-item"},[a("div",{staticClass:"pagos-header"},[a("h6",{staticClass:"pagos-title"},[e._v(e._s(t.nombre))]),a("div",{staticClass:"pagos-total"},[e._v("Total: "+e._s(t.total))])]),a("div",{staticClass:"pagos-bars"},[a("div",{staticClass:"pagos-bar-item"},[a("span",{staticClass:"pagos-label"},[e._v("Estudio")]),a("div",{staticClass:"pagos-bar-wrap"},[a("div",{staticClass:"pagos-bar pagos-estudio",style:{width:15*t.estudio+"px"}}),a("span",{staticClass:"pagos-value"},[e._v(e._s(t.estudio))])])]),a("div",{staticClass:"pagos-bar-item"},[a("span",{staticClass:"pagos-label"},[e._v("Informe")]),a("div",{staticClass:"pagos-bar-wrap"},[a("div",{staticClass:"pagos-bar pagos-informe",style:{width:15*t.informe+"px"}}),a("span",{staticClass:"pagos-value"},[e._v(e._s(t.informe))])])]),a("div",{staticClass:"pagos-bar-item"},[a("span",{staticClass:"pagos-label"},[e._v("Ratificación")]),a("div",{staticClass:"pagos-bar-wrap"},[a("div",{staticClass:"pagos-bar pagos-ratificacion",style:{width:15*t.ratificacion+"px"}}),a("span",{staticClass:"pagos-value"},[e._v(e._s(t.ratificacion))])])])])])})),0)]),a("div",{staticClass:"text-h5 mt-5"},[e._v("Distribución de pagos por tipo ("+e._s(["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"][e.mesActual])+" "+e._s(e.anioActual)+")")]),a("div",{staticClass:"q-mt-md",staticStyle:{"max-width":"600px",margin:"40px auto 0"}},[a("div",{staticClass:"pagos-tipo-chart"},[a("div",{staticClass:"pagos-tipo-item"},[a("span",{staticClass:"pagos-tipo-label"},[e._v("Estudios de Viabilidad")]),a("div",{staticClass:"pagos-tipo-bar-wrap"},[a("div",{staticClass:"pagos-tipo-bar pagos-estudio",style:{width:8*e.pagosPorTipo.estudio+"px"}}),a("span",{staticClass:"pagos-tipo-value"},[e._v(e._s(e.pagosPorTipo.estudio))])])]),a("div",{staticClass:"pagos-tipo-item"},[a("span",{staticClass:"pagos-tipo-label"},[e._v("Informes Periciales")]),a("div",{staticClass:"pagos-tipo-bar-wrap"},[a("div",{staticClass:"pagos-tipo-bar pagos-informe",style:{width:8*e.pagosPorTipo.informe+"px"}}),a("span",{staticClass:"pagos-tipo-value"},[e._v(e._s(e.pagosPorTipo.informe))])])]),a("div",{staticClass:"pagos-tipo-item"},[a("span",{staticClass:"pagos-tipo-label"},[e._v("Ratificaciones")]),a("div",{staticClass:"pagos-tipo-bar-wrap"},[a("div",{staticClass:"pagos-tipo-bar pagos-ratificacion",style:{width:8*e.pagosPorTipo.ratificacion+"px"}}),a("span",{staticClass:"pagos-tipo-value"},[e._v(e._s(e.pagosPorTipo.ratificacion))])])])])]),a("div",{staticClass:"text-h5 mt-5"},[e._v("Métricas de Conversión ("+e._s(["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"][e.mesActual])+" "+e._s(e.anioActual)+")")]),a("div",{staticClass:"q-mt-md",staticStyle:{"max-width":"800px",margin:"40px auto 0"}},[a("div",{staticClass:"conversion-global"},[a("h6",{staticClass:"text-center mb-3"},[e._v("Conversión Global")]),a("div",{staticClass:"conversion-card"},[a("div",{staticClass:"conversion-item"},[a("span",{staticClass:"conversion-label"},[e._v("Presupuestos Enviados")]),a("span",{staticClass:"conversion-value"},[e._v(e._s(e.metricasConversion.global.enviados))])]),a("div",{staticClass:"conversion-item"},[a("span",{staticClass:"conversion-label"},[e._v("Presupuestos Aceptados")]),a("span",{staticClass:"conversion-value"},[e._v(e._s(e.metricasConversion.global.aceptados))])]),a("div",{staticClass:"conversion-item"},[a("span",{staticClass:"conversion-label"},[e._v("Porcentaje de Conversión")]),a("span",{staticClass:"conversion-value conversion-percentage"},[e._v(e._s(e.metricasConversion.global.porcentaje)+"%")])])])]),a("div",{staticClass:"conversion-especialidades mt-4"},[a("h6",{staticClass:"text-center mb-3"},[e._v("Conversión por Especialidad")]),a("div",{staticClass:"conversion-chart"},e._l(e.metricasConversion.especialidades,(function(t,s){return a("div",{key:"conv-"+s,staticClass:"conversion-item-card"},[a("div",{staticClass:"conversion-header"},[a("h6",{staticClass:"conversion-title"},[e._v(e._s(t.nombre))]),a("div",{staticClass:"conversion-total"},[e._v(e._s(t.porcentaje)+"%")])]),a("div",{staticClass:"conversion-details"},[a("div",{staticClass:"conversion-detail-item"},[a("span",{staticClass:"conversion-detail-label"},[e._v("Enviados:")]),a("span",{staticClass:"conversion-detail-value"},[e._v(e._s(t.enviados))])]),a("div",{staticClass:"conversion-detail-item"},[a("span",{staticClass:"conversion-detail-label"},[e._v("Aceptados:")]),a("span",{staticClass:"conversion-detail-value"},[e._v(e._s(t.aceptados))])]),a("div",{staticClass:"conversion-bar-wrap"},[a("div",{staticClass:"conversion-bar",style:{width:t.porcentaje+"%"}})])])])})),0)])])]):a("div",{staticClass:"q-mt-xl"},[a("div",{staticClass:"text-h5 mt-5"},[e._v("Comparativa anual de casos ("+e._s(e.anioActual)+" vs "+e._s(e.anioActual-1)+")")]),a("div",{staticClass:"q-mt-md line-chart-wrapper"},[a("svg",{staticClass:"line-chart-svg",attrs:{viewBox:"0 0 100 100",preserveAspectRatio:"none"}},[e.comparativaAnualCasos.actual.length?a("polyline",{staticClass:"line-chart-line line-chart-line-actual",attrs:{points:e.getLinePoints(e.comparativaAnualCasos.actual),fill:"none"}}):e._e(),e.comparativaAnualCasos.anterior.length?a("polyline",{staticClass:"line-chart-line line-chart-line-anterior",attrs:{points:e.getLinePoints(e.comparativaAnualCasos.anterior),fill:"none"}}):e._e()]),a("div",{staticClass:"line-chart-points"},[e._l(e.comparativaAnualCasos.actual,(function(t,s){return a("div",{key:"point-actual-"+s,staticClass:"line-point line-point-actual",style:e.getPointStyle(t,s,e.comparativaAnualCasos.actual.length)},[a("div",{staticClass:"line-point-tooltip"},[e._v("\n            "+e._s(e.mesesCortos[s])+" "+e._s(e.anioActual)+": "+e._s(t)+" casos\n          ")])])})),e._l(e.comparativaAnualCasos.anterior,(function(t,s){return a("div",{key:"point-anterior-"+s,staticClass:"line-point line-point-anterior",style:e.getPointStyle(t,s,e.comparativaAnualCasos.anterior.length)},[a("div",{staticClass:"line-point-tooltip"},[e._v("\n            "+e._s(e.mesesCortos[s])+" "+e._s(e.anioActual-1)+": "+e._s(t)+" casos\n          ")])])}))],2),a("div",{staticClass:"line-chart-labels"},e._l(e.comparativaAnualCasos.labels,(function(t,s){return a("span",{key:"line-label-"+s},[e._v(e._s(t))])})),0),a("div",{staticClass:"line-chart-legend"},[a("span",[a("span",{staticClass:"legend-dot legend-dot-actual"}),e._v(e._s(e.anioActual))]),a("span",[a("span",{staticClass:"legend-dot legend-dot-anterior"}),e._v(e._s(e.anioActual-1))])])]),a("div",{staticClass:"text-h5 mt-5"},[e._v("Ranking anual por perito ("+e._s(e.anioActual)+")")]),a("div",{staticClass:"ranking-chart q-mt-md"},[e._l(e.rankingPeritos,(function(t,s){return a("div",{key:"ranking-perito-"+s,staticClass:"ranking-item"},[a("div",{staticClass:"ranking-label"},[e._v(e._s(t.nombre))]),a("div",{staticClass:"ranking-bar-wrap"},[a("div",{staticClass:"ranking-bar",style:{width:e.calcularRankingWidth(t.valor,e.rankingPeritos.length?e.rankingPeritos[0].valor:0),background:"#43a047"}}),a("div",{staticClass:"ranking-value"},[e._v(e._s(t.valor))])])])})),e.rankingPeritos.length?e._e():a("div",{staticClass:"ranking-empty"},[e._v("Sin datos disponibles.")])],2),a("div",{staticClass:"text-h5 mt-5"},[e._v("Ranking anual por comunidad ("+e._s(e.anioActual)+")")]),a("div",{staticClass:"ranking-chart q-mt-md"},[e._l(e.rankingComunidades,(function(t,s){return a("div",{key:"ranking-comunidad-"+s,staticClass:"ranking-item"},[a("div",{staticClass:"ranking-label"},[e._v(e._s(t.nombre))]),a("div",{staticClass:"ranking-bar-wrap"},[a("div",{staticClass:"ranking-bar",style:{width:e.calcularRankingWidth(t.valor,e.rankingComunidades.length?e.rankingComunidades[0].valor:0),background:"#1976d2"}}),a("div",{staticClass:"ranking-value"},[e._v(e._s(t.valor))])])])})),e.rankingComunidades.length?e._e():a("div",{staticClass:"ranking-empty"},[e._v("Sin datos disponibles.")])],2),a("div",{staticClass:"text-h5 mt-5"},[e._v("Distribución anual por tipo de cliente ("+e._s(e.anioActual)+")")]),a("div",{staticClass:"ranking-pie-wrapper q-mt-md"},[a("div",{staticClass:"pie-chart",style:e.rankingTipoClienteStyle}),a("div",{staticClass:"pie-legend"},[a("div",[a("span",{staticClass:"pie-dot pie-particular"}),e._v(" Particular: "+e._s(e.rankingTipoCliente.particular))]),a("div",[a("span",{staticClass:"pie-dot pie-despacho"}),e._v(" Despacho: "+e._s(e.rankingTipoCliente.despacho))])])]),a("div",{staticClass:"text-h5 mt-5"},[e._v("Conversión anual global ("+e._s(e.anioActual)+")")]),a("div",{staticClass:"conversion-anual-card q-mt-md"},[a("div",{staticClass:"conversion-anual-item"},[a("span",{staticClass:"conversion-anual-label"},[e._v("Presupuestos enviados")]),a("span",{staticClass:"conversion-anual-value"},[e._v(e._s(e.conversionAnualGlobal.enviados))])]),a("div",{staticClass:"conversion-anual-item"},[a("span",{staticClass:"conversion-anual-label"},[e._v("Presupuestos aceptados")]),a("span",{staticClass:"conversion-anual-value"},[e._v(e._s(e.conversionAnualGlobal.aceptados))])]),a("div",{staticClass:"conversion-anual-item"},[a("span",{staticClass:"conversion-anual-label"},[e._v("Porcentaje conversión")]),a("span",{staticClass:"conversion-anual-value conversion-anual-percentage"},[e._v(e._s(e.conversionAnualGlobal.porcentaje)+"%")])])]),a("div",{staticClass:"text-h5 mt-5"},[e._v("Conversión anual por especialidad ("+e._s(e.anioActual)+")")]),a("div",{staticClass:"conversion-especialidades-table q-mt-md"},[e._m(0),e._l(e.conversionAnualEspecialidades,(function(t,s){return a("div",{key:"conv-esp-"+s,staticClass:"conversion-especialidades-row"},[a("span",[e._v(e._s(t.nombre))]),a("span",[e._v(e._s(t.enviados))]),a("span",[e._v(e._s(t.aceptados))]),a("span",[e._v(e._s(t.porcentaje)+"%")])])})),e.conversionAnualEspecialidades.length?e._e():a("div",{staticClass:"ranking-empty"},[e._v("Sin datos disponibles.")])],2),a("div",{staticClass:"text-h5 mt-5"},[e._v("Ranking presupuestos aceptados por especialidad ("+e._s(e.anioActual)+")")]),a("div",{staticClass:"ranking-chart q-mt-md"},[e._l(e.conversionAnualEspecialidades,(function(t,s){return a("div",{key:"ranking-esp-"+s,staticClass:"ranking-item"},[a("div",{staticClass:"ranking-label"},[e._v(e._s(t.nombre))]),a("div",{staticClass:"ranking-bar-wrap"},[a("div",{staticClass:"ranking-bar",style:{width:e.calcularRankingWidth(t.aceptados,e.conversionAnualEspecialidades.length?e.conversionAnualEspecialidades[0].aceptados:0),background:"#ff9800"}}),a("div",{staticClass:"ranking-value"},[e._v(e._s(t.aceptados))])])])})),e.conversionAnualEspecialidades.length?e._e():a("div",{staticClass:"ranking-empty"},[e._v("Sin datos disponibles.")])],2)])])},ne=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"conversion-especialidades-head"},[a("span",[e._v("Especialidad")]),a("span",[e._v("Enviados")]),a("span",[e._v("Aceptados")]),a("span",[e._v("%")])])}],oe=function(){var e=this,a=e._self._c;return a("div",{staticClass:"form-group",class:{"input-group":e.hasIcon}},[e._t("label",(function(){return[e.label?a("label",{staticClass:"control-label"},[e._v("\n      "+e._s(e.label)+"\n    ")]):e._e()]})),e._t("addonLeft",(function(){return[e.addonLeftIcon?a("span",{staticClass:"input-group-prepend"},[a("i",{staticClass:"input-group-text",class:e.addonLeftIcon})]):e._e()]})),a("input",e._b({staticClass:"form-control",attrs:{"aria-describedby":"addon-right addon-left"},domProps:{value:e.value},on:{input:function(a){return e.$emit("input",a.target.value)}}},"input",e.$attrs,!1)),e._t("default"),e._t("addonRight",(function(){return[e.addonRightIcon?a("span",{staticClass:"input-group-append"},[a("i",{staticClass:"input-group-text",class:e.addonRightIcon})]):e._e()]}))],2)},le=[],ce={inheritAttrs:!1,name:"fg-input",props:{label:String,value:[String,Number],addonRightIcon:String,addonLeftIcon:String},computed:{hasIcon(){const{addonRight:e,addonLeft:a}=this.$slots;return void 0!==e||void 0!==a||void 0!==this.addonRightIcon||void 0!==this.addonLeftIcon}}},re=ce,de=Object(h["a"])(re,oe,le,!1,null,null,null),ue=de.exports,pe=function(){var e=this,a=e._self._c;return a(e.tag,{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.closeDropDown,expression:"closeDropDown"}],tag:"component",staticClass:"dropdown",class:{show:e.isOpen},on:{click:e.toggleDropDown}},[a("a",{staticClass:"dropdown-toggle btn-rotate",class:e.titleClasses,attrs:{"data-toggle":"dropdown"}},[e._t("title",(function(){return[a("i",{class:e.icon}),a("span",{staticClass:"notification"},[e._v(e._s(e.title)+"\n        "),a("b",{staticClass:"caret"})])]}))],2),a("ul",{staticClass:"dropdown-menu",class:{show:e.isOpen}},[e._t("default")],2)])},me=[],ve={props:{tag:{type:String,default:"li"},title:String,icon:String,titleClasses:[String,Object,Array]},data(){return{isOpen:!1}},methods:{toggleDropDown(){this.isOpen=!this.isOpen,this.$emit("change",this.isOpen)},closeDropDown(){this.isOpen=!1,this.$emit("change",!1)}}},be=ve,fe=Object(h["a"])(be,pe,me,!1,null,null,null),Ce=fe.exports,he=function(){var e=this,a=e._self._c;return a("table",{staticClass:"table",class:e.tableClass},[a("thead",[e._t("columns",(function(){return e._l(e.columns,(function(t){return a("th",{key:t},[e._v(e._s(t))])}))}))],2),a("tbody",e._l(e.data,(function(t,s){return a("tr",{key:s},[e._t("default",(function(){return e._l(e.columns,(function(s,i){return e.hasValue(t,s)?a("td",{key:i},[e._v("\n          "+e._s(e.itemValue(t,s))+"\n        ")]):e._e()}))}),{row:t})],2)})),0)])},ge=[],ye={name:"paper-table",props:{columns:Array,data:Array,type:{type:String,default:"striped"},title:{type:String,default:""},subTitle:{type:String,default:""}},computed:{tableClass(){return"table-"+this.type}},methods:{hasValue(e,a){return"undefined"!==e[a.toLowerCase()]},itemValue(e,a){return e[a.toLowerCase()]}}},_e=ye,we=Object(h["a"])(_e,he,ge,!1,null,null,null),Oe=we.exports,je=function(){var e=this,a=e._self._c;return a(e.tag,{tag:"component",staticClass:"btn",class:[{"btn-round":e.round},{"btn-block":e.block},{"btn-just-icon":e.icon},{["btn-"+e.type]:e.type&&!e.outline},{["btn-outline-"+e.type]:e.type&&e.outline},{["btn-"+e.size]:e.size},{"btn-link":e.simple}],attrs:{type:e.nativeType,disabled:e.disabled||e.loading}},[e._t("loading",(function(){return[e.loading?a("i",{staticClass:"fa fa-spinner fa-spin"}):e._e()]})),e._t("default")],2)},ke=[],Ae={name:"p-button",props:{tag:{type:String,default:"button"},round:Boolean,icon:Boolean,outline:Boolean,block:Boolean,loading:Boolean,disabled:Boolean,type:{type:String,default:"default"},nativeType:{type:String,default:"button"},size:{type:String,default:""},simple:Boolean}},xe=Ae,Se=Object(h["a"])(xe,je,ke,!1,null,null,null),De=Se.exports,Ee=function(){var e=this,a=e._self._c;return a("div",{staticClass:"card"},[e.$slots.image?a("div",{staticClass:"card-image"},[e._t("image")],2):e._e(),e.$slots.header||e.title?a("div",{staticClass:"card-header"},[e._t("header",(function(){return[a("h4",{staticClass:"card-title"},[e._v(e._s(e.title))]),e.subTitle?a("p",{staticClass:"card-category"},[e._v(e._s(e.subTitle))]):e._e()]}))],2):e._e(),e.$slots.default?a("div",{staticClass:"card-body"},[e._t("default")],2):e._e(),e._t("raw-content"),e.$slots.footer?a("div",{staticClass:"card-footer"},[a("hr"),e._t("footer")],2):e._e()],2)},Pe=[],Fe={name:"card",props:{title:String,subTitle:String}},Ne=Fe,Ie=Object(h["a"])(Ne,Ee,Pe,!1,null,null,null),Le=Ie.exports,Te=function(){var e=this,a=e._self._c;return a("card",[a("template",{slot:"header"},[e.$slots.title||e.title?a("h4",{staticClass:"card-title"},[e._t("title",(function(){return[e._v("\n        "+e._s(e.title)+"\n      ")]}))],2):e._e(),a("p",{staticClass:"card-category"},[e._t("subTitle",(function(){return[e._v("\n        "+e._s(e.subTitle)+"\n      ")]}))],2)]),a("div",[a("div",{staticClass:"ct-chart",attrs:{id:e.chartId}}),a("div",{staticClass:"footer"},[a("div",{staticClass:"chart-legend"},[e._t("legend")],2),a("hr"),a("div",{staticClass:"stats"},[e._t("footer")],2),a("div",{staticClass:"pull-right"})])])],2)},Qe=[],Me={name:"chart-card",components:{Card:Le},props:{footerText:{type:String,default:""},title:{type:String,default:""},subTitle:{type:String,default:""},chartType:{type:String,default:"Line"},chartOptions:{type:Object,default:()=>({})},chartData:{type:Object,default:()=>({labels:[],series:[]})}},data(){return{chartId:"no-id"}},methods:{initChart(e){const a="#"+this.chartId;e[this.chartType](a,this.chartData,this.chartOptions)},updateChartId(){const e=(new Date).getTime().toString(),a=this.getRandomInt(0,e);this.chartId="div_"+a},getRandomInt(e,a){return Math.floor(Math.random()*(a-e+1))+e}},mounted(){this.updateChartId(),t.e("chunk-2d219ff9").then(t.t.bind(null,"ba48",7)).then(e=>{let a=e.default||e;this.$nextTick(()=>{this.initChart(a)})})}},$e=Me,Be=Object(h["a"])($e,Te,Qe,!1,null,null,null),Ve=Be.exports,ze=function(){var e=this,a=e._self._c;return a("card",[a("div",[a("div",{staticClass:"row"},[e.$slots.header?a("div",{staticClass:"col-5"},[e._t("header")],2):e._e(),e.$slots.content?a("div",{staticClass:"col-7"},[e._t("content")],2):e._e()]),e.$slots.footer?a("div",[a("hr"),e._t("footer")],2):e._e()])])},Re=[],Je={name:"stats-card",components:{Card:Le}},qe=Je,Ue=Object(h["a"])(qe,ze,Re,!1,null,null,null),He=Ue.exports,We=function(){var e=this,a=e._self._c;return a("div",{staticClass:"sidebar",attrs:{"data-background-color":e.backgroundColor,"data-active-color":e.activeColor}},[a("div",{staticClass:"sidebar-wrapper",attrs:{id:"style-3"}},[e._m(0),e._t("default"),a("ul",{staticClass:"nav"},[e._t("links",(function(){return e._l(e.sidebarLinks,(function(e,t){return a("sidebar-link",{key:t,attrs:{to:e.path,name:e.name,icon:e.icon}})}))}))],2),a("moving-arrow",{attrs:{"move-y":e.arrowMovePx}})],2)])},Ge=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"logo"},[a("img",{staticStyle:{"max-width":"-webkit-fill-available"},attrs:{src:t("1ae4"),alt:""}})])}],Ye=function(){var e=this,a=e._self._c;return a("div")},Ke=[],Ze={props:{moveY:{type:Number,default:0}},computed:{arrowStyle(){return{transform:`translate3d(0px, ${this.moveY}px, 0px)`}}}},Xe=Ze,ea=(t("c374"),Object(h["a"])(Xe,Ye,Ke,!1,null,null,null)),aa=ea.exports,ta=function(){var e=this,a=e._self._c;return a(e.tag,e._b({tag:"component",staticClass:"nav-item",attrs:{tag:"li"},nativeOn:{click:function(a){return e.hideSidebar.apply(null,arguments)}}},"component",e.$attrs,!1),[a("a",{staticClass:"nav-link"},[e._t("default",(function(){return[e.icon?a("i",{class:e.icon}):e._e(),a("p",[e._v(e._s(e.name))])]}))],2)])},sa=[],ia={name:"sidebar-link",inheritAttrs:!1,inject:{autoClose:{default:!0},addLink:{default:()=>{}},removeLink:{default:()=>{}}},props:{name:String,icon:String,tag:{type:String,default:"router-link"}},methods:{hideSidebar(){this.autoClose&&this.$sidebar.displaySidebar(!1)},isActive(){return this.$el.classList.contains("active")}},mounted(){this.addLink&&this.addLink(this)},beforeDestroy(){this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el),this.removeLink&&this.removeLink(this)}},na=ia,oa=Object(h["a"])(na,ta,sa,!1,null,null,null),la=oa.exports,ca={props:{title:{type:String,default:"Informes médicos periciales"},backgroundColor:{type:String,default:"black",validator:e=>{let a=["white","black","darkblue"];return-1!==a.indexOf(e)}},activeColor:{type:String,default:"success",validator:e=>{let a=["primary","info","success","warning","danger"];return-1!==a.indexOf(e)}},sidebarLinks:{type:Array,default:()=>[]},autoClose:{type:Boolean,default:!0}},provide(){return{autoClose:this.autoClose,addLink:this.addLink,removeLink:this.removeLink}},components:{MovingArrow:aa,SidebarLink:la},computed:{arrowMovePx(){return this.linkHeight*this.activeLinkIndex}},data(){return{linkHeight:65,activeLinkIndex:0,windowWidth:0,isWindows:!1,hasAutoHeight:!1,links:[]}},methods:{findActiveLink(){this.links.forEach((e,a)=>{e.isActive()&&(this.activeLinkIndex=a)})},addLink(e){const a=this.$slots.links.indexOf(e.$vnode);this.links.splice(a,0,e)},removeLink(e){const a=this.links.indexOf(e);a>-1&&this.links.splice(a,1)}},mounted(){this.$watch("$route",this.findActiveLink,{immediate:!0})}},ra=ca,da=Object(h["a"])(ra,We,Ge,!1,null,null,null),ua=da.exports;const pa={showSidebar:!1,sidebarLinks:[],displaySidebar(e){this.showSidebar=e}},ma={install(e){let a=new e({data:{sidebarStore:pa}});e.prototype.$sidebar=a.sidebarStore,e.component("side-bar",ua),e.component("sidebar-link",la)}};var va=ma;const ba=["Andalucía","Aragón","Asturias","Islas Baleares","Canarias","Cantabria","Castilla y León","Castilla-La Mancha","Cataluña","Comunidad Valenciana","Extremadura","Galicia","Madrid","Murcia","Navarra","País Vasco","La Rioja","Ceuta","Melilla"],fa=["Álava","Albacete","Alicante","Almería","Ávila","Badajoz","Baleares","Barcelona","Burgos","Cáceres","Cádiz","Cantabria","Castellón","Ciudad Real","Córdoba","La Coruña","Cuenca","Gerona","Granada","Guadalajara","Guipúzcoa","Huelva","Huesca","Jaén","León","Lérida","Lugo","Madrid","Málaga","Murcia","Navarra","Orense","Palencia","Las Palmas","Pontevedra","La Rioja","Salamanca","Segovia","Sevilla","Soria","Tarragona","Santa Cruz de Tenerife","Teruel","Toledo","Valencia","Valladolid","Vizcaya","Zamora","Zaragoza","Ceuta","Melilla"];var Ca={components:{StatsCard:He,ChartCard:Ve},setup(){const e=Object(s["ref"])(0),a=Object(s["ref"])(0),t=Object(s["ref"])(0),i=(Object(s["ref"])([]),Object(s["ref"])([]),Object(s["ref"])(!1)),n=Object(s["ref"])(!1),o=Object(s["ref"])({labels:[],datasets:[{label:"Usuarios por día",backgroundColor:["#f87979","#a9d0f5","#f8e71c","#50e3c2"],data:[]}]}),c=Object(s["ref"])({labels:[],datasets:[{label:"Usuarios por día",backgroundColor:["#f87979"],data:[]}]}),r=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("telEspecialista","==",null),Object(l["n"])("status","==","0"),Object(l["n"])("confirmaCaso","==","1"));Object(l["i"])(r,a=>{e.value=a.docs.length});const d=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("status","==","1"));Object(l["i"])(d,e=>{a.value=e.docs.length});const u=Object(l["k"])(Object(l["b"])(p,"clientes"),Object(l["n"])("confirmaCaso","==","0"));Object(l["i"])(u,e=>{t.value=e.docs.length});const m=Object(s["ref"])((new Date).getMonth()),v=Object(s["ref"])((new Date).getFullYear()),b=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],f=Object(s["ref"])(0),C=Object(s["ref"])("actual"),h=Object(s["ref"])(null),g=Object(s["ref"])(null),y="casosResumenMensual",_=(e,a)=>`${e}-${String(a+1).padStart(2,"0")}`,w=async()=>{const e=await k(v.value,m.value);O(e)},O=e=>{f.value=e.casosTotales||0,Z.value.data=e.distribucionComunidades||Array(ba.length).fill(0),X.value=e.distribucionPeritos||[],ee.value=e.pieData||{particular:0,despacho:0},ae.value=e.pieEspecialidades||[],S.value=e.topDespachos||[],te.value=e.pagosPorEspecialidad||[],se.value=e.pagosPorTipo||{estudio:0,informe:0,ratificacion:0},ie.value=e.metricasConversion||{global:{enviados:0,aceptados:0,porcentaje:0},especialidades:[]}},j=async(e,a,t,s)=>{const i=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("status","in",["3","4"]),Object(l["n"])("presupuestoAceptado",">=",t),Object(l["n"])("presupuestoAceptado","<",s)),n=await Object(l["f"])(i),o=n.docs.map(e=>({id:e.id,...e.data()})),c=Array(ba.length).fill(0),r={};let d=0,u=0;const m={},v={},b=new Set,f=new Set,C=new Set,h=new Set;for(const l of o)l.telCliente&&b.add(l.telCliente),l.telEspecialista&&f.add(l.telEspecialista),l.especialidad&&C.add(l.especialidad),"1"!==l.tipoCliente&&1!==l.tipoCliente||!l.idDespacho||h.add(l.idDespacho),"1"===l.tipoCliente||1===l.tipoCliente?u++:d++;let g=[];b.size>0&&(g=await le(Object(l["b"])(p,"clientes"),"tel",Array.from(b)));const y={};for(const l of g)y[l.tel]=l;for(const l of o){if(!l.telCliente)continue;const e=y[l.telCliente];if(!e)continue;const a="number"===typeof e.comunidad?e.comunidad:parseInt(e.comunidad);!isNaN(a)&&a>=0&&a<ba.length&&c[a]++}let _=[];f.size>0&&(_=await le(Object(l["b"])(p,"especialistas"),"tel",Array.from(f)));const w={};for(const l of _)w[l.tel]=l;for(const l of o)l.telEspecialista&&(r[l.telEspecialista]||(r[l.telEspecialista]={count:0,nombre:"",apellidos:""}),r[l.telEspecialista].count++);const O=[];for(const l in r){const e=w[l];O.push({nombre:e&&e.nombre?e.nombre:l,apellidos:e&&e.apellidos?e.apellidos:"",valor:r[l].count})}O.sort((e,a)=>a.valor-e.valor);let j=[];C.size>0&&(j=await le(Object(l["b"])(p,"especialidades"),"__name__",Array.from(C)));const k={};for(const l of j)k[l.id]=l;for(const l of o)l.especialidad&&(m[l.especialidad]||(m[l.especialidad]=0),m[l.especialidad]++);const A=[];for(const l in m){const e=k[l];A.push({nombre:e&&e.nombre?e.nombre:l,valor:m[l]})}A.sort((e,a)=>a.valor-e.valor);let x=[];h.size>0&&(x=await le(Object(l["b"])(p,"despachos"),"__name__",Array.from(h)));const S={};for(const l of x)S[l.id]=l;for(const l of o)"1"!==l.tipoCliente&&1!==l.tipoCliente||l.idDespacho&&(v[l.idDespacho]||(v[l.idDespacho]=0),v[l.idDespacho]++);const D=[];for(const l in v){const e=S[l];D.push({nombre:e&&e.nombre?e.nombre:l,valor:v[l]})}D.sort((e,a)=>a.valor-e.valor);const{pagosPorEspecialidad:E,pagosPorTipo:P}=await ne(o),F=await oe(t,s);return{anio:e,mes:a,casosTotales:o.length,distribucionComunidades:c,distribucionPeritos:O,pieData:{particular:d,despacho:u},pieEspecialidades:A,topDespachos:D,pagosPorEspecialidad:E,pagosPorTipo:P,metricasConversion:F}},k=async(e,a)=>{const t=new Date(e,a,1).getTime(),s=new Date(e,a+1,1).getTime(),i=s<=Date.now(),n=_(e,a),o=Object(l["d"])(Object(l["b"])(p,y),n);if(i){const e=await Object(l["e"])(o);if(e.exists())return e.data()}const c=await j(e,a,t,s);return i&&await Object(l["l"])(o,c),c},A=Object(s["computed"])(()=>{const e=ae.value.reduce((e,a)=>e+a.valor,0);if(0===e)return{background:"#eee"};let a=0,t=ae.value.map((t,s)=>{const i=Math.round(a/e*100);a+=t.valor;const n=Math.round(a/e*100),o=x[s%x.length];return`${o} ${i}% ${n}%`});return{background:`conic-gradient(${t.join(", ")})`}}),x=["#f87979","#50e3c2","#1976d2","#f8e71c","#a9d0f5","#43a047","#ff9800","#e91e63","#9c27b0","#00bcd4","#8bc34a","#ffc107","#795548","#607d8b"],S=Object(s["ref"])([]),D=Object(s["ref"])({labels:[],datasets:[{label:"Casos cerrados últimos 6 meses",backgroundColor:["#50e3c2"],data:[]}]}),E=Object(s["ref"])(!1),P=Object(s["ref"])({labels:[],actual:[],anterior:[]}),F=Object(s["ref"])([]),N=Object(s["ref"])([]),I=Object(s["ref"])({particular:0,despacho:0}),L=Object(s["ref"])({enviados:0,aceptados:0,porcentaje:0}),T=Object(s["ref"])([]),Q=Object(s["computed"])(()=>{const e=[...P.value.actual,...P.value.anterior];return e.length?Math.max(...e):0}),M=e=>{const a=e.length;if(!a)return"";const t=Q.value||1,s=a>1?100/(a-1):0;return e.map((e,i)=>{const n=1===a?50:i*s,o=100-e/t*100;return`${n},${o}`}).join(" ")},$=(e,a,t)=>{if(!t)return{};const s=Q.value||1,i=1===t?50:a/(t-1)*100,n=100-e/s*100;return{left:i+"%",top:n+"%"}},B=Object(s["computed"])(()=>{const e=I.value.particular+I.value.despacho;if(!e)return{background:"#eee"};const a=Math.round(I.value.particular/e*100);return{background:`conic-gradient(#1de9b6 0% ${a}%, #1976d2 ${a}% 100%)`}}),V=async()=>{const e=new Date,a=[],t=[];for(let i=5;i>=0;i--){const s=new Date(e.getFullYear(),e.getMonth()-i,1),n=s.getFullYear(),o=s.getMonth();a.push({anio:n,mes:o}),t.push(["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"][o]+" "+n)}const s=[];for(const{anio:i,mes:n}of a){const e=new Date(i,n,1).getTime(),a=new Date(i,n+1,1).getTime(),t=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("status","in",["3","4"]),Object(l["n"])("presupuestoAceptado",">=",e),Object(l["n"])("presupuestoAceptado","<",a)),o=await Object(l["f"])(t);s.push(o.docs.length)}D.value.labels=t,D.value.datasets[0].data=s,E.value=!0},z=async()=>{const e=v.value,a=e-1,t=b.slice(),s=[],i=[];for(let n=0;n<12;n++){const[t,o]=await Promise.all([k(e,n),k(a,n)]);s.push(t&&t.casosTotales||0),i.push(o&&o.casosTotales||0)}P.value={labels:t,actual:s,anterior:i}},R=async()=>{h.value!==v.value&&(await z(),h.value=v.value)},J=async()=>{const e=v.value,a={},t=Array(ba.length).fill(0);let s=0,i=0,n=0,o=0;const l={},c=await Promise.all(Array.from({length:12},(a,t)=>k(e,t)));c.forEach(e=>{if(!e)return;(e.distribucionPeritos||[]).forEach(e=>{const t=`${e.nombre||""} ${e.apellidos||""}`.trim()||"Sin nombre";a[t]||(a[t]=0),a[t]+=e.valor||0}),(e.distribucionComunidades||[]).forEach((e,a)=>{"number"===typeof t[a]&&(t[a]+=e||0)}),e.pieData&&(s+=e.pieData.particular||0,i+=e.pieData.despacho||0),e.metricasConversion&&e.metricasConversion.global&&(n+=e.metricasConversion.global.enviados||0,o+=e.metricasConversion.global.aceptados||0);const c=e.metricasConversion&&e.metricasConversion.especialidades?e.metricasConversion.especialidades:[];c.forEach(e=>{e.nombre&&(l[e.nombre]||(l[e.nombre]={enviados:0,aceptados:0}),l[e.nombre].enviados+=e.enviados||0,l[e.nombre].aceptados+=e.aceptados||0)})}),F.value=Object.entries(a).map(([e,a])=>({nombre:e,valor:a})).filter(e=>e.valor>0).sort((e,a)=>a.valor-e.valor),N.value=t.map((e,a)=>({nombre:ba[a],valor:e})).filter(e=>e.valor>0).sort((e,a)=>a.valor-e.valor),I.value={particular:s,despacho:i},L.value={enviados:n,aceptados:o,porcentaje:n?Math.round(o/n*100):0},T.value=Object.entries(l).map(([e,a])=>({nombre:e,enviados:a.enviados,aceptados:a.aceptados,porcentaje:a.enviados?Math.round(a.aceptados/a.enviados*100):0})).filter(e=>e.enviados>0||e.aceptados>0).sort((e,a)=>a.aceptados-e.aceptados)},q=async()=>{g.value!==v.value&&(await J(),g.value=v.value)},U=(e,a)=>{if(!a)return"5%";const t=Math.max(5,e/a*100);return t+"%"},H=Object(s["computed"])(()=>ba.map((e,a)=>({nombre:e,valor:Z.value.data[a]})).filter(e=>e.valor>0).sort((e,a)=>a.valor-e.valor)),W=Object(s["computed"])(()=>{const e=ee.value.particular+ee.value.despacho;if(0===e)return{background:"#eee"};const a=Math.round(ee.value.particular/e*100);return{background:`conic-gradient(#1de9b6 0% ${a}%, #1976d2 ${a}% 100%)`}}),G=e=>{let a=m.value+e,t=v.value;a<0?(a=11,t--):a>11&&(a=0,t++),m.value=a,v.value=t,w(),V()},Y=()=>{"mensual"===C.value&&(R(),q())},K=e=>{C.value=e,Y()};Object(s["watch"])(v,()=>{h.value=null,g.value=null,Y()}),Object(s["watch"])(C,Y);const Z=Object(s["ref"])({labels:ba,data:Array(ba.length).fill(0)}),X=Object(s["ref"])([]),ee=Object(s["ref"])({particular:0,despacho:0}),ae=Object(s["ref"])([]),te=Object(s["ref"])([]),se=Object(s["ref"])({estudio:0,informe:0,ratificacion:0}),ie=Object(s["ref"])({global:{enviados:0,aceptados:0,porcentaje:0},especialidades:[]}),ne=async e=>{const a={},t={estudio:0,informe:0,ratificacion:0},s=Array.from(new Set(e.map(e=>e.especialidad).filter(Boolean)));let i=[];s.length>0&&(i=await le(Object(l["b"])(p,"especialidades"),"__name__",s));const n={};for(const l of i)n[l.id]=l;for(const l of e){if(!l.especialidad)continue;const e=n[l.especialidad],s=e&&e.nombre?e.nombre:l.especialidad;a[l.especialidad]||(a[l.especialidad]={nombre:s,estudio:0,informe:0,ratificacion:0,total:0}),!l.estudio||!0!==l.estudio.pagadoCliente&&"true"!==l.estudio.pagadoCliente||(a[l.especialidad].estudio++,t.estudio++,a[l.especialidad].total++),!l.informe||!0!==l.informe.pagadoCliente&&"true"!==l.informe.pagadoCliente||(a[l.especialidad].informe++,t.informe++,a[l.especialidad].total++),!l.ratificacion||!0!==l.ratificacion.pagadoCliente&&"true"!==l.ratificacion.pagadoCliente||(a[l.especialidad].ratificacion++,t.ratificacion++,a[l.especialidad].total++)}const o=Object.values(a).filter(e=>e.total>0).sort((e,a)=>a.total-e.total);return{pagosPorEspecialidad:o,pagosPorTipo:t}},oe=async(e,a)=>{const t=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("presupuestoEnviado",">=",e),Object(l["n"])("presupuestoEnviado","<",a)),s=await Object(l["f"])(t),i=s.docs.map(e=>({id:e.id,...e.data()})),n=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("presupuestoAceptado",">=",e),Object(l["n"])("presupuestoAceptado","<",a)),o=await Object(l["f"])(n),c=o.docs.map(e=>({id:e.id,...e.data()})),r=i.length,d=c.length,u=r>0?Math.round(d/r*100):0,m={enviados:r,aceptados:d,porcentaje:u},v={};for(const l of i)l.especialidad&&(v[l.especialidad]||(v[l.especialidad]={enviados:0,aceptados:0}),v[l.especialidad].enviados++);for(const l of c)l.especialidad&&(v[l.especialidad]||(v[l.especialidad]={enviados:0,aceptados:0}),v[l.especialidad].aceptados++);const b=await le(Object(l["b"])(p,"especialidades"),"__name__",Array.from(Object.keys(v))),f={};for(const l of b)f[l.id]=l;const C=[];for(const l in v){const e=f[l],a=e&&e.nombre?e.nombre:l,{enviados:t,aceptados:s}=v[l],i=t>0?Math.round(s/t*100):0;C.push({nombre:a,enviados:t,aceptados:s,porcentaje:i})}return C.sort((e,a)=>a.porcentaje-e.porcentaje),{global:m,especialidades:C}};async function le(e,a,t){const s=30,i=[];for(let n=0;n<t.length;n+=s){const o=t.slice(n,n+s),c=Object(l["k"])(e,Object(l["n"])(a,"in",o)),r=await Object(l["f"])(c);i.push(...r.docs.map(e=>({...e.data(),id:e.id})))}return i}return Object(s["onMounted"])(()=>{w(),V()}),{casosSinAsignar:e,clientesSinPresupuesto:a,usersPerDay:o,usersPerComunity:c,endData:i,endDataComunity:n,clientesLlamar:t,chartOptions:{responsive:!0,maintainAspectRatio:!1},mesActual:m,anioActual:v,selectedTab:C,setTab:K,casosMes:f,cambiarMes:G,casosUltimos6Meses:D,endData6Meses:E,comparativaAnualCasos:P,getLinePoints:M,getPointStyle:$,rankingPeritos:F,rankingComunidades:N,rankingTipoCliente:I,rankingTipoClienteStyle:B,calcularRankingWidth:U,conversionAnualGlobal:L,conversionAnualEspecialidades:T,distribucionComunidades:Z,comunidades:ba,comunidadesOrdenadas:H,distribucionPeritos:X,pieData:ee,pieChartStyle:W,pieEspecialidades:ae,pieEspecialidadesStyle:A,pieColors:x,topDespachos:S,pagosPorEspecialidad:te,pagosPorTipo:se,metricasConversion:ie,mesesCortos:b}}},ha=Ca,ga=(t("c4a2"),Object(h["a"])(ha,ie,ne,!1,null,null,null)),ya=ga.exports,_a=function(){var e=this,a=e._self._c;return a("div",[""!==e.errorMessage?a("b-alert",{staticStyle:{position:"fixed",width:"100%",top:"0px","z-index":"9999"},attrs:{variant:"danger",show:""}},[e._v(e._s(e.errorMessage))]):e._e(),a("Formulario",{attrs:{filters:e.filterFields,formClass:"form-filters mx-5 my-5 py-5",fieldClass:"col-12",btnText:"Login",immediateSubmit:!1},on:{submit:e.handleFiltersSubmit}})],1)},wa=[],Oa=function(){var e=this,a=e._self._c;return a("form",{class:e.formClass,on:{submit:function(a){return a.preventDefault(),e.handleSubmit("search")}}},[a("div",{staticClass:"row"},e._l(e.filters,(function(t,s){return a("div",{key:s,class:e.fieldClass},[a("label",{attrs:{for:t.name}},[e._v(e._s(t.label))]),"input"===t.type?a("b-form-input",{staticClass:"mb-3",attrs:{placeholder:t.placeholder,type:t.typeInput?t.typeInput:"text",value:t.value},on:{input:function(a){return e.handleSubmit("text")}},model:{value:e.formData[t.name].value,callback:function(a){e.$set(e.formData[t.name],"value",a)},expression:"formData[filter.name].value"}}):e._e()],1)})),0),a("div",{staticClass:"row"},[e.btnText?a("p-button",{attrs:{type:"info",round:""},nativeOn:{click:function(a){return a.preventDefault(),e.handleSubmit("btn")}}},[e._v("\n      "+e._s(e.btnText)+"\n    ")]):e._e()],1)])},ja=[],ka={name:"FormComponent",props:{filters:{type:Array,required:!0,validator:e=>e.every(e=>"input"!==e.type||("undefined"===typeof e.value||"string"===typeof e.value||"number"===typeof e.value))},initialData:{type:Object,default:()=>({})},btnText:{type:String,required:!1},formClass:{type:String,default:""},fieldClass:{type:String,default:""},immediateSubmit:{type:Boolean,default:!0}},data(){return{formData:this.initializeFormData()}},methods:{initializeFormData(){const e={};return this.filters.forEach(a=>{"input"===a.type&&(e[a.name]={value:a.value||""})}),e},handleSubmit(e){const a={};Object.keys(this.formData).forEach(e=>{a[e]=this.formData[e].value}),this.immediateSubmit&&"text"===e?this.$emit("submit",a):"btn"!==e&&"search"!==e||(this.$emit("submit",a),"search"===e&&this.$emit("search"))}},watch:{filters:{handler(e){e.forEach(e=>{"input"===e.type&&(this.formData[e.name]?this.formData[e.name].value=e.value||"":this.$set(this.formData,e.name,{value:e.value||""}))})},deep:!0,immediate:!0}},created(){this.formData=this.initializeFormData()}},Aa=ka,xa=(t("42e2"),Object(h["a"])(Aa,Oa,ja,!1,null,"66b1c9c9",null)),Sa=xa.exports,Da={components:{Formulario:Sa},data(){return{mail:"",password:"",errorMessage:"",libraryErrors:["Email inválido","Contraseña incorrecta"],dataForm:{mail:"",password:""},filterFields:[{name:"mail",label:"Usuario",type:"input",typeInput:"text",placeholder:"Usuario"},{name:"password",label:"Contraseña",type:"input",typeInput:"password",placeholder:"Contraseña"}]}},methods:{login(){const e=Object(b["b"])();Object(b["d"])(e,this.dataForm.mail,this.dataForm.password).then(async e=>{this.$router.push("/");const a=Object(l["k"])(Object(l["b"])(p,"especialistas"),Object(l["n"])("correo","==",this.dataForm.mail)),t=await Object(l["f"])(a);t.docs.length>0?localStorage.setItem("userInform",JSON.stringify(t.docs[0].data())):console.error("No se encontroooo"),console.log("Login exitoso:",e.user)}).catch(e=>{console.error("Error en el login:",e.message),e.message.includes("invalid-email")?this.errorMessage=this.libraryErrors[0]:this.errorMessage=this.libraryErrors[1]})},handleFiltersSubmit(e){Object.assign(this.dataForm,e),this.login()}}},Ea=Da,Pa=(t("ccc5"),Object(h["a"])(Ea,_a,wa,!1,null,"6042feae",null)),Fa=Pa.exports,Na=function(){var e=this,a=e._self._c;return a("div",[e.showSuccess?a("b-alert",{staticStyle:{position:"fixed",width:"100%",top:"0px","z-index":"9999"},attrs:{variant:"success",show:""}},[e._v("Cliente borrado correctamente")]):e._e(),a("h2",[e._v("Listado clientes genérico")]),a("Listados",{attrs:{items:e.filteredClientes,fields:e.fields,"current-page":e.currentPage},on:{"page-changed":e.handlePageChange},scopedSlots:e._u([{key:"filters",fn:function(){return[a("Formulario",{attrs:{filters:e.filterFields,formClass:"form-filters",fieldClass:"col-4",initialData:e.filters},on:{submit:e.handleFiltersSubmit,search:e.fetchData}}),a("b-button",{staticClass:"mt-2",attrs:{variant:"primary"},on:{click:e.fetchData}},[e._v("Buscar")])]},proxy:!0},{key:"order",fn:function(){return[a("div",{staticClass:"col-3 pl-0"},[a("label",{attrs:{for:""}},[e._v("Ordenar por:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.order,expression:"order"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.order=a.target.multiple?t:t[0]}}},e._l(e.orderColumnList,(function(t,s){return a("option",{key:s,domProps:{value:t.key}},[e._v(e._s(t.label))])})),0)])]},proxy:!0},{key:"tableActions",fn:function({data:t}){return[e.showAsAdmin?a("b-button",{staticClass:"ml-3",attrs:{size:"sm"},on:{click:function(a){return e.editClient(t.item)}}},[e._v("Editar cliente")]):e._e(),e.showAsAdmin?a("b-button",{staticClass:"ml-3 mt-3",attrs:{size:"sm"},on:{click:function(a){return e.deleteClient(t.item)}}},[e._v("Borrar cliente")]):e._e(),e.showAsAdmin?a("b-button",{staticClass:"ml-3 mt-3",attrs:{size:"sm"},on:{click:function(a){return e.newCase(t.item)}}},[e._v("Agregar caso")]):e._e(),a("b-button",{staticClass:"mt-3 mx-3",attrs:{size:"sm"},on:{click:function(a){e.$router.push(e.navigateToProfile(t.item))}}},[e._v("Ver cliente")])]}}])}),a("b-modal",{attrs:{id:"bv-modal-example","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Ver caso abierto\n    ")]},proxy:!0}]),model:{value:e.modalOpenCase,callback:function(a){e.modalOpenCase=a},expression:"modalOpenCase"}},[a("formulario-confirma-caso",{attrs:{cases:e.cases,case:e.caseToEdit},on:{sendCheckCase:e.recivedCheckCase}})],1),a("b-modal",{attrs:{id:"bv-modal-example","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Editar cliente\n    ")]},proxy:!0}]),model:{value:e.modalShow,callback:function(a){e.modalShow=a},expression:"modalShow"}},[a("formulario-cliente",{attrs:{client:e.clientToEdit},on:{sendForm:e.recivedInfo}})],1),a("b-modal",{attrs:{id:"bv-modal-example","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Agregar caso\n    ")]},proxy:!0}]),model:{value:e.modalCase,callback:function(a){e.modalCase=a},expression:"modalCase"}},[a("formulario-caso",{on:{sendCase:e.recivedCase}})],1),a("b-modal",{attrs:{id:"bv-modal-example","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Borrar cliente\n    ")]},proxy:!0}]),model:{value:e.modalDelete,callback:function(a){e.modalDelete=a},expression:"modalDelete"}},[a("borrar-persona",{attrs:{client:e.clientToDelete},on:{deleteClient:e.deleteUser,cancelDelete:function(a){e.modalDelete=!1}}})],1)],1)},Ia=[],La=function(){var e=this,a=e._self._c;return a("div",[a("form",{on:{submit:function(a){return a.preventDefault(),e.sendInfo.apply(null,arguments)}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("fg-input",{attrs:{type:"text",label:"Nombre",placeholder:"Nombre"},model:{value:e.user.nombre,callback:function(a){e.$set(e.user,"nombre",a)},expression:"user.nombre"}})],1),a("div",{staticClass:"col-md-6"},[a("fg-input",{attrs:{type:"text",label:"Apellidos",placeholder:"Apellidos"},model:{value:e.user.apellidos,callback:function(a){e.$set(e.user,"apellidos",a)},expression:"user.apellidos"}})],1),a("div",{staticClass:"col-md-6"},[a("fg-input",{attrs:{type:"text",label:"Correo",placeholder:"Correo"},model:{value:e.user.correo,callback:function(a){e.$set(e.user,"correo",a)},expression:"user.correo"}})],1),e.client?e._e():a("div",{staticClass:"col-md-6"},[a("fg-input",{attrs:{type:"text",label:"Teléfono",placeholder:"Teléfono"},model:{value:e.user.tel,callback:function(a){e.$set(e.user,"tel",a)},expression:"user.tel"}})],1),a("div",{staticClass:"custom-select-wrapper col-md-6"},[a("label",{attrs:{for:""}},[e._v("Comunidad Autonoma")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.user.comunidad,expression:"user.comunidad"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.user,"comunidad",a.target.multiple?t:t[0])}}},e._l(e.comunidades,(function(t,s){return a("option",{key:s,domProps:{value:s}},[e._v(e._s(t))])})),0)]),a("div",{staticClass:"custom-select-wrapper col-md-6"},[a("label",{attrs:{for:""}},[e._v("Provincias")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.user.provincia,expression:"user.provincia"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.user,"provincia",a.target.multiple?t:t[0])}}},e._l(e.provincias,(function(t,s){return a("option",{key:s,domProps:{value:s}},[e._v(e._s(t))])})),0)]),a("div",{staticClass:"custom-select-wrapper col-md-6 mt-2"},[a("fg-input",{attrs:{type:"text",label:"Población",placeholder:"Población"},model:{value:e.user.poblacion,callback:function(a){e.$set(e.user,"poblacion",a)},expression:"user.poblacion"}})],1),a("div",{staticClass:"custom-select-wrapper col-md-12 mt-2"},[a("label",{staticStyle:{display:"block"}},[e._v("Observaciones (Admin)")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.user.observaciones,expression:"user.observaciones"}],staticStyle:{width:"100%",border:"none","background-color":"#fffcf5",padding:"7px 18px"},attrs:{type:"text",label:"Observaciones",rows:"3"},domProps:{value:e.user.observaciones},on:{input:function(a){a.target.composing||e.$set(e.user,"observaciones",a.target.value)}}})]),a("div",{staticClass:"custom-select-wrapper col-md-6 mt-2"},[a("label",{staticStyle:{display:"block"}},[e._v("Observaciones Especialista")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.user.observacionesEspecialista,expression:"user.observacionesEspecialista"}],staticStyle:{width:"100%",border:"none","background-color":"#fffcf5",padding:"7px 18px"},attrs:{type:"text",label:"Observaciones Especialista",rows:"3"},domProps:{value:e.user.observacionesEspecialista},on:{input:function(a){a.target.composing||e.$set(e.user,"observacionesEspecialista",a.target.value)}}})]),a("div",{staticClass:"custom-select-wrapper col-md-6 mt-2"},[a("label",{staticStyle:{display:"block"}},[e._v("Observaciones Despacho")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.user.observacionesDespacho,expression:"user.observacionesDespacho"}],staticStyle:{width:"100%",border:"none","background-color":"#fffcf5",padding:"7px 18px"},attrs:{type:"text",label:"Observaciones Despacho",rows:"3"},domProps:{value:e.user.observacionesDespacho},on:{input:function(a){a.target.composing||e.$set(e.user,"observacionesDespacho",a.target.value)}}})]),e.client||e.isDespacho?e._e():a("div",{staticClass:"custom-select-wrapper col-md-12 mb-3"},[a("b-form-checkbox",{attrs:{id:"checkbox-1",name:"checkbox-1"},model:{value:e.altaCaso,callback:function(a){e.altaCaso=a},expression:"altaCaso"}},[e._v(" Dar de alta caso ")]),"0"===e.caso.tipoCliente?a("b-form-checkbox",{attrs:{id:"checkbox-2",name:"checkbox-2"},model:{value:e.necesitaAbogado,callback:function(a){e.necesitaAbogado=a},expression:"necesitaAbogado"}},[e._v(" Necesita abogado ")]):e._e()],1),e.altaCaso?a("div",{staticClass:"col-12"},[a("h3",[e._v("Datos del caso ")])]):e._e(),e.altaCaso?a("div",{staticClass:"custom-select-wrapper col-md-6"},[a("label",{attrs:{for:""}},[e._v("Tipo de contacto")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.caso.especialidad,expression:"caso.especialidad"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.caso,"especialidad",a.target.multiple?t:t[0])}}},e._l(e.especialidades,(function(t){return a("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.nombre))])})),0)]):e._e(),e.altaCaso&&!e.isDespacho?a("div",{staticClass:"custom-select-wrapper col-md-6"},[a("label",{attrs:{for:""}},[e._v("Tipo de cliente")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.caso.tipoCliente,expression:"caso.tipoCliente"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.caso,"tipoCliente",a.target.multiple?t:t[0])}}},[a("option",{attrs:{value:"0"}},[e._v("Particular")]),a("option",{attrs:{value:"1"}},[e._v("Despacho")])])]):e._e(),"1"!==e.caso.tipoCliente||e.isDespacho?e._e():a("div",{staticClass:"custom-select-wrapper col-md-6"},[a("label",{attrs:{for:""}},[e._v("Despacho")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.despacho,expression:"despacho"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.despacho=a.target.multiple?t:t[0]}}},e._l(e.despachos,(function(t,s){return a("option",{key:s,domProps:{value:t}},[e._v(e._s(t.nombre))])})),0)]),a("div",{staticClass:"col-12 text-center mt-4 py-2"},[a("p-button",{attrs:{type:"info",round:""},nativeOn:{click:function(a){return a.preventDefault(),e.sendInfo.apply(null,arguments)}}},[e._v("\n          "+e._s(e.client?"Editar cliente":"Dar de alta cliente")+"\n        ")])],1)])])])},Ta=[],Qa={props:{client:{type:Object,require:!1}},setup(e,{emit:a}){const t=Object(s["ref"])(0),i=Object(s["ref"])(0),n=Object(s["ref"])([]),o=Object(s["ref"])(null),c=Object(s["ref"])({nombre:"",apellidos:"",correo:"",tel:"",comunidad:"",provincia:"",poblacion:"",observaciones:"Abogados: \nPlazos: \nHistoria clínica:",observacionesEspecialista:"",observacionesDespacho:"",confirmaCaso:"0"}),r=Object(s["ref"])({}),d=Object(s["computed"])(()=>r.value.despacho),u=Object(s["ref"])({nombreDespacho:"",idDespacho:"",tipoCliente:"",especialidad:"",status:"0",confirmaCaso:"0",necesitaAbogado:"0",statusAbogado:null}),m=Object(s["ref"])([]),v=async()=>{if(m.value=(await Object(l["f"])(Object(l["b"])(p,"especialidades"))).docs.map(e=>({id:e.id,...e.data()})),n.value=(await Object(l["f"])(Object(l["b"])(p,"despachos"))).docs.map(e=>({id:e.id,...e.data()})),n.value.sort((e,a)=>{if("string"===typeof e["nombre"]){if(e["nombre"].toLowerCase()<a["nombre"].toLowerCase())return-1;if(e["nombre"].toLowerCase()>a["nombre"].toLowerCase())return 1}else{if(e["nombre"]<a["nombre"])return-1;if(e["nombre"]>a["nombre"])return 1}return 0}),r.value.despacho){const e=n.value.find(e=>e.nombre===r.value.nombre);console.log(e),console.log(r.value.tipoCliente),t.value=!0,o.value=e,u.value.idDespacho=e.id,u.value.nombreDespacho=e.nombre,u.value.tipoCliente="1"}};Object(s["onMounted"])(()=>{r.value=JSON.parse(localStorage.getItem("userInform")),v()}),e.client&&(c.value={...e.client},c.value.comunidad=ba.findIndex(e=>e===c.value.comunidad),c.value.provincia=fa.findIndex(e=>e===c.value.provincia));const b=()=>{o.value&&(u.value.idDespacho=o.value.id,u.value.nombreDespacho=o.value.nombre),u.value.necesitaAbogado=i.value?"1":"0",u.value.statusAbogado=i.value?"0":null,c.value.nombreLower=c.value.nombre.toLowerCase(),c.value.apellidosLower=c.value.apellidos.toLowerCase(),a("sendForm",{...c.value},{...u.value}),c.value={nombre:"",apellidos:"",correo:"",tel:"",comunidad:"",provincia:"",poblacion:"",observaciones:"Abogados: \nPlazos: \nHistoria clínica:",observacionesEspecialista:"",observacionesDespacho:"",confirmaCaso:"0"},u.value={nombreDespacho:"",idDespacho:"",tipoCliente:"",especialidad:"",status:"0",confirmaCaso:"0",necesitaAbogado:"0",statusAbogado:null}};return{user:c,isDespacho:d,caso:u,comunidades:ba,provincias:fa,altaCaso:t,especialidades:m,necesitaAbogado:i,sendInfo:b,despachos:n,despacho:o}}},Ma=Qa,$a=(t("9426"),Object(h["a"])(Ma,La,Ta,!1,null,null,null)),Ba=$a.exports,Va=function(){var e=this,a=e._self._c;return a("div",[a("form",{on:{submit:function(a){return a.preventDefault(),e.sendInfo.apply(null,arguments)}}},[a("div",{staticClass:"row"},[e._m(0),a("div",{staticClass:"custom-select-wrapper col-md-6"},[a("label",{attrs:{for:""}},[e._v("Tipo de contacto")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.caso.especialidad,expression:"caso.especialidad"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.caso,"especialidad",a.target.multiple?t:t[0])}}},e._l(e.especialidades,(function(t){return a("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.nombre))])})),0)]),a("div",{staticClass:"custom-select-wrapper col-md-6"},[a("label",{attrs:{for:""}},[e._v("Tipo de cliente")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.caso.tipoCliente,expression:"caso.tipoCliente"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.caso,"tipoCliente",a.target.multiple?t:t[0])}}},[a("option",{attrs:{value:"0"}},[e._v("Particular")]),a("option",{attrs:{value:"1"}},[e._v("Despacho")])])]),"1"===e.caso.tipoCliente?a("div",{staticClass:"custom-select-wrapper col-md-6"},[a("fg-input",{attrs:{type:"text",label:"Nombre del despacho",placeholder:"Despacho"}})],1):e._e(),a("div",{staticClass:"custom-select-wrapper col-md-12 mt-4"},[a("label",{attrs:{for:""}},[e._v("Necesita llamada de confirmacion")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.caso.confirmaCaso,expression:"caso.confirmaCaso"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.caso,"confirmaCaso",a.target.multiple?t:t[0])}}},[a("option",{attrs:{value:"0"}},[e._v("SI Necesita segunda llamada")]),a("option",{attrs:{value:"1"}},[e._v("NO Necesita segunda llamada")])])]),a("div",{staticClass:"col-12 text-center mt-4"},[a("p-button",{attrs:{type:"info",round:""},nativeOn:{click:function(a){return a.preventDefault(),e.sendInfo.apply(null,arguments)}}},[e._v("\n          Dar de alta caso\n        ")])],1)])])])},za=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"col-12"},[a("h3",[e._v("Datos del caso ")])])}],Ra={props:{client:{type:Object,require:!1}},setup(e,{emit:a}){const t=Object(s["ref"])({nombreDespacho:"",tipoCliente:"",especialidad:"",status:"0",confirmaCaso:"1"}),i=Object(s["ref"])([]),n=async()=>{i.value=(await Object(l["f"])(Object(l["b"])(p,"especialidades"))).docs.map(e=>({id:e.id,...e.data()}))},o=()=>{a("sendCase",{...t.value})};return Object(s["onMounted"])(()=>{n()}),{caso:t,sendInfo:o,especialidades:i}}},Ja=Ra,qa=(t("125a"),Object(h["a"])(Ja,Va,za,!1,null,null,null)),Ua=qa.exports,Ha=function(){var e=this,a=e._self._c;return a("div",[a("form",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("span",[e._v("¿Estás seguro que deseas eliminar a "+e._s(e.client.apellidos?e.client.nombre+e.client.apellidos:e.client.nombre)+"?")])]),a("div",{staticClass:"col-12 text-center mt-4"},[a("p-button",{attrs:{type:"danger",round:""},nativeOn:{click:function(a){return a.preventDefault(),e.deleteClient.apply(null,arguments)}}},[e._v("\n          Sí, borrar\n        ")]),a("p-button",{staticClass:"ml-3",attrs:{type:"info",round:""},nativeOn:{click:function(a){return a.preventDefault(),e.cancelDelete.apply(null,arguments)}}},[e._v("\n          No, cancelar\n        ")])],1)])])])},Wa=[],Ga={props:{client:{type:Object,require:!1}},setup(e,{emit:a}){const t=()=>{a("cancelDelete")},s=()=>{a("deleteClient")};return{deleteClient:s,cancelDelete:t}}},Ya=Ga,Ka=(t("3b19"),Object(h["a"])(Ya,Ha,Wa,!1,null,null,null)),Za=Ka.exports,Xa=function(){var e=this,a=e._self._c;return a("div",[e.cases.length>0?a("form",{on:{submit:function(a){return a.preventDefault(),e.sendInfo.apply(null,arguments)}}},[a("div",{staticClass:"row"},[e._m(0),a("div",{staticClass:"col-md-12"},[e._v("Cliente: "+e._s(e.cliente.nombre+" "+e.cliente.apellidos))]),a("div",{staticClass:"col-md-12 mt-2"},[e._v("\n      Telefono cliente: "+e._s(e.cliente.tel)+"\n      "),a("a",{staticClass:"mr-3",attrs:{href:"https://wa.me/34"+e.cliente.tel,target:"_blank"}},[e._v("Abrir en WhatsApp")]),a("a",{attrs:{href:"tel:+34"+e.cliente.tel}},[e._v("Llamar")])]),a("div",{staticClass:"col-md-12 mt-2"},[e._v("Correo: "+e._s(e.cliente.correo))]),a("div",{staticClass:"col-md-12 mt-2"},[e._v("Residencia cliente: "+e._s(e.cliente.comunidad+" ("+e.cliente.provincia+")"))]),e.showAsAdmin?a("div",{staticClass:"custom-select-wrapper col-md-12 mt-1"},[a("label",{staticStyle:{display:"block"}},[e._v("Observaciones (Admin)")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.cliente.observaciones,expression:"cliente.observaciones"}],staticStyle:{width:"100%",border:"none","background-color":"#fffcf5",padding:"7px 18px"},attrs:{type:"text",label:"Observaciones"},domProps:{value:e.cliente.observaciones},on:{input:function(a){a.target.composing||e.$set(e.cliente,"observaciones",a.target.value)}}})]):e._e(),e.showAsAdmin||e.isEspecialista?a("div",{staticClass:"custom-select-wrapper col-md-12 mt-1"},[a("label",{staticStyle:{display:"block"}},[e._v("Observaciones Especialista")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.cliente.observacionesEspecialista,expression:"cliente.observacionesEspecialista"}],staticStyle:{width:"100%",border:"none","background-color":"#fffcf5",padding:"7px 18px"},attrs:{type:"text",label:"Observaciones Especialista"},domProps:{value:e.cliente.observacionesEspecialista},on:{input:function(a){a.target.composing||e.$set(e.cliente,"observacionesEspecialista",a.target.value)}}})]):e._e(),e.showAsAdmin||e.isDespachoUser?a("div",{staticClass:"custom-select-wrapper col-md-12 mt-1"},[a("label",{staticStyle:{display:"block"}},[e._v("Observaciones Despacho")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.cliente.observacionesDespacho,expression:"cliente.observacionesDespacho"}],staticStyle:{width:"100%",border:"none","background-color":"#fffcf5",padding:"7px 18px"},attrs:{type:"text",label:"Observaciones Despacho"},domProps:{value:e.cliente.observacionesDespacho},on:{input:function(a){a.target.composing||e.$set(e.cliente,"observacionesDespacho",a.target.value)}}})]):e._e(),a("div",{staticClass:"custom-select-wrapper col-md-6 mt-3"},[a("label",{attrs:{for:""}},[e._v("Tipo de contacto")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.caso.especialidad,expression:"caso.especialidad"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.caso,"especialidad",a.target.multiple?t:t[0])}}},e._l(e.especialidades,(function(t){return a("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.nombre))])})),0)]),a("div",{staticClass:"custom-select-wrapper col-md-6 mt-3"},[a("label",{attrs:{for:""}},[e._v("Tipo de cliente")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.caso.tipoCliente,expression:"caso.tipoCliente"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.caso,"tipoCliente",a.target.multiple?t:t[0])}}},[a("option",{attrs:{value:"0"}},[e._v("Particular")]),a("option",{attrs:{value:"1"}},[e._v("Despacho")])])]),"1"===e.caso.tipoCliente?a("div",{staticClass:"custom-select-wrapper col-md-6"},[a("fg-input",{attrs:{type:"text",label:"Nombre del despacho",placeholder:"Despacho"},model:{value:e.caso.nombreDespacho,callback:function(a){e.$set(e.caso,"nombreDespacho",a)},expression:"caso.nombreDespacho"}})],1):e._e(),a("div",{staticClass:"col-12 text-center mt-4"},[a("p-button",{attrs:{type:"info",round:""},nativeOn:{click:function(a){return a.preventDefault(),e.sendInfo.apply(null,arguments)}}},[e._v("\n          Confirmar caso\n        ")])],1)])]):a("div",[e._v("\n      No hay casos asignados debes agregarle un caso\n  ")])])},et=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"col-12"},[a("h3",[e._v("Datos del caso ")])])}],at={props:{case:{type:Object,require:!1},cases:{type:Array,require:!1},user:{type:Object,require:!1}},setup(e,{emit:a}){const t=Object(s["ref"])(e.case),i=Object(s["ref"])(e.user),n=JSON.parse(localStorage.getItem("userInform")||"{}"),o=Object(s["computed"])(()=>!0===n.admin),c=Object(s["computed"])(()=>!n.despacho&&!n.admin),r=Object(s["computed"])(()=>!0===n.despacho),d=Object(s["ref"])([]),u=async()=>{d.value=(await Object(l["f"])(Object(l["b"])(p,"especialidades"))).docs.map(e=>({id:e.id,...e.data()}))},m=()=>{a("sendCheckCase",{...t.value},{...i.value})};return Object(s["onMounted"])(()=>{u()}),{caso:t,cliente:i,sendInfo:m,especialidades:d,showAsAdmin:o,isEspecialista:c,isDespachoUser:r}}},tt=at,st=(t("7f1a"),Object(h["a"])(tt,Xa,et,!1,null,null,null)),it=st.exports,nt=function(){var e=this,a=e._self._c;return a("div",[e._t("filters"),e._t("order"),e.items.length>0?a("b-pagination",{staticClass:"mt-3",attrs:{"total-rows":e.items.length,"per-page":e.perPage},model:{value:e.currentPage,callback:function(a){e.currentPage=a},expression:"currentPage"}}):e._e(),e.paginatedItems.length>0?a("b-table",{attrs:{items:e.paginatedItems,fields:e.fields,"tbody-tr-class":e.rowClass,striped:"",hover:""},scopedSlots:e._u([{key:"cell(actions)",fn:function(a){return[e._t("tableActions",null,{data:a})]}}],null,!0)}):a("div",[e._v("\n    No hay elementos con el filtro seleccionado\n  ")])],2)},ot=[],lt={props:{items:{type:Array,required:!0},fields:{type:Array,required:!0},perPage:{type:Number,default:10},currentPage:{type:Number,default:1},rowClass:{type:Function,default:null}},setup(e,{emit:a}){const t=Object(s["computed"])({get:()=>e.currentPage,set:e=>{a("page-changed",e)}}),i=Object(s["computed"])(()=>{const a=(e.currentPage-1)*e.perPage,t=a+e.perPage,s=e.items.slice(a,t);return s});return{currentPage:t,paginatedItems:i}}},ct=lt,rt=(t("da79"),Object(h["a"])(ct,nt,ot,!1,null,null,null)),dt=rt.exports;var ut={components:{FormularioCliente:Ba,FormularioCaso:Ua,FormularioConfirmaCaso:it,BorrarPersona:Za,Listados:dt,Formulario:Sa},setup(){const e=Object(s["ref"])([]),a=Object(s["ref"])([]),t=Object(s["ref"])({}),i=Object(s["ref"])({}),n=Object(s["ref"])(!1),o=Object(s["ref"])(!1),c=Object(s["ref"])(null),r=Object(s["ref"])(!1),d=Object(s["ref"])({}),u=Object(s["ref"])(!1),m=Object(s["ref"])(!1),v=Object(s["ref"])({}),b=Object(s["ref"])([]),f=Object(s["ref"])(1),C=JSON.parse(localStorage.getItem("userInform")),h=Object(s["computed"])(()=>!(!C.admin||!0!==C.admin)),g=Object(s["ref"])({searchQuery:"",searchQueryName:"",searchQuerySurname:""}),y=Object(s["ref"])([{name:"searchQuery",label:"Filtrar por teléfono",type:"input",placeholder:"Buscar por teléfono",value:""},{name:"searchQueryName",label:"Filtrar por nombre",type:"input",placeholder:"Buscar por nombre",value:""},{name:"searchQuerySurname",label:"Filtrar por apellidos",type:"input",placeholder:"Buscar por apellidos",value:""}]),_=[{key:"dias",label:"Dias alta"},{key:"nombre",label:"Nombre"},{key:"apellidos",label:"Apellidos"},{key:"correo",label:"Correo"},{key:"tel",label:"Teléfono"},{key:"comunidad",label:"Comunidad"},{key:"poblacion",label:"Población"},{key:"actions",label:"Acciones"}],w=Object(s["ref"])(_[0].key),O=Object(s["computed"])(()=>_.slice(0,-1)),j=async()=>{let a=Object(l["b"])(p,"clientes"),t=[];if(g.value.searchQuery&&t.push(Object(l["n"])("tel",">=",g.value.searchQuery)),g.value.searchQueryName){const e=g.value.searchQueryName.toLowerCase();t.push(Object(l["n"])("nombreLower",">=",e)),t.push(Object(l["n"])("nombreLower","<=",e+""))}if(g.value.searchQuerySurname){const e=g.value.searchQuerySurname.toLowerCase();t.push(Object(l["n"])("apellidosLower",">=",e)),t.push(Object(l["n"])("apellidosLower","<=",e+""))}0===t.length&&t.push(Object(l["j"])("time","desc"),Object(l["h"])(30));const s=await Object(l["f"])(Object(l["k"])(a,...t));e.value=s.docs.map(e=>({id:e.id,...e.data()})),x()},k=e=>{Object.assign(g.value,e),y.value.forEach(a=>{a.value=e[a.name]||""}),M()},A=async()=>{const e=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("confirmaCaso","==","0"),Object(l["n"])("telCliente","==",c.value));b.value=(await Object(l["f"])(e)).docs.map(e=>({id:e.id,...e.data()})),d.value=b.value[0],r.value=!0},x=()=>{a.value=e.value.map(e=>{const a={...e};a.comunidad=ba[a.comunidad],a.provincia=fa[a.provincia],a.id=e.id,a.time=e.time?e.time:1723068e6;const t=new Date(a.time),s=new Date,i=s-t,n=Math.floor(i/864e5);return a.dias=n,a})},S=Object(s["computed"])(()=>{let e=a.value;if(g.value.searchQuery&&(e=e.filter(e=>e.tel.includes(g.value.searchQuery))),g.value.searchQueryName){const a=g.value.searchQueryName.toLowerCase();e=e.filter(e=>{const t=e.nombreLower||(e.nombre?e.nombre.toLowerCase():"");return t.includes(a)})}if(g.value.searchQuerySurname){const a=g.value.searchQuerySurname.toLowerCase();e=e.filter(e=>{const t=e.apellidosLower||(e.apellidos?e.apellidos.toLowerCase():"");return t.includes(a)})}return e.sort((e,a)=>{if("string"===typeof e[w.value]){if(e[w.value].toLowerCase()<a[w.value].toLowerCase())return-1;if(e[w.value].toLowerCase()>a[w.value].toLowerCase())return 1}else{if(e[w.value]<a[w.value])return-1;if(e[w.value]>a[w.value])return 1}return 0})}),D=e=>{t.value=e,n.value=!0},E=async()=>{try{const e=Object(l["d"])(p,"clientes",t.value.id);await Object(l["m"])(e,i.value),j(),n.value=!1}catch(e){console.error("Error al actualizar el cliente:",e)}},P=async()=>{try{const e=Object(l["d"])(p,"clientes",t.value.id);await Object(l["m"])(e,{confirmaCaso:i.value.confirmaCaso}),j(),n.value=!1}catch(e){console.error("Error al actualizar el cliente:",e)}},F=()=>{0===b.value.length&&(t.value.confirmaCaso="1",i.value=t.value,P(),r.value=!1)},N=async e=>{try{if(!e||!e.id)return void console.error("Error: El caso no tiene ID válido",e);const{id:a,...t}=e,s=Object(l["d"])(p,"casos",a),i=await Object(l["e"])(s);if(!i.exists())return void console.error("Error: El documento del caso no existe en Firestore",{id:a,path:s.path});await Object(l["m"])(s,t),await A(),F()}catch(a){console.error("Error al actualizar el caso:",a),console.error("ID del caso:",e&&e.id),console.error("Datos del caso:",e),console.error("Stack trace:",a.stack)}},I=e=>{i.value=e,E()},L=async e=>{e.telCliente=c.value,e.telEspecialista=null,e.status="0",e.time=(new Date).getTime(),"0"===e.confirmaCaso&&(t.value.confirmaCaso="0",i.value=t.value,P());const a=await Object(l["a"])(Object(l["b"])(p,"casos"),e);e.id=a.id,c.value=null,o.value=!1},T=async()=>{try{const e=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("telCliente","==",v.value.tel)),a=await Object(l["f"])(e),t=a.docs.map(e=>Object(l["c"])(Object(l["d"])(p,"casos",e.id)));await Promise.all(t)}catch(e){console.error("Error al eliminar clientes:",e)}},Q=e=>{f.value=parseInt(e),M()},M=()=>{const e={filters:{},order:w.value,currentPage:f.value};y.value.forEach(a=>{e.filters[a.name]=a.value}),localStorage.setItem("listadoClientesState",JSON.stringify(e))},$=()=>{const e=localStorage.getItem("listadoClientesState");if(e){const a=JSON.parse(e);a.filters&&(y.value.forEach(e=>{e.value=a.filters[e.name]||""}),g.value={searchQuery:a.filters.searchQuery||"",searchQueryName:a.filters.searchQueryName||"",searchQuerySurname:a.filters.searchQuerySurname||""},w.value=a.order||_[0].key,a.currentPage&&(f.value=parseInt(a.currentPage))),j()}else j()};Object(s["watch"])(w,()=>{M()}),Object(s["watch"])(g,()=>{M()},{deep:!0}),Object(s["watch"])(f,()=>{M()});const B=e=>(M(),{name:"UserProfile",params:{id:e.id},query:{type:"cliente"}});Object(s["onMounted"])(()=>{$(),window.addEventListener("keyup",V)}),Object(s["onBeforeUnmount"])(()=>{M(),window.removeEventListener("keyup",V)});const V=e=>{"Enter"===e.key&&j()};return{formattedClientes:a,fields:_,filteredClientes:S,editClient:D,modalShow:n,clientToEdit:t,recivedInfo:I,modalDelete:u,recivedCase:L,modalCase:o,modalOpenCase:r,caseToEdit:d,cases:b,clientToDelete:v,showSuccess:m,showAsAdmin:h,deleteClient:e=>{v.value=e,u.value=!0},newCase:e=>{t.value=e,c.value=e.tel,o.value=!0},openCase:e=>{t.value=e,c.value=e.tel,A()},recivedCheckCase:e=>{e.confirmaCaso="1",N(e)},deleteUser:async()=>{T();try{await Object(l["c"])(Object(l["d"])(p,"clientes",v.value.id)),m.value=!0,u.value=!1,j(),setTimeout(()=>{m.value=!1},3e3)}catch(e){console.error("Error al eliminar el documento: ",e)}},filterFields:y,filters:g,handleFiltersSubmit:k,order:w,orderColumnList:O,fetchData:j,navigateToProfile:B,currentPage:f,handlePageChange:Q}}},pt=ut,mt=Object(h["a"])(pt,Na,Ia,!1,null,null,null),vt=mt.exports,bt=function(){var e=this,a=e._self._c;return a("div",[e.showSuccess?a("b-alert",{staticStyle:{position:"fixed",width:"100%",top:"0px","z-index":"9999"},attrs:{variant:"success",show:""}},[e._v("Notificación borrado correctamente")]):e._e(),a("h2",[e._v("Listado notificaciones chats")]),a("Listados",{attrs:{items:e.filteredDespachos,fields:e.fields},scopedSlots:e._u([{key:"tableActions",fn:function({data:t}){return[e.showAsAdmin?a("b-button",{staticClass:"ml-3 mt-3",attrs:{size:"sm"},on:{click:function(a){return e.deleteClient(t.item)}}},[e._v("Borrar notificación")]):e._e(),a("b-button",{staticClass:"mt-3 mx-3",attrs:{size:"sm"},on:{click:function(a){return e.$router.push({name:"UserProfile",params:{id:t.item.userId},query:{type:"cliente"}})}}},[e._v("Ver cliente")])]}}])}),a("b-modal",{attrs:{id:"bv-modal-example","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Ver caso abierto\n    ")]},proxy:!0}]),model:{value:e.modalOpenCase,callback:function(a){e.modalOpenCase=a},expression:"modalOpenCase"}},[a("formulario-confirma-caso",{attrs:{cases:e.cases,case:e.caseToEdit},on:{sendCheckCase:e.recivedCheckCase}})],1),a("b-modal",{attrs:{id:"bv-modal-example","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Editar cliente\n    ")]},proxy:!0}]),model:{value:e.modalShow,callback:function(a){e.modalShow=a},expression:"modalShow"}},[a("formulario-cliente",{attrs:{client:e.clientToEdit},on:{sendForm:e.recivedInfo}})],1),a("b-modal",{attrs:{id:"bv-modal-example","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Agregar caso\n    ")]},proxy:!0}]),model:{value:e.modalCase,callback:function(a){e.modalCase=a},expression:"modalCase"}},[a("formulario-caso",{on:{sendCase:e.recivedCase}})],1),a("b-modal",{attrs:{id:"bv-modal-example","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Borrar cliente\n    ")]},proxy:!0}]),model:{value:e.modalDelete,callback:function(a){e.modalDelete=a},expression:"modalDelete"}},[a("span",[e._v("\n      Seguro que deseas borrar esta notificacion\n    ")]),a("p-button",{staticClass:"ml-3",attrs:{type:"info",round:""},nativeOn:{click:function(a){return a.preventDefault(),e.deleteUser.apply(null,arguments)}}},[e._v("\n          Si\n  ")]),a("p-button",{staticClass:"ml-3",attrs:{type:"info",round:""},nativeOn:{click:function(a){a.preventDefault(),e.modalDelete=!1}}},[e._v("\n          Cancelar\n  ")])],1)],1)},ft=[],Ct={components:{FormularioCliente:Ba,FormularioCaso:Ua,FormularioConfirmaCaso:it,BorrarPersona:Za,Listados:dt,Formulario:Sa},setup(){const e=Object(s["ref"])([]),a=Object(s["ref"])({}),t=Object(s["ref"])({}),i=Object(s["ref"])(!1),n=Object(s["ref"])(!1),o=Object(s["ref"])(null),c=Object(s["ref"])(!1),r=Object(s["ref"])({}),d=Object(s["ref"])(!1),u=Object(s["ref"])(!1),m=Object(s["ref"])({}),v=Object(s["ref"])([]),b=JSON.parse(localStorage.getItem("userInform")),f=Object(s["computed"])(()=>!(!b.admin||!0!==b.admin)),C=Object(s["ref"])({searchQuery:"",searchQueryName:"",searchQuerySurname:""}),h=[{name:"searchQuery",label:"Filtrar por teléfono",type:"input",placeholder:"Buscar por teléfono"},{name:"searchQueryName",label:"Filtrar por nombre",type:"input",placeholder:"Buscar por nombre"}],g=[{key:"userName",label:"Nombre del perfil"},{key:"userEspe",label:"Teléfono del especialista"},{key:"userWrite",label:"Teléfono que escribio"},{key:"actions",label:"Acciones"}],y=Object(s["ref"])(g[0].key),_=Object(s["computed"])(()=>g.slice(0,-1)),w=async()=>{const a=Object(l["k"])(Object(l["b"])(p,"notificacionesChat"),Object(l["n"])("userTo","==",b.tel)),t=await Object(l["f"])(a);e.value=t.docs.map(e=>({id:e.id,...e.data()})),console.log(e.value)},O=async()=>{const e=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("confirmaCaso","==","0"),Object(l["n"])("telCliente","==",o.value));v.value=(await Object(l["f"])(e)).docs.map(e=>({id:e.id,...e.data()})),r.value=v.value[0],c.value=!0},j=e=>{Object.assign(C.value,e)},k=Object(s["computed"])(()=>{let a=e.value;return C.value.searchQuery&&(a=a.filter(e=>e.tel.includes(C.value.searchQuery))),C.value.searchQueryName&&(a=a.filter(e=>e.nombre.toLowerCase().includes(C.value.searchQueryName.toLowerCase()))),C.value.searchQuerySurname&&(a=a.filter(e=>e.apellidos.toLowerCase().includes(C.value.searchQuerySurname.toLowerCase()))),a.sort((e,a)=>{if("string"===typeof e[y.value]){if(e[y.value].toLowerCase()<a[y.value].toLowerCase())return-1;if(e[y.value].toLowerCase()>a[y.value].toLowerCase())return 1}else{if(e[y.value]<a[y.value])return-1;if(e[y.value]>a[y.value])return 1}return 0})}),A=e=>{a.value=e,i.value=!0},x=async()=>{try{const e=Object(l["d"])(p,"clientes",a.value.id);await Object(l["m"])(e,t.value),w(),i.value=!1}catch(e){console.error("Error al actualizar el cliente:",e)}},S=async()=>{try{const e=Object(l["d"])(p,"clientes",a.value.id);await Object(l["m"])(e,{confirmaCaso:t.value.confirmaCaso}),w(),i.value=!1}catch(e){console.error("Error al actualizar el cliente:",e)}},D=()=>{0===v.value.length&&(a.value.confirmaCaso="1",t.value=a.value,S(),c.value=!1)},E=async e=>{try{const a=Object(l["d"])(p,"casos",e.id);await Object(l["m"])(a,e),await O(),D()}catch(a){console.error("Error al actualizar el cliente:",a)}},P=e=>{t.value=e,x()},F=async e=>{e.telCliente=o.value,e.telEspecialista=null,e.status="0",e.time=(new Date).getTime(),"0"===e.confirmaCaso&&(a.value.confirmaCaso="0",t.value=a.value,S()),await Object(l["a"])(Object(l["b"])(p,"casos"),e),o.value=null,n.value=!1},N=async()=>{try{const e=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("telCliente","==",m.value.tel)),a=await Object(l["f"])(e),t=a.docs.map(e=>Object(l["c"])(Object(l["d"])(p,"casos",e.id)));await Promise.all(t),console.log("Clientes eliminados exitosamente.")}catch(e){console.error("Error al eliminar clientes:",e)}};return Object(s["onMounted"])(()=>{w()}),{fields:g,filteredDespachos:k,editClient:A,modalShow:i,clientToEdit:a,recivedInfo:P,modalDelete:d,recivedCase:F,modalCase:n,modalOpenCase:c,caseToEdit:r,cases:v,clientToDelete:m,showSuccess:u,showAsAdmin:f,deleteClient:e=>{m.value=e,d.value=!0},newCase:e=>{a.value=e,o.value=e.tel,n.value=!0},openCase:e=>{a.value=e,o.value=e.tel,O()},recivedCheckCase:e=>{e.confirmaCaso="1",E(e)},deleteUser:async()=>{N();try{await Object(l["c"])(Object(l["d"])(p,"notificacionesChat",m.value.id)),u.value=!0,d.value=!1,w(),setTimeout(()=>{u.value=!1},3e3)}catch(e){console.error("Error al eliminar el documento: ",e)}},filterFields:h,handleFiltersSubmit:j,order:y,orderColumnList:_}}},ht=Ct,gt=Object(h["a"])(ht,bt,ft,!1,null,null,null),yt=gt.exports,_t=function(){var e=this,a=e._self._c;return a("div",[a("h2",[e._v("Lista de Usuarios")]),a("ul",e._l(e.users,(function(t){return a("li",{key:t.id,staticClass:"mt-2"},[e._v("\n      "+e._s(t.email)+" - Última conexión: "+e._s(t.lastLogin.split("T")[0]+" - "+t.lastLogin.split("T")[1].replace("Z",""))+"\n    ")])})),0)])},wt=[],Ot={setup(){const e=Object(s["ref"])([]),a=Object(l["g"])(),t=async()=>{const t=await Object(l["f"])(Object(l["b"])(a,"users"));e.value=t.docs.map(e=>({id:e.id,...e.data()}))};return Object(s["onMounted"])(t),{users:e}}},jt=Ot,kt=Object(h["a"])(jt,_t,wt,!1,null,null,null),At=kt.exports,xt=function(){var e=this,a=e._self._c;return a("div",[e.showSuccess?a("b-alert",{staticStyle:{position:"fixed",width:"100%",top:"0px","z-index":"9999"},attrs:{variant:"success",show:""}},[e._v("Caso borrado correctamente")]):e._e(),a("h2",[e._v("Listado clientes por llamar")]),a("Listados",{attrs:{items:e.filteredClientes,fields:e.fields,"current-page":e.currentPage},on:{"page-changed":e.handlePageChange},scopedSlots:e._u([{key:"filters",fn:function(){return[a("Formulario",{attrs:{filters:e.filterFields,formClass:"form-filters",fieldClass:"col-4"},on:{submit:e.handleFiltersSubmit}})]},proxy:!0},{key:"tableActions",fn:function({data:t}){return[a("b-button",{staticClass:"mx-3",attrs:{size:"sm"},on:{click:function(a){return e.openCase(t.item)}}},[e._v("Ver caso abierto")]),a("b-button",{staticClass:"my-3 mx-3",attrs:{size:"sm"},on:{click:function(a){return e.setDeleteCase(t.item)}}},[e._v("Borrar caso")])]}}])}),a("b-modal",{attrs:{id:"bv-modal-example","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Ver caso abierto\n    ")]},proxy:!0}]),model:{value:e.modalOpenCase,callback:function(a){e.modalOpenCase=a},expression:"modalOpenCase"}},[a("formulario-confirma-caso",{attrs:{cases:e.cases,case:e.caseToEdit,user:e.clientToEdit},on:{sendCheckCase:e.recivedCheckCase}})],1),a("b-modal",{attrs:{id:"bv-modal-example","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Borrar caso\n    ")]},proxy:!0}]),model:{value:e.modalDelete,callback:function(a){e.modalDelete=a},expression:"modalDelete"}},[a("borrar-caso",{on:{deleteClient:e.deleteCase,cancelDelete:function(a){e.modalDelete=!1}}})],1)],1)},St=[],Dt=function(){var e=this,a=e._self._c;return a("div",[a("form",[a("div",{staticClass:"row"},[e._m(0),a("div",{staticClass:"col-12 text-center mt-4"},[a("p-button",{attrs:{type:"danger",round:""},nativeOn:{click:function(a){return a.preventDefault(),e.deleteClient.apply(null,arguments)}}},[e._v("\n          Sí, borrar\n        ")]),a("p-button",{staticClass:"ml-3",attrs:{type:"info",round:""},nativeOn:{click:function(a){return a.preventDefault(),e.cancelDelete.apply(null,arguments)}}},[e._v("\n          No, cancelar\n        ")])],1)])])])},Et=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"col-12"},[a("span",[e._v("¿Estás seguro que deseas eliminar el caso?")])])}],Pt={setup(e,{emit:a}){const t=()=>{a("cancelDelete")},s=()=>{a("deleteClient")};return{deleteClient:s,cancelDelete:t}}},Ft=Pt,Nt=(t("0c2f"),Object(h["a"])(Ft,Dt,Et,!1,null,null,null)),It=Nt.exports,Lt={components:{FormularioConfirmaCaso:it,BorrarCaso:It,Listados:dt,Formulario:Sa},setup(){const e=Object(s["ref"])(1),a=Object(s["ref"])([]),t=Object(s["ref"])([]),i=Object(s["ref"])({}),n=Object(s["ref"])({}),o=Object(s["ref"])(!1),c=Object(s["ref"])(!1),r=Object(s["ref"])(null),d=Object(s["ref"])(!1),u=Object(s["ref"])({}),m=Object(s["ref"])(!1),v=Object(s["ref"])(!1),b=Object(s["ref"])({}),f=Object(s["ref"])([]),C=Object(s["computed"])(()=>JSON.parse(localStorage.getItem("userInform"))),h=Object(s["ref"])({searchQuery:"",searchQueryName:"",searchQuerySurname:""}),g=[{key:"dias",label:"Dias sin llamar"},{key:"nombre",label:"Nombre"},{key:"nombreEspe",label:"Especialidad"},{key:"apellidos",label:"Apellidos"},{key:"provincia",label:"Provincia"},{key:"correo",label:"Correo"},{key:"tel",label:"Teléfono"},{key:"comunidad",label:"Comunidad"},{key:"poblacion",label:"Población"},{key:"actions",label:"Acciones"}],y=[{name:"searchQuery",label:"Filtrar por teléfono",type:"input",placeholder:"Buscar por teléfono"},{name:"searchQueryName",label:"Filtrar por nombre",type:"input",placeholder:"Buscar por nombre"},{name:"searchQuerySurname",label:"Filtrar por apellidos",type:"input",placeholder:"Buscar por apellidos"}],_=async()=>{a.value=(await Object(l["f"])(Object(l["b"])(p,"clientes"))).docs.map(e=>({id:e.id,...e.data()})),O()},w=async e=>{const a=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("confirmaCaso","==","0"),Object(l["n"])("telCliente","==",r.value),Object(l["n"])("telEspecialista","==",null));f.value=(await Object(l["f"])(a)).docs.map(e=>({id:e.id,...e.data()})),u.value=f.value.length>0?f.value[0]:void 0,"delete"!==e&&(d.value=!0)},O=()=>{t.value=a.value.map(e=>{const a={...e};a.comunidad=ba[a.comunidad],a.provincia=fa[a.provincia],a.id=e.id,a.time=e.time?e.time:1723068e6;const t=new Date(a.time),s=new Date,i=s-t,n=Math.floor(i/864e5);return a.dias=n,a})},j=Object(s["ref"])([]),k=async()=>{let e=[];if("negligencias@informesmedicospericiales.com"!==C.value.correo&&"elenteje@hotmail.com"!==C.value.correo)e=t.value.filter((function(e){if(e.confirmaCaso)return e.confirmaCaso.includes("0")})),console.log("llegoooo",e);else if("negligencias@informesmedicospericiales.com"===C.value.correo){const a=await Promise.all(t.value.map(async e=>{if(e.confirmaCaso&&e.confirmaCaso.includes("0")){const a=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("confirmaCaso","==","0"),Object(l["n"])("telCliente","==",e.tel),Object(l["n"])("especialidad","==","8t9rn2kRiHRANdZ7M8zG"),Object(l["n"])("telEspecialista","==",null)),t=await Object(l["f"])(a).then(e=>e.docs.map(e=>({id:e.id,...e.data()})));if(t.length>0)return e}return null}));e=a.filter(e=>null!==e)}else if("elenteje@hotmail.com"===C.value.correo){const a=await Promise.all(t.value.map(async e=>{if(e.confirmaCaso&&e.confirmaCaso.includes("0")){const a=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("confirmaCaso","==","0"),Object(l["n"])("telCliente","==",e.tel),Object(l["n"])("telEspecialista","==",null)),t=await Object(l["f"])(a).then(e=>e.docs.map(e=>({id:e.id,...e.data()})).filter(e=>"8t9rn2kRiHRANdZ7M8zG"!==e.especialidad));if(t.length>0)return e}return null}));e=a.filter(e=>null!==e)}return h.value.searchQuery?e=e.filter(e=>e.tel.includes(h.value.searchQuery)):h.value.searchQueryName?e=e.filter(e=>e.confirmaCaso.includes("0")&&e.nombre.toLowerCase().includes(h.value.searchQueryName.toLowerCase())):h.value.searchQuerySurname&&(e=e.filter(e=>e.confirmaCaso.includes("0")&&e.apellidos.toLowerCase().includes(h.value.searchQuerySurname.toLowerCase()))),e.sort((e,a)=>parseFloat(a.time)-parseFloat(e.time))};Object(s["watchEffect"])(async()=>{j.value=await k()});const A=e=>{i.value=e,o.value=!0},x=async()=>{try{const e=Object(l["d"])(p,"clientes",i.value.id);await Object(l["m"])(e,n.value),_(),o.value=!1}catch(e){console.error("Error al actualizar el cliente:",e)}},S=async()=>{try{const e=Object(l["d"])(p,"clientes",i.value.id);await Object(l["m"])(e,{confirmaCaso:n.value.confirmaCaso}),_(),o.value=!1}catch(e){console.error("Error al actualizar el cliente:",e)}},D=()=>{0===f.value.length&&(i.value.confirmaCaso="1",n.value=i.value,S(),d.value=!1)},E=async(e,a)=>{try{const t=Object(l["d"])(p,"casos",e.id);await Object(l["m"])(t,e),a.comunidad=ba.findIndex(e=>e===a.comunidad),a.provincia=fa.findIndex(e=>e===a.provincia);const s=Object(l["d"])(p,"clientes",a.id);await Object(l["m"])(s,a),await w(),D(),d.value=!1}catch(t){console.error("Error al actualizar el cliente:",t)}},P=e=>{n.value=e,x()},F=async e=>{e.telCliente=r.value,e.telEspecialista=null,e.status="0","0"===e.confirmaCaso&&(i.value.confirmaCaso="0",n.value=i.value,S()),await Object(l["a"])(Object(l["b"])(p,"casos"),e),r.value=null,c.value=!1},N=async()=>{const e=Object(l["d"])(p,"clientes",i.value.id);await Object(l["m"])(e,{confirmaCaso:"1"})};Object(s["onMounted"])(()=>{_()});const I=e=>{Object.assign(h.value,e)},L=a=>{e.value=parseInt(a)};return{handlePageChange:L,currentPage:e,formattedClientes:t,fields:g,filteredClientes:j,editClient:A,modalShow:o,clientToEdit:i,recivedInfo:P,modalDelete:m,recivedCase:F,modalCase:c,modalOpenCase:d,caseToEdit:u,cases:f,clientToDelete:b,showSuccess:v,filterFields:y,handleFiltersSubmit:I,openCase:e=>{console.log(e),i.value=e,r.value=e.tel,w()},recivedCheckCase:(e,a)=>{e.confirmaCaso="1",E(e,a)},deleteCase:async()=>{try{console.log("Recibo undefined",u.value),u.value&&await Object(l["c"])(Object(l["d"])(p,"casos",u.value.id)),N(),v.value=!0,m.value=!1,_(),setTimeout(()=>{v.value=!1},3e3)}catch(e){console.error("Error al eliminar el documento: ",e)}},setDeleteCase:e=>{i.value=e,r.value=e.tel,w("delete"),m.value=!0}}}},Tt=Lt,Qt=Object(h["a"])(Tt,xt,St,!1,null,null,null),Mt=Qt.exports,$t=function(){var e=this,a=e._self._c;return a("div",[e.showSuccess?a("b-alert",{staticStyle:{position:"fixed",width:"100%",top:"0px","z-index":"9999"},attrs:{variant:"success",show:""}},[e._v("Especialista borrado correctamente")]):e._e(),a("Listados",{attrs:{items:e.filteredClientes,fields:e.fields,"current-page":e.currentPage},on:{"page-changed":e.handlePageChange},scopedSlots:e._u([{key:"order",fn:function(){return[a("div",{staticClass:"col-3 pl-0"},[a("label",{attrs:{for:""}},[e._v("Ordenar por:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.order,expression:"order"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.order=a.target.multiple?t:t[0]}}},e._l(e.orderColumnList,(function(t,s){return a("option",{key:s,domProps:{value:t.key}},[e._v(e._s(t.label))])})),0)])]},proxy:!0},{key:"filters",fn:function(){return[a("Formulario",{attrs:{filters:e.filterFields,formClass:"form-filters",fieldClass:"col-4"},on:{submit:e.handleFiltersSubmit}})]},proxy:!0},{key:"tableActions",fn:function({data:t}){return[a("b-button",{staticClass:"ml-3",attrs:{size:"sm"},on:{click:function(a){return e.editEspe(t.item)}}},[e._v("Editar especialista")]),a("b-button",{staticClass:"ml-3 mt-3",attrs:{size:"sm"},on:{click:function(a){return e.deleteEspe(t.item)}}},[e._v("Borrar especialista")]),a("b-button",{staticClass:"my-3 mx-3",attrs:{size:"sm"},on:{click:function(a){return e.$router.push({name:"UserProfile",params:{id:t.item.id},query:{type:"especialista"}})}}},[e._v("Ver especialista")])]}}])}),a("b-modal",{attrs:{id:"bv-modal-example","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Borrar especialista\n    ")]},proxy:!0}]),model:{value:e.modalDelete,callback:function(a){e.modalDelete=a},expression:"modalDelete"}},[a("borrar-persona",{attrs:{client:e.espeToDelete},on:{deleteClient:e.deleteUser,cancelDelete:function(a){e.modalDelete=!1}}})],1),a("b-modal",{attrs:{id:"bv-modal-example","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Editar especialista\n    ")]},proxy:!0}]),model:{value:e.modalEdit,callback:function(a){e.modalEdit=a},expression:"modalEdit"}},[a("formulario-especialista",{attrs:{client:e.espeToEdit},on:{sendForm:e.recivedInfo}})],1)],1)},Bt=[],Vt=function(){var e=this,a=e._self._c;return a("div",[a("form",{on:{submit:function(a){return a.preventDefault(),e.sendInfo.apply(null,arguments)}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("fg-input",{attrs:{type:"text",label:"Nombre",placeholder:"Nombre"},model:{value:e.user.nombre,callback:function(a){e.$set(e.user,"nombre",a)},expression:"user.nombre"}})],1),a("div",{staticClass:"col-md-6"},[a("fg-input",{attrs:{type:"text",label:"Apellidos",placeholder:"Apellidos"},model:{value:e.user.apellidos,callback:function(a){e.$set(e.user,"apellidos",a)},expression:"user.apellidos"}})],1),a("div",{staticClass:"col-md-6"},[a("fg-input",{attrs:{type:"text",label:"Correo",placeholder:"Correo"},model:{value:e.user.correo,callback:function(a){e.$set(e.user,"correo",a)},expression:"user.correo"}})],1),e.client?e._e():a("div",{staticClass:"col-md-6"},[a("fg-input",{attrs:{type:"text",label:"Teléfono",placeholder:"Teléfono"},model:{value:e.user.tel,callback:function(a){e.$set(e.user,"tel",a)},expression:"user.tel"}})],1),a("div",{staticClass:"custom-select-wrapper col-md-6"},[a("label",{attrs:{for:""}},[e._v("Comunidad Autonoma")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.user.comunidad,expression:"user.comunidad"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.user,"comunidad",a.target.multiple?t:t[0])}}},e._l(e.comunidades,(function(t,s){return a("option",{key:s,domProps:{value:s}},[e._v(e._s(t))])})),0)]),a("div",{staticClass:"custom-select-wrapper col-md-6"},[a("label",{attrs:{for:""}},[e._v("Provincias")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.user.provincia,expression:"user.provincia"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.user,"provincia",a.target.multiple?t:t[0])}}},e._l(e.provincias,(function(t,s){return a("option",{key:s,domProps:{value:s}},[e._v(e._s(t))])})),0)]),a("div",{staticClass:"custom-select-wrapper col-md-6 mt-2"},[a("fg-input",{attrs:{type:"text",label:"Población",placeholder:"Población"},model:{value:e.user.poblacion,callback:function(a){e.$set(e.user,"poblacion",a)},expression:"user.poblacion"}})],1),a("div",{staticClass:"custom-select-wrapper col-md-12"},[a("label",{attrs:{for:""}},[e._v("Tipo de especialidad")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.user.especialidades,expression:"user.especialidades"}],staticClass:"custom-select",staticStyle:{"min-height":"100px"},attrs:{multiple:""},on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.user,"especialidades",a.target.multiple?t:t[0])}}},e._l(e.especialidades,(function(t){return a("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.nombre))])})),0)]),a("div",{staticClass:"col-md-12 mt-4"},[a("fg-input",{attrs:{type:"text",label:"Especialidad",placeholder:"Especialidad"},model:{value:e.user.especialista,callback:function(a){e.$set(e.user,"especialista",a)},expression:"user.especialista"}})],1),a("div",{staticClass:"col-12 text-center mt-4"},[a("p-button",{attrs:{type:"info",round:""},nativeOn:{click:function(a){return a.preventDefault(),e.sendInfo.apply(null,arguments)}}},[e._v("\n          "+e._s(e.client?"Editar especialista":"Dar de alta especialista")+"\n        ")])],1)])])])},zt=[],Rt={props:{client:{type:Object,require:!1}},setup(e,{emit:a}){const t=Object(s["ref"])(0),i=Object(s["ref"])({nombre:"",apellidos:"",correo:"",tel:"",comunidad:"",provincia:"",poblacion:"",observaciones:"",confirmaCaso:"0"}),n=Object(s["ref"])({nombreDespacho:"",tipoCliente:"",especialidad:"",status:"0",confirmaCaso:"0"}),o=Object(s["ref"])([]),c=async()=>{o.value=(await Object(l["f"])(Object(l["b"])(p,"especialidades"))).docs.map(e=>({id:e.id,...e.data()}))};Object(s["onMounted"])(()=>{c()}),e.client&&(i.value={...e.client},i.value.comunidad=ba.findIndex(e=>e===i.value.comunidad),i.value.provincia=fa.findIndex(e=>e===i.value.provincia));const r=()=>{a("sendForm",{...i.value},{...n.value})};return{user:i,caso:n,comunidades:ba,provincias:fa,altaCaso:t,especialidades:o,sendInfo:r}}},Jt=Rt,qt=(t("7354"),Object(h["a"])(Jt,Vt,zt,!1,null,null,null)),Ut=qt.exports,Ht={components:{BorrarPersona:Za,FormularioEspecialista:Ut,Listados:dt,Formulario:Sa},setup(){const e=Object(s["ref"])([]),a=Object(s["ref"])([]),t=Object(s["ref"])({}),i=Object(s["ref"])(!1),n=Object(s["ref"])(!1),o=Object(s["ref"])(!1),c=Object(s["ref"])({}),r=Object(s["ref"])({}),d=Object(s["ref"])(1),u=[{key:"nombre",label:"Nombre"},{key:"apellidos",label:"Apellidos"},{key:"provincia",label:"Provincia"},{key:"correo",label:"Correo"},{key:"tel",label:"Teléfono"},{key:"comunidad",label:"Comunidad"},{key:"poblacion",label:"Población"},{key:"actions",label:"Acciones"}],m=Object(s["ref"])({searchQuery:"",searchQueryName:"",searchQuerySurname:""}),v=[{name:"searchQuery",label:"Filtrar por teléfono",type:"input",placeholder:"Buscar por teléfono"},{name:"searchQueryName",label:"Filtrar por nombre",type:"input",placeholder:"Buscar por nombre"},{name:"searchQuerySurname",label:"Filtrar por apellidos",type:"input",placeholder:"Buscar por apellidos"}],b=Object(s["ref"])(u[0].key),f=Object(s["computed"])(()=>u.slice(0,-1)),C=async()=>{e.value=(await Object(l["f"])(Object(l["b"])(p,"especialistas"))).docs.map(e=>({id:e.id,...e.data()})),g()},h=async()=>{try{const e=Object(l["d"])(p,"especialistas",c.value.id);await Object(l["m"])(e,r.value),C(),n.value=!1}catch(e){console.error("Error al actualizar el cliente:",e)}},g=()=>{a.value=e.value.map(e=>{const a={...e};return a.comunidad=ba[a.comunidad],a.provincia=fa[a.provincia],a})},y=Object(s["computed"])(()=>{let e=[];return m.value.searchQuery||m.value.searchQueryName||m.value.searchQuerySurname?(m.value.searchQuery?e=a.value.filter(e=>e.tel.toLowerCase().includes(m.value.searchQuery.toLowerCase())):m.value.searchQueryName?e=a.value.filter(e=>e.nombre.toLowerCase().includes(m.value.searchQueryName.toLowerCase())):m.value.searchQuerySurname&&(e=a.value.filter(e=>e.apellidos.toLowerCase().includes(m.value.searchQuerySurname.toLowerCase()))),e.sort((e,a)=>{if("string"===typeof e[b.value]){if(e[b.value].toLowerCase()<a[b.value].toLowerCase())return-1;if(e[b.value].toLowerCase()>a[b.value].toLowerCase())return 1}else{if(e[b.value]<a[b.value])return-1;if(e[b.value]>a[b.value])return 1}return 0})):(e=a.value,e.sort((e,a)=>{if("string"===typeof e[b.value]){if(e[b.value].toLowerCase()<a[b.value].toLowerCase())return-1;if(e[b.value].toLowerCase()>a[b.value].toLowerCase())return 1}else{if(e[b.value]<a[b.value])return-1;if(e[b.value]>a[b.value])return 1}return 0}))}),_=e=>{r.value=e,h()},w=()=>{const e={filters:{},order:b.value,currentPage:d.value};v.value.forEach(a=>{e.filters[a.name]=a.value}),localStorage.setItem("listadoEspecialistasState",JSON.stringify(e))},O=e=>{d.value=parseInt(e),w()};Object(s["onMounted"])(()=>{C()});const j=e=>{Object.assign(m.value,e)};return{fields:u,filterFields:v,handleFiltersSubmit:j,formattedClientes:a,filteredClientes:y,modalDelete:i,espeToDelete:t,showSuccess:o,modalEdit:n,espeToEdit:c,order:b,orderColumnList:f,recivedInfo:_,currentPage:d,handlePageChange:O,deleteEspe:e=>{t.value=e,i.value=!0},editEspe:e=>{c.value=e,n.value=!0},deleteUser:async()=>{try{await Object(l["c"])(Object(l["d"])(p,"especialistas",t.value.id)),o.value=!0,i.value=!1,C(),setTimeout(()=>{o.value=!1},3e3)}catch(e){console.error("Error al eliminar el documento: ",e)}}}}},Wt=Ht,Gt=Object(h["a"])(Wt,$t,Bt,!1,null,null,null),Yt=Gt.exports,Kt=function(){var e=this,a=e._self._c;return a("div",[e.showSuccess?a("b-alert",{staticStyle:{position:"fixed",width:"100%",top:"0px","z-index":"9999"},attrs:{variant:"success",show:""}},[e._v("Despacho borrado correctamente")]):e._e(),a("h2",[e._v("Listado despachos")]),a("Listados",{attrs:{items:e.filteredDespachos,fields:e.fields,"current-page":e.currentPage},on:{"page-changed":e.handlePageChange},scopedSlots:e._u([{key:"filters",fn:function(){return[a("Formulario",{attrs:{filters:e.filterFields,formClass:"form-filters",fieldClass:"col-4"},on:{submit:e.handleFiltersSubmit}})]},proxy:!0},{key:"tableActions",fn:function({data:t}){return[e.showAsAdmin?a("b-button",{staticClass:"ml-3",attrs:{size:"sm"},on:{click:function(a){return e.editClient(t.item)}}},[e._v("Editar despacho")]):e._e(),e.showAsAdmin?a("b-button",{staticClass:"ml-3",attrs:{size:"sm"},on:{click:function(a){return e.deleteClient(t.item)}}},[e._v("Borrar despacho")]):e._e(),a("b-button",{staticClass:"mx-3",attrs:{size:"sm"},on:{click:function(a){return e.$router.push({name:"UserProfile",params:{id:t.item.id},query:{type:"despacho"}})}}},[e._v("Ver despacho")])]}}])}),a("b-modal",{attrs:{id:"bv-modal-example","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Editar Despacho\n    ")]},proxy:!0}]),model:{value:e.modalShow,callback:function(a){e.modalShow=a},expression:"modalShow"}},[a("formulario-despacho",{attrs:{client:e.clientToEdit},on:{sendForm:e.recivedInfo}})],1),a("b-modal",{attrs:{id:"bv-modal-example","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Borrar despacho\n    ")]},proxy:!0}]),model:{value:e.modalDelete,callback:function(a){e.modalDelete=a},expression:"modalDelete"}},[a("borrar-persona",{attrs:{client:e.clientToDelete},on:{deleteClient:e.deleteUser,cancelDelete:function(a){e.modalDelete=!1}}})],1)],1)},Zt=[],Xt=function(){var e=this,a=e._self._c;return a("div",[a("form",{on:{submit:function(a){return a.preventDefault(),e.sendInfo.apply(null,arguments)}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("fg-input",{attrs:{type:"text",label:"Nombre",placeholder:"Nombre"},model:{value:e.user.nombre,callback:function(a){e.$set(e.user,"nombre",a)},expression:"user.nombre"}})],1),a("div",{staticClass:"col-md-6"},[a("fg-input",{attrs:{type:"text",label:"Correo",placeholder:"Correo"},model:{value:e.user.correo,callback:function(a){e.$set(e.user,"correo",a)},expression:"user.correo"}})],1),e.client?e._e():a("div",{staticClass:"col-md-6"},[a("fg-input",{attrs:{type:"text",label:"Teléfono",placeholder:"Teléfono"},model:{value:e.user.tel,callback:function(a){e.$set(e.user,"tel",a)},expression:"user.tel"}})],1),a("div",{staticClass:"custom-select-wrapper col-md-6"},[a("label",{attrs:{for:""}},[e._v("Comunidad Autonoma")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.user.comunidad,expression:"user.comunidad"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.user,"comunidad",a.target.multiple?t:t[0])}}},e._l(e.comunidades,(function(t,s){return a("option",{key:s,domProps:{value:s}},[e._v(e._s(t))])})),0)]),a("div",{staticClass:"custom-select-wrapper col-md-6"},[a("label",{attrs:{for:""}},[e._v("Provincias")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.user.provincia,expression:"user.provincia"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.user,"provincia",a.target.multiple?t:t[0])}}},e._l(e.provincias,(function(t,s){return a("option",{key:s,domProps:{value:s}},[e._v(e._s(t))])})),0)]),a("div",{staticClass:"custom-select-wrapper col-md-6 mt-2"},[a("fg-input",{attrs:{type:"text",label:"Población",placeholder:"Población"},model:{value:e.user.poblacion,callback:function(a){e.$set(e.user,"poblacion",a)},expression:"user.poblacion"}})],1),a("div",{staticClass:"col-12 text-center mt-4"},[a("p-button",{attrs:{type:"info",round:""},nativeOn:{click:function(a){return a.preventDefault(),e.sendInfo.apply(null,arguments)}}},[e._v("\n          Editar despacho\n        ")])],1)])])])},es=[],as={props:{client:{type:Object,require:!1}},setup(e,{emit:a}){const t=Object(s["ref"])(0),i=Object(s["ref"])([]),n=Object(s["ref"])(null),o=Object(s["ref"])({nombre:"",correo:"",tel:"",comunidad:"",provincia:"",poblacion:"",time:(new Date).getTime()}),l=Object(s["ref"])([]);Object(s["onMounted"])(()=>{}),e.client&&(o.value={...e.client});const c=()=>{a("sendForm",{...o.value}),o.value={nombre:"",correo:"",tel:"",comunidad:"",provincia:"",poblacion:""}};return{user:o,comunidades:ba,provincias:fa,altaCaso:t,especialidades:l,sendInfo:c,despachos:i,despacho:n}}},ts=as,ss=(t("25db"),Object(h["a"])(ts,Xt,es,!1,null,null,null)),is=ss.exports,ns={components:{FormularioDespacho:is,FormularioCaso:Ua,FormularioConfirmaCaso:it,BorrarPersona:Za,Listados:dt,Formulario:Sa},setup(){const e=Object(s["ref"])([]),a=Object(s["ref"])({}),t=Object(s["ref"])({}),i=Object(s["ref"])(!1),n=Object(s["ref"])(!1),o=Object(s["ref"])(null),c=Object(s["ref"])(!1),r=Object(s["ref"])({}),d=Object(s["ref"])(!1),u=Object(s["ref"])(!1),m=Object(s["ref"])({}),v=Object(s["ref"])([]),b=Object(s["ref"])(1),f=JSON.parse(localStorage.getItem("userInform")),C=Object(s["computed"])(()=>!(!f.admin||!0!==f.admin)),h=Object(s["ref"])({searchQuery:"",searchQueryName:"",searchQuerySurname:""}),g=[{name:"searchQuery",label:"Filtrar por teléfono",type:"input",placeholder:"Buscar por teléfono"},{name:"searchQueryName",label:"Filtrar por nombre",type:"input",placeholder:"Buscar por nombre"}],y=[{key:"nombre",label:"Nombre"},{key:"tel",label:"Teléfono"},{key:"poblacion",label:"Poblacion"},{key:"actions",label:"Acciones"}],_=Object(s["ref"])(y[0].key),w=Object(s["computed"])(()=>y.slice(0,-1)),O=async()=>{e.value=(await Object(l["f"])(Object(l["b"])(p,"despachos"))).docs.map(e=>({id:e.id,...e.data()}))},j=async()=>{const e=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("confirmaCaso","==","0"),Object(l["n"])("telCliente","==",o.value));v.value=(await Object(l["f"])(e)).docs.map(e=>({id:e.id,...e.data()})),r.value=v.value[0],c.value=!0},k=e=>{b.value=parseInt(e),A()},A=()=>{const e={currentPage:b.value};localStorage.setItem("listadoDespachosState",JSON.stringify(e))},x=()=>{state.currentPage&&(b.value=parseInt(state.currentPage))},S=e=>{Object.assign(h.value,e)},D=Object(s["computed"])(()=>{let a=e.value;return h.value.searchQuery&&(a=a.filter(e=>e.tel.includes(h.value.searchQuery))),h.value.searchQueryName&&(a=a.filter(e=>e.nombre.toLowerCase().includes(h.value.searchQueryName.toLowerCase()))),h.value.searchQuerySurname&&(a=a.filter(e=>e.apellidos.toLowerCase().includes(h.value.searchQuerySurname.toLowerCase()))),a.sort((e,a)=>{if("string"===typeof e[_.value]){if(e[_.value].toLowerCase()<a[_.value].toLowerCase())return-1;if(e[_.value].toLowerCase()>a[_.value].toLowerCase())return 1}else{if(e[_.value]<a[_.value])return-1;if(e[_.value]>a[_.value])return 1}return 0})}),E=e=>{a.value=e,i.value=!0},P=async()=>{try{const e=Object(l["d"])(p,"despachos",a.value.id);await Object(l["m"])(e,t.value),O(),i.value=!1}catch(e){console.error("Error al actualizar el cliente:",e)}},F=async()=>{try{const e=Object(l["d"])(p,"clientes",a.value.id);await Object(l["m"])(e,{confirmaCaso:t.value.confirmaCaso}),O(),i.value=!1}catch(e){console.error("Error al actualizar el cliente:",e)}},N=()=>{0===v.value.length&&(a.value.confirmaCaso="1",t.value=a.value,F(),c.value=!1)},I=async e=>{try{const a=Object(l["d"])(p,"casos",e.id);await Object(l["m"])(a,e),await j(),N()}catch(a){console.error("Error al actualizar el cliente:",a)}},L=e=>{t.value=e,P()},T=async e=>{e.telCliente=o.value,e.telEspecialista=null,e.status="0",e.time=(new Date).getTime(),"0"===e.confirmaCaso&&(a.value.confirmaCaso="0",t.value=a.value,F()),await Object(l["a"])(Object(l["b"])(p,"casos"),e),o.value=null,n.value=!1},Q=async()=>{try{const e=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("telCliente","==",m.value.tel)),a=await Object(l["f"])(e),t=a.docs.map(e=>Object(l["c"])(Object(l["d"])(p,"casos",e.id)));await Promise.all(t),console.log("Clientes eliminados exitosamente.")}catch(e){console.error("Error al eliminar clientes:",e)}};return Object(s["onMounted"])(()=>{O(),x()}),{handlePageChange:k,fields:y,filteredDespachos:D,editClient:E,modalShow:i,clientToEdit:a,recivedInfo:L,modalDelete:d,recivedCase:T,modalCase:n,modalOpenCase:c,caseToEdit:r,cases:v,clientToDelete:m,showSuccess:u,showAsAdmin:C,currentPage:b,deleteClient:e=>{m.value=e,d.value=!0},newCase:e=>{a.value=e,o.value=e.tel,n.value=!0},openCase:e=>{a.value=e,o.value=e.tel,j()},recivedCheckCase:e=>{e.confirmaCaso="1",I(e)},deleteUser:async()=>{Q();try{await Object(l["c"])(Object(l["d"])(p,"despachos",m.value.id)),u.value=!0,d.value=!1,O(),setTimeout(()=>{u.value=!1},3e3)}catch(e){console.error("Error al eliminar el documento: ",e)}},filterFields:g,handleFiltersSubmit:S,order:_,orderColumnList:w}}},os=ns,ls=Object(h["a"])(os,Kt,Zt,!1,null,null,null),cs=ls.exports,rs=function(){var e=this,a=e._self._c;return a("div",[a("form",{on:{submit:function(e){e.preventDefault()}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("fg-input",{attrs:{type:"text",label:"Nombre especialidad",placeholder:"Especialidad"},model:{value:e.especialidad,callback:function(a){e.especialidad=a},expression:"especialidad"}})],1),a("div",{staticClass:"col-12 text-center mt-4"},[a("p-button",{attrs:{type:"info",round:""},nativeOn:{click:function(a){return a.preventDefault(),e.createEspe.apply(null,arguments)}}},[e._v("\n              Dar de alta especialidad\n          ")])],1)])])])},ds=[],us=function(){var e=this,a=e._self._c;return a("span",[e._v("Especialista creado correctamente")])},ps=[],ms={name:"notification-template"},vs=ms,bs=Object(h["a"])(vs,us,ps,!1,null,null,null),fs=bs.exports,Cs={components:{StatsCard:He,ChartCard:Ve},setup(){const e=Object(s["ref"])(""),a=(e,a)=>{this.$notify({component:fs,icon:"ti-check",horizontalAlign:a,verticalAlign:e,type:"success"})},t=async()=>{try{await Object(l["a"])(Object(l["b"])(p,"especialidades"),{nombre:e.value}),e.value="",a("top","left")}catch(t){console.error("Error adding document: ",t)}};return{especialidad:e,createEspe:()=>{t()}}}},hs=Cs,gs=(t("f957"),Object(h["a"])(hs,rs,ds,!1,null,null,null)),ys=gs.exports,_s=function(){var e=this,a=e._self._c;return a("div",{staticClass:"calendar-container"},[a("h3",[e._v("Fechas de juicio y citas")]),a("div",{staticClass:"calendar-header"},[a("button",{on:{click:e.prevMonth}},[e._v("<")]),a("h2",[e._v(e._s(e.months[e.currentDate.getMonth()])+" "+e._s(e.currentDate.getFullYear()))]),a("button",{on:{click:e.nextMonth}},[e._v(">")])]),e.showCalendar?a("div",{staticClass:"calendar-grid"},[e._l(e.daysOfWeek,(function(t,s){return a("div",{key:s,staticClass:"calendar-day"},[e._v("\n      "+e._s(t)+"\n    ")])})),e._l(e.daysInMonth,(function(t){return a("div",{key:t.date,staticClass:"calendar-cell",class:{"current-day":e.isToday(t.date)},on:{click:function(a){return e.addEvent(t.date)}}},[a("div",{staticClass:"date-number"},[e._v(e._s(t.day))]),a("ul",{staticClass:"event-list"},e._l(t.events,(function(t,s){return a("li",{key:s,class:t.tipo},[a("div",{staticClass:"event-header"},[e.showAsuperAdmin?a("i",{staticClass:"ti-trash delete-icon",on:{click:function(a){return a.stopPropagation(),e.wantDelete(t)}}}):e._e(),t.cliente?a("i",{staticClass:"ti-eye view-client-icon",on:{click:function(a){return a.stopPropagation(),e.seeClient(t)}}}):e._e()]),a("span",[e._v(e._s(t.nombreEspe))]),a("br"),t.cliente?a("br"):e._e(),t.cliente?a("span",[e._v(e._s(t.cliente.nombreCompleto))]):e._e(),a("br"),t.cliente?a("span",[e._v(e._s(t.cliente.telCliente))]):e._e(),a("br"),t.lugar?a("span",[e._v(e._s(t.lugar))]):e._e(),t.hora?a("span",[e._v(" - "+e._s(t.hora))]):e._e(),a("br")])})),0)])}))],2):e._e(),a("b-modal",{attrs:{id:"bv-modal-example","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Borrar el evento seleccionado de "+e._s(e.eventSelected.nombreEspe)+" \n    ")]},proxy:!0}]),model:{value:e.showDelete,callback:function(a){e.showDelete=a},expression:"showDelete"}},[a("p-button",{attrs:{type:"danger",round:""},nativeOn:{click:function(a){return a.preventDefault(),e.deleteEvent.apply(null,arguments)}}},[e._v("\n          Sí, borrar\n        ")]),a("p-button",{staticClass:"ml-3",attrs:{type:"info",round:""},nativeOn:{click:function(a){a.preventDefault(),e.showDelete=!1}}},[e._v("\n          No, cancelar\n        ")])],1)],1)},ws=[],Os={data(){return{showDelete:!1,eventSelected:{},userData:JSON.parse(localStorage.getItem("userInform")),currentDate:new Date,events:{},showCalendar:!1,daysOfWeek:["Lun","Mar","Mie","Jue","Vie","Sab","Dom"],months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"]}},computed:{daysInMonth(){const e=this.currentDate.getFullYear(),a=this.currentDate.getMonth(),t=new Date(e,a,1),s=(t.getDay()+6)%7,i=[];for(let o=0;o<s;o++)i.push({day:"",date:null,events:[]});const n=new Date(e,a+1,0).getDate();for(let o=1;o<=n;o++){const t=new Date(e,a,o),s=this.formatDateKey(t);i.push({day:o,date:t,events:this.events[s]||[]})}return i},showAsAdmin(){return!(!this.userData.admin||!0!==this.userData.admin)},showAsuperAdmin(){return!(!this.userData.superAdmin||!0!==this.userData.superAdmin)}},watch:{currentDate(){this.getStartAndEndOfMonth(),this.showCalendar=!1}},mounted(){this.getStartAndEndOfMonth()},methods:{async searchClient(e){const a=Object(l["k"])(Object(l["b"])(p,"clientes"),Object(l["n"])("tel","==",e)),t=await Object(l["f"])(a),s=t.docs.map(e=>e.data())[0];return s},async deleteEvent(){await Object(l["c"])(Object(l["d"])(p,"citas",this.eventSelected.id)),this.showDelete=!1},wantDelete(e){this.showDelete=!0,this.eventSelected=e,console.log(e)},async getCasos(){console.log(this.userData);const e=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("ratificacionJuicio",">",this.firstDay)),a=await Object(l["f"])(e);let t=a.docs.map(e=>({id:e.id,...e.data()}));await Promise.all(t.map(async e=>{const a=Object(l["k"])(Object(l["b"])(p,"especialistas"),Object(l["n"])("tel","==",e.telEspecialista)),t=await Object(l["f"])(a),s=t.docs.map(e=>e.data())[0];e.nombreEspe=`${s.nombre} ${s.apellidos}`,e.tipo="juicio",e.fecha=e.ratificacion.fechaJuicio,this.userData.superAdmin&&!0===this.userData.superAdmin?this.addEvent(e,"casos"):s.nombre.toLowerCase()===this.userData.nombre.toLowerCase()&&s.apellidos.toLowerCase()===this.userData.apellidos.toLowerCase()&&this.addEvent(e,"citasFirebase")}));const s=Object(l["k"])(Object(l["b"])(p,"citas"),Object(l["n"])("time",">",this.firstDay),Object(l["n"])("time","<",this.lastDay)),i=await Object(l["f"])(s);let n=i.docs.map(e=>({id:e.id,...e.data()}));console.log(n),await Promise.all(n.map(async e=>{e.nombreEspe=`${e.nombre} ${e.apellidos}`,(this.userData.superAdmin&&!0===this.userData.superAdmin||e.nombre.toLowerCase()===this.userData.nombre.toLowerCase()&&e.apellidos.toLowerCase()===this.userData.apellidos.toLowerCase())&&this.addEvent(e,"citasFirebase")})),this.showCalendar=!0},getStartAndEndOfMonth(){const e=this.currentDate.getFullYear(),a=this.currentDate.getMonth();this.events=[],this.firstDay=new Date(e,a,1).getTime(),this.lastDay=new Date(e,a+1,0),this.lastDay=new Date(this.lastDay).setHours(23,59,59,999),this.lastDay=new Date(this.lastDay).getTime(),this.getCasos()},formatDateKey(e){const a=e.getFullYear(),t=(e.getMonth()+1).toString().padStart(2,"0"),s=e.getDate().toString().padStart(2,"0");return`${a}-${t}-${s}`},isToday(e){if(!e)return!1;const a=new Date;return a.getFullYear()===e.getFullYear()&&a.getMonth()===e.getMonth()&&a.getDate()===e.getDate()},prevMonth(){this.currentDate=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()-1)},nextMonth(){this.currentDate=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()+1)},async addEvent(e,a){const t="citasFirebase"===a?await this.formatDateKey(new Date(e.time)):await this.formatDateKey(new Date(e.ratificacionJuicio));this.events[t]||(this.events[t]=[]),this.events[t].push(e)},async seeClient(e){const a=await this.searchClient(e.cliente.telCliente);this.$router.push({name:"UserProfile",params:{id:a.id},query:{type:"cliente"}})}}},js=Os,ks=(t("041d"),Object(h["a"])(js,_s,ws,!1,null,null,null)),As=ks.exports,xs=function(){var e=this,a=e._self._c;return a("div",{staticClass:"calendar-container"},[a("h3",[e._v("Calendario de Remesas")]),a("div",{staticClass:"calendar-header"},[a("button",{on:{click:e.prevMonth}},[e._v("<")]),a("h2",[e._v(e._s(e.months[e.currentDate.getMonth()])+" "+e._s(e.currentDate.getFullYear()))]),a("button",{on:{click:e.nextMonth}},[e._v(">")])]),e.showCalendar?a("div",{staticClass:"calendar-grid"},[e._l(e.daysOfWeek,(function(t,s){return a("div",{key:s,staticClass:"calendar-day"},[e._v("\n      "+e._s(t)+"\n    ")])})),e._l(e.daysInMonth,(function(t){return a("div",{key:t.date,staticClass:"calendar-cell",class:{"current-day":e.isToday(t.date)}},[a("div",{staticClass:"date-number"},[e._v(e._s(t.day))]),a("ul",{staticClass:"event-list"},e._l(t.events,(function(t,s){return a("li",{key:s,class:t.pagado?"pagado":"pendiente"},[e.showAsuperAdmin?a("i",{staticClass:"ti-trash",on:{click:function(a){return e.wantDelete(t)}}}):e._e(),a("br"),a("span",[a("b",[e._v(e._s(t.cantidad)+"€")])]),a("br"),a("span",[e._v(e._s(t.nombreCliente))]),a("br"),!t.pagado&&e.showAsuperAdmin?a("span",[a("button",{staticClass:"btn btn-success btn-sm mt-2",on:{click:function(a){return e.marcarPagado(t)}}},[e._v("Marcar como pagado")])]):e._e()])})),0)])}))],2):e._e(),a("b-modal",{attrs:{id:"bv-modal-example","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Borrar la remesa seleccionada de "+e._s(e.remesaSelected.nombreCliente)+"\n    ")]},proxy:!0}]),model:{value:e.showDelete,callback:function(a){e.showDelete=a},expression:"showDelete"}},[a("p-button",{attrs:{type:"danger",round:""},nativeOn:{click:function(a){return a.preventDefault(),e.deleteRemesa.apply(null,arguments)}}},[e._v("\n      Sí, borrar\n    ")]),a("p-button",{staticClass:"ml-3",attrs:{type:"info",round:""},nativeOn:{click:function(a){a.preventDefault(),e.showDelete=!1}}},[e._v("\n      No, cancelar\n    ")])],1)],1)},Ss=[],Ds={data(){return{showDelete:!1,remesaSelected:{},userData:JSON.parse(localStorage.getItem("userInform")),currentDate:new Date,events:{},showCalendar:!1,daysOfWeek:["Lun","Mar","Mie","Jue","Vie","Sab","Dom"],months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"]}},computed:{daysInMonth(){const e=this.currentDate.getFullYear(),a=this.currentDate.getMonth(),t=new Date(e,a,1),s=(t.getDay()+6)%7,i=[];for(let o=0;o<s;o++)i.push({day:"",date:null,events:[]});const n=new Date(e,a+1,0).getDate();for(let o=1;o<=n;o++){const t=new Date(e,a,o),s=this.formatDateKey(t);i.push({day:o,date:t,events:this.events[s]||[]})}return i},showAsuperAdmin(){return this.userData.superAdmin&&!0===this.userData.superAdmin}},watch:{currentDate(){this.getStartAndEndOfMonth(),this.showCalendar=!1}},mounted(){this.getStartAndEndOfMonth()},methods:{async deleteRemesa(){try{const e=Object(l["d"])(p,"remesas",this.remesaSelected.docId),a=await Object(l["e"])(e),t=a.data().value,s=t.filter(e=>!(e.fecha===this.remesaSelected.fecha&&e.idCliente===this.remesaSelected.idCliente&&e.cantidad===this.remesaSelected.cantidad));0===s.length?await Object(l["c"])(e):await Object(l["m"])(e,{value:s}),this.showDelete=!1,this.getStartAndEndOfMonth()}catch(e){console.error("Error al eliminar la remesa:",e)}},async marcarPagado(e){try{const a=Object(l["d"])(p,"remesas",e.docId),t=await Object(l["e"])(a),s=t.data().value,i=s.map(a=>a.fecha===e.fecha&&a.idCliente===e.idCliente&&a.cantidad===e.cantidad?{...a,pagado:!0}:a);await Object(l["m"])(a,{value:i}),this.getStartAndEndOfMonth()}catch(a){console.error("Error al marcar como pagado:",a)}},wantDelete(e){this.showDelete=!0,this.remesaSelected=e},async getRemesas(){this.events={};const e=Object(l["k"])(Object(l["b"])(p,"remesas")),a=await Object(l["f"])(e);a.forEach(e=>{const a=e.data().value||[];a.forEach(a=>{const t=new Date(a.fecha),s=new Date(this.firstDay),i=new Date(this.lastDay);t>=s&&t<=i&&this.addEvent({id:e.id,...a,docId:e.id})})}),this.showCalendar=!0},getStartAndEndOfMonth(){const e=this.currentDate.getFullYear(),a=this.currentDate.getMonth();this.events={},this.firstDay=new Date(e,a,1),this.lastDay=new Date(e,a+1,0),this.getRemesas()},formatDateKey(e){const a=e.getFullYear(),t=(e.getMonth()+1).toString().padStart(2,"0"),s=e.getDate().toString().padStart(2,"0");return`${a}-${t}-${s}`},isToday(e){if(!e)return!1;const a=new Date;return a.getFullYear()===e.getFullYear()&&a.getMonth()===e.getMonth()&&a.getDate()===e.getDate()},prevMonth(){this.currentDate=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()-1)},nextMonth(){this.currentDate=new Date(this.currentDate.getFullYear(),this.currentDate.getMonth()+1)},addEvent(e){const a=this.formatDateKey(new Date(e.fecha));this.events[a]||(this.events[a]=[]),this.events[a].push(e)}}},Es=Ds,Ps=(t("54a1"),Object(h["a"])(Es,xs,Ss,!1,null,null,null)),Fs=Ps.exports,Ns=function(){var e=this,a=e._self._c;return a("div",[e.showSuccess?a("b-alert",{attrs:{variant:"success",show:""}},[e._v("Guardado correctamente")]):e._e(),e.showError?a("b-alert",{attrs:{variant:"danger",show:""}},[e._v("Error al guardar los datos")]):e._e(),a("div",{staticClass:"row"},[a("div",{staticClass:"custom-select-wrapper col-md-12"},[a("label",{attrs:{for:""}},[e._v("Tipo de contacto")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.cita.tipo,expression:"cita.tipo"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.cita,"tipo",a.target.multiple?t:t[0])}}},[a("option",{key:"cita",attrs:{value:"cita"}},[e._v("Cita")]),a("option",{key:"juicio",attrs:{value:"juicio"}},[e._v("Juicio")])])]),e.showAsSuperAdmin?a("div",{staticClass:"custom-select-wrapper col-md-12 mt-3 mb-3"},[a("label",{attrs:{for:""}},[e._v("Especialista")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.encargado,expression:"encargado"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.encargado=a.target.multiple?t:t[0]}}},e._l(e.especialistas,(function(t,s){return a("option",{key:s,domProps:{value:t}},[e._v(e._s(`${t.nombre} ${t.apellidos}`))])})),0)]):e._e(),a("div",{staticClass:"col-md-6 mt-3"},[a("fg-input",{attrs:{type:"date",label:"Fecha",placeholder:"Fecha"},model:{value:e.cita.fecha,callback:function(a){e.$set(e.cita,"fecha",a)},expression:"cita.fecha"}})],1),"juicio"===e.cita.tipo?a("div",{staticClass:"col-md-6 mt-3"},[a("fg-input",{attrs:{type:"date",label:"Fecha de vencimiento",placeholder:"Fecha"},model:{value:e.cita.vencimiento,callback:function(a){e.$set(e.cita,"vencimiento",a)},expression:"cita.vencimiento"}})],1):e._e(),"juicio"===e.cita.tipo?a("div",{staticClass:"col-md-6 mt-3"},[a("fg-input",{attrs:{type:"date",label:"Fecha de ratificación",placeholder:"Fecha"},model:{value:e.cita.ratificacion,callback:function(a){e.$set(e.cita,"ratificacion",a)},expression:"cita.ratificacion"}})],1):e._e(),a("div",{staticClass:"col-md-6 mt-3"},[a("fg-input",{attrs:{type:"hour",label:"hora",placeholder:"hora"},model:{value:e.cita.hora,callback:function(a){e.$set(e.cita,"hora",a)},expression:"cita.hora"}})],1),a("div",{staticClass:"col-md-6 mt-3"},[a("fg-input",{attrs:{type:"text",label:"Lugar",placeholder:"Lugar"},model:{value:e.cita.lugar,callback:function(a){e.$set(e.cita,"lugar",a)},expression:"cita.lugar"}})],1),a("div",{staticClass:"col-md-12 mt-3"},[a("label",{attrs:{for:""}},[e._v("Cliente:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.cita.cliente,expression:"cita.cliente"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.cita,"cliente",a.target.multiple?t:t[0])}}},e._l([...e.casos||[]].sort((e,a)=>(e.nombreCompleto||"").localeCompare(a.nombreCompleto||"")),(function(t){return a("option",{key:t.id,domProps:{value:t}},[e._v(e._s(t.nombreCompleto))])})),0)]),a("div",{staticClass:"col-12 text-center mt-4"},[a("p-button",{attrs:{type:"info",round:""},nativeOn:{click:function(a){return a.preventDefault(),e.addCita.apply(null,arguments)}}},[e._v("\n          Alta\n        ")])],1)])],1)},Is=[],Ls={components:{FormularioCliente:Ba},props:{casos:{type:Array,required:!0},especialista:{type:Object,required:!0}},setup(e,{emit:a}){const t=Object(s["ref"])(!1),i=Object(s["ref"])(!1),n=Object(s["ref"])([]),o=Object(s["ref"])(null),c=JSON.parse(localStorage.getItem("userInform")),r=Object(s["computed"])(()=>!(!c.superAdmin||!0!==c.superAdmin)),d=Object(s["ref"])({nombre:null,apellidos:null,idEspe:null,lugar:"",fecha:"",hora:"",tipo:null,cliente:null}),u=async(e,s)=>{d.value.time=new Date(d.value.fecha).getTime(),d.value.idEspe=o.value.id,d.value.nombre=o.value.nombre,d.value.apellidos=o.value.apellidos,await Object(l["a"])(Object(l["b"])(p,"citas"),d.value),t.value=!0,setTimeout(()=>{t.value=!1,a("closeModal")},2e3)};return Object(s["onMounted"])(async()=>{r.value?(n.value=(await Object(l["f"])(Object(l["b"])(p,"especialistas"))).docs.map(e=>({id:e.id,...e.data()})),n.value=n.value.sort((e,a)=>e.nombre.localeCompare(a.nombre))):o.value=c}),{showSuccess:t,showError:i,cita:d,addCita:u,especialistas:n,encargado:o,showAsSuperAdmin:r}}},Ts=Ls,Qs=(t("7cda"),Object(h["a"])(Ts,Ns,Is,!1,null,null,null)),Ms=Qs.exports,$s=function(){var e=this,a=e._self._c;return a("div",[e.showSuccess?a("b-alert",{attrs:{variant:"success",show:""}},[e._v("Cliente dado de alta correctamente")]):e._e(),e.showError?a("b-alert",{attrs:{variant:"danger",show:""}},[e._v("Cliente ya se encuentra dado de alta")]):e._e(),a("formulario-cliente",{on:{sendForm:e.recivedInfo}})],1)},Bs=[],Vs={components:{FormularioCliente:Ba},setup(){const e=Object(s["ref"])(!1),a=Object(s["ref"])(!1),t=Object(s["ref"])({nombre:"",apellidos:"",correo:"",tel:"",comunidad:"",provincia:"",poblacion:"",casos:0}),i=Object(s["ref"])(null),n=async(s,n)=>{const c=Object(l["k"])(Object(l["b"])(p,"clientes"),Object(l["n"])("tel","==",t.value.tel)),r=await Object(l["f"])(c);r.docs.length>0?(a.value=!0,setTimeout(()=>{a.value=!1},2e3)):(await Object(l["a"])(Object(l["b"])(p,"clientes"),t.value),""!==n.especialidad&&(n.telCliente=s.tel,n.telEspecialista=null,i.value=n,i.value.time=(new Date).getTime(),await o(),i.value=null),t.value={nombre:"",apellidos:"",correo:"",tel:"",comunidad:"",provincia:"",poblacion:"",casos:0},e.value=!0,setTimeout(()=>{e.value=!1},2e3))},o=async()=>{const e=await Object(l["a"])(Object(l["b"])(p,"casos"),i.value);return i.value.id=e.id,e.id},c=(e,a)=>{e?(t.value=e,t.value.time=(new Date).getTime(),n(e,a)):console.error("Received user data is null or undefined")};return{recivedInfo:c,showSuccess:e,showError:a,caso:i}}},zs=Vs,Rs=(t("5194"),Object(h["a"])(zs,$s,Bs,!1,null,null,null)),Js=Rs.exports,qs=function(){var e=this,a=e._self._c;return a("div",[e.showSuccess?a("b-alert",{staticStyle:{position:"fixed",width:"100%",top:"0px","z-index":"9999"},attrs:{variant:"success",show:""}},[e._v("Caso borrado correctamente")]):e._e(),a("div",{staticClass:"row"},[a("div",{staticClass:"col-4"},[a("label",{attrs:{for:""}},[e._v("Filtrar por telefono")]),a("b-form-input",{staticClass:"mb-3",attrs:{placeholder:"Buscar por teléfono"},model:{value:e.searchQuery,callback:function(a){e.searchQuery=a},expression:"searchQuery"}})],1),a("div",{staticClass:"col-4"},[a("label",{attrs:{for:""}},[e._v("Filtrar por nombre")]),a("b-form-input",{staticClass:"mb-3",attrs:{placeholder:"Buscar por nombre"},model:{value:e.searchQueryName,callback:function(a){e.searchQueryName=a},expression:"searchQueryName"}})],1),a("div",{staticClass:"col-4"},[a("label",{attrs:{for:""}},[e._v("Filtrar por apellidos")]),a("b-form-input",{staticClass:"mb-3",attrs:{placeholder:"Buscar por apellidos"},model:{value:e.searchQuerySurname,callback:function(a){e.searchQuerySurname=a},expression:"searchQuerySurname"}})],1)]),e.filteredClientes.length>0?a("b-pagination",{staticClass:"mt-3",attrs:{"total-rows":e.filteredClientes.length,"per-page":"10"},model:{value:e.currentPage,callback:function(a){e.currentPage=a},expression:"currentPage"}}):e._e(),e.filteredClientes.length>0?a("b-table",{attrs:{striped:"",hover:"",items:e.filteredClientes,fields:e.fields,"per-page":"10","current-page":e.currentPage},scopedSlots:e._u([{key:"cell(actions)",fn:function(t){return[a("b-button",{attrs:{size:"sm"},on:{click:function(a){return e.newCase(t.item)}}},[e._v("Agregar especialista")]),a("b-button",{staticClass:"ml-3",attrs:{size:"sm"},on:{click:function(a){return e.setDeleteCase(t.item)}}},[e._v("Borrar caso")])]}}],null,!1,3062583257)}):a("span",[e._v("No hay casos sin asignar especialista")]),a("b-modal",{attrs:{id:"bv-modal-example","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Agregar especialista\n    ")]},proxy:!0}]),model:{value:e.modalCase,callback:function(a){e.modalCase=a},expression:"modalCase"}},[a("div",{staticClass:"col-md-12"},[e._v("Cliente: "+e._s(e.client.nombreCliente+" "+e.client.apellidosCliente))]),a("div",{staticClass:"col-md-12 mt-2"},[e._v("Telefono cliente: "+e._s(e.client.telefonoCliente))]),a("div",{staticClass:"col-md-12 mt-2"},[e._v("Correo: "+e._s(e.client.correo))]),a("div",{staticClass:"col-md-12 mt-2"},[e._v("Residencia cliente: "+e._s(e.client.comunidadCliente+" ("+e.client.provinciaCliente+")"))]),a("div",{staticClass:"col-md-12 mt-2"},[e._v("Especialidad del caso: "+e._s(e.client.nombreEspe))]),a("div",{staticClass:"col-md-12 mt-2"},[e._v("Observaciones: "+e._s(e.client.observaciones))]),a("div",{staticClass:"custom-select-wrapper col-md-12 mt-4"},[a("label",{attrs:{for:""}},[e._v("Listado de Especialistas")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.espeSelect,expression:"espeSelect"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.espeSelect=a.target.multiple?t:t[0]}}},e._l(e.especialistas,(function(t){return a("option",{key:t.tel,domProps:{value:t.tel}},[e._v("\n          "+e._s(t.nombre+" "+t.apellidos+" - "+e.provincias[t.provincia]+" - "+t.poblacion+" - Especialidades: "+e.especialidades.filter(e=>t.especialidades.includes(e.id)).map(e=>e.nombre).join(", "))+"\n        ")])})),0)]),a("div",{staticClass:"col-12 text-center mt-4"},[a("p-button",{attrs:{type:"info",round:""},nativeOn:{click:function(a){return a.preventDefault(),e.setEspe.apply(null,arguments)}}},[e._v("\n        Asignar\n      ")])],1)]),a("b-modal",{attrs:{id:"bv-modal-example","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Borrar caso\n    ")]},proxy:!0}]),model:{value:e.modalDelete,callback:function(a){e.modalDelete=a},expression:"modalDelete"}},[a("borrar-caso",{on:{deleteClient:e.deleteCase,cancelDelete:function(a){e.modalDelete=!1}}})],1)],1)},Us=[],Hs={components:{FormularioCliente:Ba,FormularioCaso:Ua,BorrarCaso:It},setup(){const e=Object(s["ref"])([]),a=Object(s["ref"])([]),t=Object(s["ref"])(""),i=Object(s["ref"])(""),n=Object(s["ref"])(""),o=Object(s["ref"])(""),c=Object(s["ref"])(null),r=Object(s["ref"])({}),d=Object(s["ref"])({}),u=Object(s["ref"])(!1),m=Object(s["ref"])(!1),v=Object(s["ref"])(!1),b=Object(s["ref"])(!1),f=Object(s["ref"])(null),C=Object(s["ref"])(1),h=Object(s["computed"])(()=>JSON.parse(localStorage.getItem("userInform"))),g=[{key:"dias",label:"Días alta de caso"},{key:"factura",label:"nº factura"},{key:"nombreEspe",label:"Especialidad"},{key:"nombreCliente",label:"Nombre Cliente"},{key:"apellidosCliente",label:"Apellidos Cliente"},{key:"telCliente",label:"Telefono Cliente"},{key:"actions",label:"Acciones"}],y=Object(s["ref"])([]),_=async()=>{y.value=(await Object(l["f"])(Object(l["b"])(p,"especialidades"))).docs.map(e=>({id:e.id,...e.data()}))},w=Object(s["computed"])(()=>{let a=[];return i.value||n.value||o.value?(i.value?a=e.value.filter(e=>e.telCliente.toLowerCase().includes(i.value.toLowerCase())):n.value?a=e.value.filter(e=>e.nombreCliente.toLowerCase().includes(n.value.toLowerCase())):o.value&&(a=e.value.filter(e=>e.apellidosCliente.toLowerCase().includes(o.value.toLowerCase()))),a.sort((e,a)=>parseFloat(a.time)-parseFloat(e.time))):(a=e.value,a.sort((e,a)=>parseFloat(a.time)-parseFloat(e.time)))}),O=async()=>{try{const a="negligencias@informesmedicospericiales.com"===h.value.correo?Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("telEspecialista","==",null),Object(l["n"])("especialidad","==","8t9rn2kRiHRANdZ7M8zG"),Object(l["n"])("status","==","0"),Object(l["n"])("confirmaCaso","==","1")):Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("telEspecialista","==",null),Object(l["n"])("status","==","0"),Object(l["n"])("confirmaCaso","==","1")),t=await Object(l["f"])(a);let s=t.docs.map(e=>({id:e.id,...e.data()}));await Promise.all(s.map(async e=>{const a=Object(l["k"])(Object(l["b"])(p,"clientes"),Object(l["n"])("tel","==",e.telCliente)),t=await Object(l["f"])(a),s=t.docs.map(e=>e.data())[0];e.nombreCliente=s?s.nombre:"N/A",e.apellidosCliente=s?s.apellidos:"N/A",e.telefonoCliente=s?s.tel:"N/A",e.correo=s?s.correo:"N/A",e.observaciones=s?s.observaciones:"N/A",console.log(s),s&&(e.comunidadCliente=s&&Number.isInteger(s.comunidad)?ba[s.comunidad]:s.comunidad||"NA",e.provinciaCliente=s&&fa[s.provincia]?fa[s.provincia]:s.provincia||"NA");const i=y.value.find(a=>a.id===e.especialidad);e.nombreEspe=i.nombre?i.nombre:"",e.factura=e.id,e.time=e.time?e.time:1723068e6;const n=new Date(e.time),o=new Date,c=o-n,r=Math.floor(c/864e5);e.dias=r})),s=s.sort((e,a)=>parseFloat(e.time)-parseFloat(a.time)),e.value=s}catch(a){console.error("Error al buscar casos:",a)}},j=async e=>{try{const t=Object(l["k"])(Object(l["b"])(p,"especialistas"),Object(l["n"])("especialidades","array-contains",e)),s=await Object(l["f"])(t),i=s.docs.map(e=>({id:e.id,...e.data()}));console.log(i),a.value=i.sort((e,a)=>e.nombre.toLowerCase()<a.nombre.toLowerCase()?-1:e.nombre.toLowerCase()>a.nombre.toLowerCase()?1:0),b.value=!0}catch(t){console.error("Error al buscar especialistas:",t)}},k=async()=>{const e=Object(l["d"])(p,"casos",c.value.id);await Object(l["m"])(e,{status:"1",telEspecialista:c.value.telEspecialista}),O(),b.value=!1};return Object(s["onMounted"])(()=>{O(),_()}),{casos:e,fields:g,searchQuery:i,searchQueryName:n,searchQuerySurname:o,filteredClientes:w,modalShow:m,modalCase:b,espeSelect:t,especialistas:a,client:r,modalDelete:v,showSuccess:u,currentPage:C,provincias:fa,especialidades:y,newCase:e=>{r.value=e,f.value=e.telCliente,c.value=e,t.value="",j(e.especialidad)},setEspe:()=>{c.value.telEspecialista=t.value,c.value.status="1",c.value.presupuesto="",k()},setDeleteCase:e=>{console.log(e),d.value=e,v.value=!0},deleteCase:async()=>{try{await Object(l["c"])(Object(l["d"])(p,"casos",d.value.id)),u.value=!0,v.value=!1,O(),setTimeout(()=>{u.value=!1},3e3)}catch(e){console.error("Error al eliminar el documento: ",e)}}}}},Ws=Hs,Gs=Object(h["a"])(Ws,qs,Us,!1,null,null,null),Ys=Gs.exports,Ks=function(){var e=this,a=e._self._c;return a("div",[e.showSuccess?a("b-alert",{staticStyle:{position:"fixed",width:"100%",top:"0px","z-index":"9999"},attrs:{variant:"success",show:""}},[e._v("Caso borrado correctamente")]):e._e(),a("Listados",{attrs:{items:e.filteredClientes,fields:e.fields,"current-page":e.currentPage},on:{"page-changed":e.handlePageChange},scopedSlots:e._u([{key:"filters",fn:function(){return[a("Formulario",{attrs:{filters:e.filterFields,formClass:"form-filters",fieldClass:"col-4"},on:{submit:e.handleFiltersSubmit}}),a("div",{staticClass:"custom-select-wrapper col-md-3 pl-0 mb-3"},[a("label",{attrs:{for:""}},[e._v("Filtrar por especialidad:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.filterEspe,expression:"filterEspe"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.filterEspe=a.target.multiple?t:t[0]}}},[a("option",{attrs:{value:""}},[e._v("Todas")]),e._l(e.especialidades,(function(t){return a("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.nombre))])}))],2)])]},proxy:!0},{key:"tableActions",fn:function({data:t}){return[a("b-button",{attrs:{size:"sm"},on:{click:function(a){return e.openBudgetModal(t.item)}}},[e._v("Enviar presupuesto")]),a("b-button",{staticClass:"ml-3",attrs:{size:"sm"},on:{click:function(a){return e.setDeleteCase(t.item)}}},[e._v("Borrar caso")])]}}])}),a("b-modal",{attrs:{id:"budget-modal","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Enviar presupuesto\n    ")]},proxy:!0}]),model:{value:e.modalMail,callback:function(a){e.modalMail=a},expression:"modalMail"}},[a("form",{on:{submit:function(a){return a.preventDefault(),e.sendBudget.apply(null,arguments)}}},[e.caseWantSet?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-center mb-2"},[a("b-button",{on:{click:function(a){return e.updateCase()}}},[e._v("Correo enviado manualmente")])],1),a("div",{staticClass:"col-12 text-center mb-3"},[a("a",{attrs:{href:`https://wa.me/34${e.caseWantSet.telCliente}?text=${e.body}`,target:"_blank"}},[e._v("Abrir en WhatsApp")]),a("br")]),e.espePresupuesto.nombre?a("div",{staticClass:"col-12"},[e._v("\n          Nombre especialista: "+e._s(e.espePresupuesto.nombre+" "+e.espePresupuesto.apellidos)+"\n        ")]):e._e(),a("div",{staticClass:"col-12 mt-2"},[e._v("\n          Nombre cliente: "+e._s(e.caseWantSet.nombreCliente+" "+e.caseWantSet.apellidosCliente)+"\n        ")]),a("div",{staticClass:"col-12 mt-2"},[e._v("\n          Teléfono cliente: "+e._s(e.caseWantSet.telCliente)+"\n        ")]),a("div",{staticClass:"col-12 mt-2"},[e._v("\n          Correo cliente: "+e._s(e.caseWantSet.correo)+"\n        ")]),a("div",{staticClass:"col-12 mt-2"},[e._v("\n          Comunidad (Provincia): "+e._s(e.caseWantSet.comunidadCliente+"("+e.caseWantSet.provinciaCliente+")")+"\n        ")]),a("div",{staticClass:"col-12 mt-2"},[e._v("\n          Especialidad: "+e._s(e.caseWantSet.nombreEspe)+"\n        ")]),a("div",{staticClass:"col-12 mt-2 mb-3"},[e._v("\n          Observaciones: "+e._s(e.caseWantSet.observaciones)+"\n        ")])]):e._e(),a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.body,expression:"body"}],staticStyle:{width:"100%"},attrs:{placeholder:"Escribe el mensaje del presupuesto",rows:"6"},domProps:{value:e.body},on:{input:function(a){a.target.composing||(e.body=a.target.value)}}})]),a("div",{staticClass:"mt-3 mb-3"},[a("label",[a("strong",[e._v("Adjuntar presupuesto (PDF):")])]),a("br"),a("input",{staticStyle:{display:"block !important",opacity:"1 !important",visibility:"visible !important",position:"relative !important"},attrs:{type:"file",accept:".pdf",multiple:""},on:{change:e.onFileChange}})]),a("div",{staticClass:"text-center mt-4"},[e.loading?a("b-spinner",{attrs:{label:"Spinning"}}):a("b-button",{attrs:{type:"submit"}},[e._v("Enviar")])],1)])]),a("b-modal",{attrs:{id:"bv-modal-example","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Borrar caso\n    ")]},proxy:!0}]),model:{value:e.modalDelete,callback:function(a){e.modalDelete=a},expression:"modalDelete"}},[a("borrar-caso",{on:{deleteClient:e.deleteCase,cancelDelete:function(a){e.modalDelete=!1}}})],1)],1)},Zs=[],Xs=function(){var e=this,a=e._self._c;return a("div",[a("div",{ref:"invoice",staticClass:"invoice-container"},[e._m(0),a("div",{staticClass:"invoice-body"},[a("div",{staticClass:"company-info"},[a("p",[e._v("Nombre: "+e._s(e.company.name))]),a("p",[e._v("Teléfono: "+e._s(e.company.phone))]),a("p",[e._v("Dirección: "+e._s(e.company.address))]),a("p",[e._v("Correo electrónico: "+e._s(e.company.email))]),a("p",[e._v("CIF: "+e._s(e.company.cif))])]),a("table",{staticClass:"invoice-table"},[e._m(1),a("tbody",e._l(e.services,(function(t,s){return a("tr",{key:s},[a("td",[e._v(e._s(t.name))]),a("td",[e._v(e._s(t.price.toFixed(2))+" €")])])})),0)]),a("div",{staticClass:"totals mt-3"},[a("p",[e._v("Total: "+e._s(e.subtotal.toFixed(2))+" €")])])]),e._m(2)]),a("div",{staticClass:"add-service"},[a("h3",[e._v("Añadir Servicio")]),a("label",[e._v("Servicio: "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.item.name,expression:"item.name"}],domProps:{value:e.item.name},on:{input:function(a){a.target.composing||e.$set(e.item,"name",a.target.value)}}})]),a("label",[e._v("Precio (€): "),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.item.price,expression:"item.price",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:e.item.price},on:{input:function(a){a.target.composing||e.$set(e.item,"price",e._n(a.target.value))},blur:function(a){return e.$forceUpdate()}}})]),a("button",{on:{click:e.addItem}},[e._v("Añadir")])]),a("button",{on:{click:e.exportToPDF}},[e._v("Exportar a PDF")])])},ei=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"invoice-header",staticStyle:{"margin-bottom":"-60px"}},[a("img",{staticClass:"header-image",attrs:{src:t("a16c"),alt:"Encabezado de Factura"}})])},function(){var e=this,a=e._self._c;return a("thead",[a("tr",[a("th",{staticStyle:{color:"white","text-align":"center",background:"rgb(0 175 223)"}},[e._v("SERVICIO")]),a("th",{staticStyle:{color:"white","text-align":"center",background:"rgb(0 175 223)"}},[e._v("PRECIO")])])])},function(){var e=this,a=e._self._c;return a("div",{staticClass:"invoice-footer"},[a("img",{staticClass:"footer-image",attrs:{src:t("c5ba"),alt:"Pie de página"}})])}],ai=t("d67e"),ti=t.n(ai),si={data(){return{headerImage:"/mnt/data/PARTE SUPERIOR.png",footerImage:"/mnt/data/Fondo para escritos sin viabilidad.png",company:{name:"",phone:"",address:"",email:"",cif:""},services:[],item:{name:"",price:0}}},computed:{subtotal(){return this.services.reduce((e,a)=>e+(a.price||0),0)},vat(){return.21*this.subtotal},total(){return this.subtotal+this.vat}},methods:{exportToPDF(){const e=this.$refs.invoice;ti()().from(e).save("factura.pdf")},addItem(){this.item.name&&this.item.price>0&&(this.services.push({...this.item}),this.item.name="",this.item.price=0)}}},ii=si,ni=(t("392c"),Object(h["a"])(ii,Xs,ei,!1,null,null,null)),oi=ni.exports;const li=Object({NODE_ENV:"production",BASE_URL:"/peritomedicotest/"}).VUE_APP_EMAIL_FUNCTION_URL||"https://us-central1-informesmedicospericiale-aefa2.cloudfunctions.net/sendEmail";var ci={components:{BorrarCaso:It,Listados:dt,Formulario:Sa,Factura:oi},setup(){const e=Object(s["ref"])([]),a=Object(s["ref"])([]),t=Object(s["ref"])(""),i=Object(s["ref"])([]),n=Object(s["ref"])(""),o=Object(s["ref"])(null),r=Object(s["ref"])({}),d=Object(s["ref"])(!1),u=Object(s["ref"])(!1),m=Object(s["ref"])(!1),b=Object(s["ref"])("0"),f=Object(s["ref"])(""),C=Object(s["ref"])(null),h=Object(s["ref"])({}),g=Object(s["ref"])(!1),y=Object(s["ref"])(!1),_=Object(s["ref"])(""),w=Object(s["ref"])(!1),O=Object(s["ref"])(!1),j=Object(s["ref"])(1),k=e=>{j.value=parseInt(e)},A=[{key:"dias",label:"Días alta de caso"},{key:"factura",label:"nº factura"},{key:"nombreEspe",label:"Especialidad"},{key:"nombreCliente",label:"Nombre Cliente"},{key:"apellidosCliente",label:"Apellidos Cliente"},{key:"telCliente",label:"Telefono Cliente"},{key:"actions",label:"Acciones"}],x=Object(s["ref"])({searchQuery:"",searchQueryName:"",searchQuerySurname:""}),S=[{name:"searchQuery",label:"Filtrar por teléfono",type:"input",placeholder:"Buscar por teléfono"},{name:"searchQueryName",label:"Filtrar por nombre",type:"input",placeholder:"Buscar por nombre"},{name:"searchQuerySurname",label:"Filtrar por apellidos",type:"input",placeholder:"Buscar por apellidos"}],D=async()=>{try{const t=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("status","==","1")),s=await Object(l["f"])(t);let i=s.docs.map(e=>({id:e.id,...e.data()}));await Promise.all(i.map(async e=>{const t=Object(l["k"])(Object(l["b"])(p,"clientes"),Object(l["n"])("tel","==",e.telCliente)),s=await Object(l["f"])(t),i=s.docs.map(e=>e.data())[0];e.nombreCliente=i?i.nombre:"N/A";const n=a.value.find(a=>a.id===e.especialidad);e.nombreEspe=n.nombre,e.apellidosCliente=i?i.apellidos:"N/A",e.correo=i?i.correo:"N/A",i&&(e.comunidadCliente=i&&ba[i.comunidad]?ba[i.comunidad]:i.comunidad||"NA",e.provinciaCliente=i&&fa[i.provincia]?fa[i.provincia]:i.provincia||"NA"),e.observaciones=i?i.observaciones:"N/A",e.time=e.time?e.time:1723068e6,e.factura=e.id;const o=new Date(e.time),c=new Date,r=c-o,d=Math.floor(r/864e5);e.dias=d})),i=i.sort((e,a)=>parseFloat(e.time)-parseFloat(a.time)),e.value=i,console.log("Esto es el listado de casos",e.value)}catch(t){console.error("Error al buscar casos:",t)}},E=async()=>{try{const e=Object(l["k"])(Object(l["b"])(p,"especialistas"),Object(l["n"])("tel","==",o.value.telEspecialista)),a=await Object(l["f"])(e),t=a.docs.map(e=>({id:e.id,...e.data()}));_.value=t[0],console.log(_.value)}catch(e){console.error("Error al buscar casos:",e)}},P=Object(s["computed"])(()=>{let a=e.value;return""!=t.value&&(a=a.filter(e=>e.especialidad===t.value)),x.value.searchQuery||x.value.searchQueryName||x.value.searchQuerySurname?(x.value.searchQuery?a=a.filter(e=>e.telCliente.toLowerCase().includes(x.value.searchQuery.toLowerCase())):x.value.searchQueryName?a=a.filter(e=>e.nombreCliente.toLowerCase().includes(x.value.searchQueryName.toLowerCase())):x.value.searchQuerySurname&&(a=a.filter(e=>e.apellidosCliente.toLowerCase().includes(x.value.searchQuerySurname.toLowerCase()))),a.sort((e,a)=>parseFloat(a.time)-parseFloat(e.time))):a.sort((e,a)=>parseFloat(a.time)-parseFloat(e.time))}),F=async()=>{const e=Object(l["d"])(p,"casos",o.value.id);await Object(l["m"])(e,{status:"2",presupuesto:b.value,presupuestoEnviado:(new Date).getTime()}),D(),m.value=!1},N=e=>{C.value=Array.from(e.target.files)},I=async()=>{if(C.value&&0!==C.value.length)for(const e of C.value){const a=Object(c["f"])(v,`casos/${o.value.id}/presupuesto/${e.name}`),t=Object(c["h"])(a,e);t.on("state_changed",a=>{const t=a.bytesTransferred/a.totalBytes*100;uploadProgress.value[e.name]=t.toFixed(0)},a=>{errorMessage.value=`Error al subir el archivo "${e.name}": ${a.message}`,setTimeout(()=>{errorMessage.value=""},2e3)})}},L=async()=>{try{w.value=!0;const e=new FormData;if(e.append("to",o.value.correo),e.append("subject","Informe pericial"),e.append("text",f.value),C.value&&C.value.length>0)for(const i of C.value)e.append("file",i);console.log("Enviando email a:",o.value.correo);const a=await fetch(li,{method:"POST",body:e}),t=await a.json();if(!t.success)throw new Error(t.error||"Error al enviar el email");const s={status:"pending",text:f.value,to:o.value.telCliente};await Object(l["a"])(Object(l["b"])(p,"mensajes"),s),console.log("Email enviado correctamente:",t.messageId),await I(),F(),m.value=!1}catch(e){console.error("Error al enviar el presupuesto:",e),alert("Hubo un error al enviar el presupuesto: "+e.message)}finally{w.value=!1}},T=async()=>{a.value=(await Object(l["f"])(Object(l["b"])(p,"especialidades"))).docs.map(e=>({id:e.id,...e.data()}))};Object(s["onMounted"])(()=>{D(),T()});const Q=e=>{Object.assign(x.value,e)};return{fields:A,filterFields:S,handleFiltersSubmit:Q,casos:e,filteredClientes:P,modalShow:d,clientToEdit:r,modalCase:u,modalMail:m,espeSelect:n,especialistas:i,caseWantSet:o,body:f,filePresu:C,presupuesto:b,caseToDelete:h,showSuccess:g,modalDelete:y,espePresupuesto:_,currentPage:j,handlePageChange:k,openBudgetModal:e=>{console.log("Open this modal",e),o.value=e,E(),m.value=!0},onFileChange:N,sendBudget:L,updateCase:F,setDeleteCase:e=>{h.value=e,y.value=!0},deleteCase:async()=>{try{await Object(l["c"])(Object(l["d"])(p,"casos",h.value.id)),g.value=!0,y.value=!1,D(),setTimeout(()=>{g.value=!1},3e3)}catch(e){console.error("Error al eliminar el documento: ",e)}},especialidades:a,filterEspe:t,loading:w,modalFactura:O}}},ri=ci,di=Object(h["a"])(ri,Ks,Zs,!1,null,null,null),ui=di.exports,pi=function(){var e=this,a=e._self._c;return a("div",[e.showSuccess?a("b-alert",{staticStyle:{position:"fixed",width:"100%",top:"0px","z-index":"9999"},attrs:{variant:"success",show:""}},[e._v("Caso borrado correctamente")]):e._e(),a("Listados",{attrs:{items:e.filteredClientes,fields:e.fields,"current-page":e.currentPage},on:{"page-changed":e.handlePageChange},scopedSlots:e._u([{key:"filters",fn:function(){return[a("Formulario",{attrs:{filters:e.filterFields,formClass:"form-filters",fieldClass:"col-4",initialData:e.filters},on:{submit:e.handleFiltersSubmit,search:e.searchCases}}),a("b-button",{staticClass:"mt-2",attrs:{variant:"primary"},on:{click:e.searchCases}},[e._v("Buscar")]),a("div",{staticClass:"custom-select-wrapper col-md-3 pl-0 mb-3"},[a("label",{attrs:{for:""}},[e._v("Filtrar por especialidad:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.filterEspe,expression:"filterEspe"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.filterEspe=a.target.multiple?t:t[0]}}},[a("option",{attrs:{value:""}},[e._v("Todas")]),e._l(e.especialidades,(function(t){return a("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.nombre))])}))],2)])]},proxy:!0},{key:"tableActions",fn:function({data:t}){return[a("b-button",{attrs:{size:"sm"},on:{click:function(a){return e.confirmClient(t.item)}}},[e._v("Presupuesto aceptado")]),a("b-button",{staticClass:"ml-3",attrs:{size:"sm"},on:{click:function(a){return e.setDeleteCase(t.item)}}},[e._v("Borrar caso")])]}}])}),a("b-modal",{attrs:{id:"bv-modal-example","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Borrar caso\n    ")]},proxy:!0}]),model:{value:e.modalDelete,callback:function(a){e.modalDelete=a},expression:"modalDelete"}},[a("borrar-caso",{on:{deleteClient:e.deleteCase,cancelDelete:function(a){e.modalDelete=!1}}})],1),a("b-modal",{attrs:{id:"bv-modal-example","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Confirmar presupuesto\n    ")]},proxy:!0}]),model:{value:e.modalConfirm,callback:function(a){e.modalConfirm=a},expression:"modalConfirm"}},[a("p",[e._v("Confirmación del presupuesto por parte del cliente")]),a("b-button",{attrs:{size:"sm"},on:{click:function(a){return e.acceptClient()}}},[e._v("Confirmar")])],1)],1)},mi=[],vi={components:{BorrarCaso:It,Listados:dt,Formulario:Sa},setup(){const e=Object(s["ref"])([]),a=Object(s["ref"])([]),t=Object(s["ref"])(""),i=Object(s["ref"])(null),n=Object(s["ref"])({}),o=Object(s["ref"])(!1),c=Object(s["ref"])(!1),r=Object(s["ref"])(!1),d=Object(s["ref"])(1),u=[{key:"dias",label:"Días alta de caso"},{key:"factura",label:"nº factura"},{key:"nombreEspe",label:"Especialidad"},{key:"nombreCliente",label:"Nombre Cliente"},{key:"apellidosCliente",label:"Apellidos Cliente"},{key:"telCliente",label:"Telefono Cliente"},{key:"actions",label:"Acciones"}],m=Object(s["ref"])({searchQuery:"",searchQueryName:"",searchQuerySurname:""}),v=Object(s["ref"])([{name:"searchQuery",label:"Filtrar por teléfono",type:"input",placeholder:"Buscar por teléfono",value:""}]),b=async()=>{console.log("Llegoo");(new Date).getTime();try{let t;t=m.value.searchQuery?Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("status","==","2"),Object(l["n"])("telCliente","==",m.value.searchQuery),Object(l["h"])(30)):Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("status","==","2"),Object(l["j"])("time","desc"),Object(l["h"])(30));const s=await Object(l["f"])(t);let i=s.docs.map(e=>({id:e.id,...e.data()}));await Promise.all(i.map(async e=>{const t=Object(l["k"])(Object(l["b"])(p,"clientes"),Object(l["n"])("tel","==",e.telCliente)),s=await Object(l["f"])(t),i=s.docs.map(e=>e.data())[0];e.nombreCliente=i?i.nombre:"N/A";const n=a.value.find(a=>a.id===e.especialidad);e.nombreEspe=n.nombre,e.apellidosCliente=i?i.apellidos:"N/A",e.clienteId=i?i.id:"N/A",e.correo=i?i.correo:"N/A",e.comunidadCliente=i?ba[i.comunidad]:"N/A",e.provinciaCliente=i?fa[i.provincia]:"N/A",e.observaciones=i?i.observaciones:"N/A",e.time=e.presupuestoEnviado?e.presupuestoEnviado:1723068e6,e.factura=e.id;const o=new Date(e.time),c=new Date,r=c-o,d=Math.floor(r/864e5);e.dias=d})),i=i.sort((e,a)=>parseFloat(e.time)-parseFloat(a.time)),e.value=i}catch(t){console.error("Error al buscar casos:",t)}},f=e=>{d.value=parseInt(e),C()},C=()=>{const e={filters:{},currentPage:d.value};console.log(v.value),v.value.forEach(a=>{e.filters[a.name]=a.value}),localStorage.setItem("listadoPresupuestoPendienteState",JSON.stringify(e))},h=()=>{const e=localStorage.getItem("listadoPresupuestoPendienteState");if(e){const a=JSON.parse(e);a.filters&&(v.value.forEach(e=>{e.value=a.filters[e.name]||""}),m.value={searchQuery:a.filters.searchQuery||"",searchQueryName:a.filters.searchQueryName||"",searchQuerySurname:a.filters.searchQuerySurname||""},a.currentPage&&(d.value=parseInt(a.currentPage))),b()}else b()};Object(s["watch"])(m,()=>{C()},{deep:!0}),Object(s["watch"])(d,()=>{C()});const g=Object(s["computed"])(()=>{let a=e.value;return""!=t.value&&(a=a.filter(e=>e.especialidad===t.value)),m.value.searchQuery||m.value.searchQueryName||m.value.searchQuerySurname?(m.value.searchQuery?a=a.filter(e=>e.telCliente.toLowerCase().includes(m.value.searchQuery.toLowerCase())):m.value.searchQueryName?a=a.filter(e=>e.nombreCliente.toLowerCase().includes(m.value.searchQueryName.toLowerCase())):m.value.searchQuerySurname&&(a=a.filter(e=>e.apellidosCliente.toLowerCase().includes(m.value.searchQuerySurname.toLowerCase()))),a.sort((e,a)=>parseFloat(a.time)-parseFloat(e.time))):a.sort((e,a)=>parseFloat(a.time)-parseFloat(e.time))}),y=async()=>{const e=Object(l["d"])(p,"casos",i.value.id);await Object(l["m"])(e,{status:"3",presupuestoAceptado:(new Date).getTime()});try{const e=`El caso de ${i.value.nombreCliente} ${i.value.apellidosCliente} ha sido aceptado: ${i.value.observaciones}`,a={text:e,to:i.value.telEspecialista,status:"pending"};await Object(l["a"])(Object(l["b"])(p,"mensajes"),a),console.log("✅ Mensaje creado para el perito al aceptar presupuesto")}catch(a){console.error("❌ Error al crear mensaje en colección mensajes:",a)}b()},_=async()=>{a.value=(await Object(l["f"])(Object(l["b"])(p,"especialidades"))).docs.map(e=>({id:e.id,...e.data()}))},w=async()=>{try{const e=new FormData;e.append("to","coordinacionpraxis@informesmedicospericiales.com"),e.append("subject","Presupuesto aceptado"),e.append("text",`Nuevo presupuesto aceptado de praxis - link al perfil: https://alexmc14.github.io/peritomedicotest/#/perfil/${i.value.clienteId}?type=cliente`),e.append("html",`<p>Nuevo presupuesto aceptado de praxis</p><p><a href="https://alexmc14.github.io/peritomedicotest/#/perfil/${i.value.clienteId}?type=cliente" target="_blank">Ver perfil del cliente</a></p>`);const a=await fetch(li,{method:"POST",body:e}),t=await a.json();if(!t.success)throw new Error(t.error||"Error al enviar el email");console.log("Email enviado correctamente:",t.messageId)}catch(e){console.error("Error al enviar el presupuesto:",e),alert("Hubo un error al enviar el presupuesto: "+e.message)}};Object(s["onMounted"])(()=>{_(),h(),window.addEventListener("keyup",j)});const O=e=>{Object.assign(m.value,e),v.value.forEach(a=>{a.value=e[a.name]||""}),C()};Object(s["onBeforeUnmount"])(()=>{C(),window.removeEventListener("keyup",j)});const j=e=>{"Enter"===e.key&&b()};return{fields:u,filterFields:v,handleFiltersSubmit:O,casos:e,filteredClientes:g,caseWantSet:i,caseToDelete:n,showSuccess:o,modalDelete:c,modalConfirm:r,acceptClient:e=>{"praxis"===i.value.nombreEspe.toLowerCase()&&w(i.value),y(),r.value=!1},setDeleteCase:e=>{n.value=e,c.value=!0},deleteCase:async()=>{try{await Object(l["c"])(Object(l["d"])(p,"casos",n.value.id)),o.value=!0,c.value=!1,b(),setTimeout(()=>{o.value=!1},3e3)}catch(e){console.error("Error al eliminar el documento: ",e)}},confirmClient:e=>{i.value=e,r.value=!0},especialidades:a,filterEspe:t,filters:m,searchCases:b,handlePageChange:f,currentPage:d}}},bi=vi,fi=Object(h["a"])(bi,pi,mi,!1,null,null,null),Ci=fi.exports,hi=function(){var e=this,a=e._self._c;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3 col-xs-12 mb-4"},[e.cliente?a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[e._v("\n          "+e._s(e.cliente.nombre)+" "+e._s(e.cliente.apellidos)+"\n        ")]),a("p",{staticClass:"card-text mb-1"},[a("strong",[e._v(e._s(e.cliente.tel))])]),a("p",{staticClass:"card-text mb-1"},[e._v("\n          "+e._s(e.cliente.correo)+"\n        ")]),a("p",{staticClass:"card-text mb-1"},[e._v("\n          "+e._s(e.cliente.comunidad)),a("br"),e._v("\n          "+e._s(e.cliente.provincia)+"\n        ")]),a("p",{staticClass:"card-text mt-3"},[a("strong",[e._v("Observaciones Especialista")]),a("br"),a("span",{staticStyle:{"white-space":"pre-line"}},[e._v(e._s(e.cliente.observacionesEspecialista))])])])]):a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[e._v("\n        Cargando datos del cliente...\n      ")])])]),a("div",{staticClass:"col-md-9 col-xs-12"},[e.loading?a("div",{staticClass:"text-center mt-5"},[a("b-spinner",{attrs:{label:"Cargando"}})],1):e.errorMessage?a("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._v("\n      "+e._s(e.errorMessage)+"\n    ")]):e.alreadyAssigned?a("div",{staticClass:"alert alert-warning",attrs:{role:"alert"}},[e._v("\n      Este caso ya se encuentra asignado a otro especialista.\n    ")]):a("div",[a("h3",{staticClass:"mb-3"},[e._v("\n        ¿Deseas aceptar este caso para llevarlo?\n      ")]),a("p",{staticClass:"mb-4"},[e._v("\n        Al aceptar el caso, se te asignará como especialista responsable.\n      ")]),a("p-button",{attrs:{type:"info",round:"",disabled:e.assigning},nativeOn:{click:function(a){return a.preventDefault(),e.assignCase.apply(null,arguments)}}},[e._v("\n        "+e._s(e.assigning?"Asignando caso...":"Aceptar caso")+"\n      ")])],1)])])},gi=[],yi={setup(){const e=Object(s["ref"])(null),a=Object(s["ref"])(null),t=Object(s["ref"])(!0),i=Object(s["ref"])(!1),n=Object(s["ref"])(""),o=Object(s["ref"])(JSON.parse(localStorage.getItem("userInform"))||{}),c=Object(s["ref"])(""),r=Object(s["computed"])(()=>{if(!e.value)return!1;const a="1"===e.value.confirmaCaso&&(null===e.value.telEspecialista||""===e.value.telEspecialista||"undefined"===typeof e.value.telEspecialista)&&"0"===e.value.status;return!a&&(e.value.telEspecialista&&(e.value.telEspecialista,o.value.tel),!0)}),d=async()=>{try{if(t.value=!0,!c.value){const e=Object(s["getCurrentInstance"])(),a=e&&e.proxy&&e.proxy.$route?e.proxy.$route:null;c.value=a&&a.params&&a.params.id?a.params.id:""}if(!c.value)return n.value="Identificador de caso no válido.",void(t.value=!1);const i=Object(l["d"])(p,"casos",c.value),o=await Object(l["e"])(i);if(!o.exists())return n.value="El caso no existe.",void(t.value=!1);if(e.value={id:o.id,...o.data()},!e.value.telCliente)return void(t.value=!1);const r=Object(l["k"])(Object(l["b"])(p,"clientes"),Object(l["n"])("tel","==",e.value.telCliente)),d=await Object(l["f"])(r),u=d.docs.map(e=>e.data())[0];u&&(a.value={...u,comunidad:"number"===typeof u.comunidad&&ba[u.comunidad]?ba[u.comunidad]:u.comunidad||"",provincia:"number"===typeof u.provincia&&fa[u.provincia]?fa[u.provincia]:u.provincia||""})}catch(i){console.error(i),n.value="Error al cargar los datos del caso."}finally{t.value=!1}},u=async()=>{if(e.value&&!r.value)try{i.value=!0;const e=Object(l["d"])(p,"casos",c.value);await Object(l["m"])(e,{status:"1",telEspecialista:o.value.tel,presupuesto:""}),await d()}catch(a){console.error(a),n.value="Error al asignar el caso. Por favor, inténtalo de nuevo."}finally{i.value=!1}};return Object(s["onMounted"])(()=>{d()}),{cliente:a,loading:t,assigning:i,errorMessage:n,alreadyAssigned:r,assignCase:u}}},_i=yi,wi=Object(h["a"])(_i,hi,gi,!1,null,null,null),Oi=wi.exports,ji=function(){var e=this,a=e._self._c;return a("div",{staticClass:"row"},[a("h2",[e._v("Crear cuenta")]),a("div",{staticClass:"col-12"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.mail,expression:"mail"}],staticStyle:{width:"250px"},attrs:{placeholder:"correo",type:"text"},domProps:{value:e.mail},on:{input:function(a){a.target.composing||(e.mail=a.target.value)}}})]),a("div",{staticClass:"col-12 mt-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticStyle:{width:"250px"},attrs:{placeholder:"contraseña",type:"text"},domProps:{value:e.password},on:{input:function(a){a.target.composing||(e.password=a.target.value)}}})]),a("div",{staticClass:"col-12 mt-3"},[a("h3",[e._v("Selecciona las rutas visibles:")]),a("div",{staticClass:"row"},e._l(e.routes,(function(t,s){return a("div",{key:s,staticClass:"col-4 d-flex align-items-center",staticStyle:{"min-height":"40px"}},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.visibility,expression:"route.visibility"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.visibility)?e._i(t.visibility,null)>-1:t.visibility},on:{change:function(a){var s=t.visibility,i=a.target,n=!!i.checked;if(Array.isArray(s)){var o=null,l=e._i(s,o);i.checked?l<0&&e.$set(t,"visibility",s.concat([o])):l>-1&&e.$set(t,"visibility",s.slice(0,l).concat(s.slice(l+1)))}else e.$set(t,"visibility",n)}}}),a("label",{staticClass:"form-check-label",staticStyle:{"margin-left":"5px"}},[e._v(e._s(t.path))])])])})),0)]),a("div",{staticClass:"custom-select-wrapper col-md-6"},[a("div",{staticClass:"custom-select-wrapper col-md-12"},[a("label",{attrs:{for:""}},[e._v("Que especialidad puede ver aparte de sus casos")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.verEspe,expression:"verEspe"}],staticClass:"custom-select",staticStyle:{"min-height":"100px"},attrs:{multiple:""},on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.verEspe=a.target.multiple?t:t[0]}}},e._l(e.especialidades,(function(t){return a("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.nombre))])})),0)])]),a("div",{staticClass:"col-12 mt-3"},[a("button",{on:{click:e.register}},[e._v("Registro")])])])},ki=[],Ai={setup(){const e=Object(s["ref"])(""),a=Object(s["ref"])(""),t=Object(s["ref"])([]),i=Object(s["ref"])([]),n=async()=>{i.value=(await Object(l["f"])(Object(l["b"])(p,"especialidades"))).docs.map(e=>({id:e.id,...e.data()}))};Object(s["onMounted"])(()=>{n()});const o=Object(s["ref"])([{path:"dashboard",visibility:!1},{path:"alta-especialidades",visibility:!1},{path:"listado-notificaciones-chats",visibility:!1},{path:"listado-clientes",visibility:!1},{path:"listado-clientes-llamar",visibility:!1},{path:"listado-clientes-sin-abogado",visibility:!1},{path:"listado-clientes-sin-abogado-llamar",visibility:!1},{path:"listado-especialistas",visibility:!1},{path:"listado-despachos",visibility:!1},{path:"alta-clientes",visibility:!1},{path:"casos-sin-asignar",visibility:!1},{path:"clientes-sin-presupuesto",visibility:!1},{path:"clientes-presupuesto-pendiente",visibility:!1},{path:"presupuestos-aceptados",visibility:!1},{path:"alta-especialista",visibility:!1},{path:"alta-despacho",visibility:!1},{path:"mis-casos",visibility:!1},{path:"mis-casos-abogados",visibility:!1},{path:"seguimiento-casos",visibility:!1},{path:"citas",visibility:!1},{path:"calendario",visibility:!1},{path:"calendario-remesas",visibility:!1},{path:"historico-login",visibility:!1},{path:"curso",visibility:!1},{path:"alta-casos-valmer",visibility:!1},{path:"listado-casos-valmer",visibility:!1},{path:"mis-casos-valmer",visibility:!1}]),c=async()=>{const a=Object(l["k"])(Object(l["b"])(p,"especialistas"),Object(l["n"])("correo","==",e.value)),t=await Object(l["f"])(a);if(t.docs.length>0){const e=Object(l["d"])(p,"especialistas",t.docs[0].id);await Object(l["m"])(e,{userCreated:!0,especialidadesObs:i.value,routes:o.value})}else{const a=Object(l["k"])(Object(l["b"])(p,"despachos"),Object(l["n"])("correo","==",e.value)),t=await Object(l["f"])(a);if(t.docs.length>0){const e=Object(l["d"])(p,"despachos",t.docs[0].id);await Object(l["m"])(e,{userCreated:!0,especialidadesObs:i.value,routes:o.value})}else console.error("No se encontroooo")}},r=()=>{Object(b["a"])(Object(b["b"])(),e.value,a.value).then(e=>{console.log("Registro correcto",e),console.log("Rutas seleccionadas:",o.value),c()}).catch(e=>{console.error("Registro incorrecto",e)})};return{mail:e,password:a,register:r,routes:o,verEspe:t,especialidades:i}}},xi=Ai,Si=(t("91af"),Object(h["a"])(xi,ji,ki,!1,null,"20ec4d4a",null)),Di=Si.exports,Ei=function(){var e=this,a=e._self._c;return a("div",[a("Listados",{attrs:{items:e.filteredClientes,fields:e.fields,"current-page":e.currentPage},on:{"page-changed":e.handlePageChange},scopedSlots:e._u([{key:"filters",fn:function(){return[a("Formulario",{attrs:{filters:e.filterFields,formClass:"form-filters",fieldClass:"col-4",initialData:e.filters},on:{submit:e.handleFiltersSubmit,search:e.searchCases}}),a("b-button",{staticClass:"mt-2",attrs:{variant:"primary"},on:{click:e.searchCases}},[e._v("Buscar")]),a("div",{staticClass:"custom-select-wrapper col-md-3 pl-0 mb-3"},[a("label",{attrs:{for:""}},[e._v("Filtrar por especialidad:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.filterEspe,expression:"filterEspe"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.filterEspe=a.target.multiple?t:t[0]}}},[a("option",{attrs:{value:""}},[e._v("Todas")]),e._l(e.especialidades,(function(t){return a("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.nombre))])}))],2)])]},proxy:!0},{key:"tableActions",fn:function({data:t}){return[a("b-button",{staticClass:"mt-3 mx-3",attrs:{size:"sm"},on:{click:function(a){e.modalFactura=!0}}},[e._v("Crear factura")]),a("b-button",{staticClass:"mt-3 mx-3",attrs:{size:"sm"},on:{click:function(a){return e.$router.push({name:"UserProfile",params:{id:t.item.clienteId},query:{type:"cliente"}})}}},[e._v("Ver cliente")])]}}])}),a("b-modal",{attrs:{id:"budget-modal","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Realizar Factura\n    ")]},proxy:!0}]),model:{value:e.modalFactura,callback:function(a){e.modalFactura=a},expression:"modalFactura"}},[a("factura")],1)],1)},Pi=[],Fi={components:{BorrarCaso:It,Listados:dt,Formulario:Sa,Factura:oi},setup(){const e=Object(s["ref"])([]),a=Object(s["ref"])([]),t=Object(s["ref"])(""),i=Object(s["ref"])(!1),n=Object(s["ref"])(1),o=[{key:"dias",label:"Días alta de caso"},{key:"factura",label:"nº factura"},{key:"nombreEspe",label:"Especialidad"},{key:"nombreCliente",label:"Nombre Cliente"},{key:"apellidosCliente",label:"Apellidos Cliente"},{key:"telCliente",label:"Telefono Cliente"},{key:"actions",label:"Acciones"}],c=Object(s["ref"])({searchQuery:"",searchQueryName:"",searchQuerySurname:""}),r=Object(s["ref"])([{name:"searchQuery",label:"Filtrar por teléfono",type:"input",placeholder:"Buscar por teléfono",value:""}]),d=async()=>{(new Date).getTime();try{let t;t=c.value.searchQuery?Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("status","==","3"),Object(l["n"])("telCliente","==",c.value.searchQuery),Object(l["h"])(30)):Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("status","==","3"),Object(l["j"])("time","desc"),Object(l["h"])(30));const s=await Object(l["f"])(t);let i=s.docs.map(e=>({id:e.id,...e.data()}));c.value.searchQuery&&(i=i.filter(e=>e.telCliente.toLowerCase().includes(c.value.searchQuery.toLowerCase()))),await Promise.all(i.map(async e=>{const t=Object(l["k"])(Object(l["b"])(p,"clientes"),Object(l["n"])("tel","==",e.telCliente)),s=await Object(l["f"])(t),i=s.docs.map(e=>e.data())[0];e.nombreCliente=i?i.nombre:"N/A";const n=a.value.find(a=>a.id===e.especialidad);e.nombreEspe=n.nombre,e.apellidosCliente=i?i.apellidos:"N/A",e.clienteId=i?i.id:"N/A",e.correo=i?i.correo:"N/A",e.comunidadCliente=i?ba[i.comunidad]:"N/A",e.provinciaCliente=i?fa[i.provincia]:"N/A",e.observaciones=i?i.observaciones:"N/A",e.time=e.presupuestoAceptado?e.presupuestoAceptado:1723068e6,e.factura=e.id;const o=new Date(e.time),c=new Date,r=c-o,d=Math.floor(r/864e5);e.dias=d})),i=i.sort((e,a)=>parseFloat(e.time)-parseFloat(a.time)),e.value=i}catch(t){console.error("Error al buscar casos:",t)}},u=Object(s["computed"])(()=>{let a=e.value;return""!=t.value&&(a=a.filter(e=>e.especialidad===t.value)),c.value.searchQuery||c.value.searchQueryName||c.value.searchQuerySurname?(c.value.searchQuery?a=a.filter(e=>e.telCliente.toLowerCase().includes(c.value.searchQuery.toLowerCase())):c.value.searchQueryName?a=a.filter(e=>e.nombreCliente.toLowerCase().includes(c.value.searchQueryName.toLowerCase())):c.value.searchQuerySurname&&(a=a.filter(e=>e.apellidosCliente.toLowerCase().includes(c.value.searchQuerySurname.toLowerCase()))),a.sort((e,a)=>parseFloat(a.time)-parseFloat(e.time))):a.sort((e,a)=>parseFloat(a.time)-parseFloat(e.time))}),m=async()=>{a.value=(await Object(l["f"])(Object(l["b"])(p,"especialidades"))).docs.map(e=>({id:e.id,...e.data()}))},v=e=>{n.value=parseInt(e),b()},b=()=>{const e={filters:{},currentPage:n.value};r.value.forEach(a=>{e.filters[a.name]=a.value}),localStorage.setItem("presupuestosAceptadosState",JSON.stringify(e))},f=()=>{const e=localStorage.getItem("presupuestosAceptadosState");if(e){const a=JSON.parse(e);a.filters&&(r.value.forEach(e=>{e.value=a.filters[e.name]||""}),c.value={searchQuery:a.filters.searchQuery||"",searchQueryName:a.filters.searchQueryName||"",searchQuerySurname:a.filters.searchQuerySurname||""},a.currentPage&&(n.value=parseInt(a.currentPage))),d()}else d()};Object(s["watch"])(c,()=>{b()},{deep:!0}),Object(s["watch"])(n,()=>{b()});const C=e=>{"Enter"===e.key&&d()};Object(s["onMounted"])(()=>{m(),f(),window.addEventListener("keyup",C)}),Object(s["onBeforeUnmount"])(()=>{b(),window.removeEventListener("keyup",C)});const h=e=>{Object.assign(c.value,e),r.value.forEach(a=>{a.value=e[a.name]||""}),b()};return{fields:o,filterFields:r,handleFiltersSubmit:h,casos:e,filteredClientes:u,especialidades:a,filterEspe:t,modalFactura:i,currentPage:n,handlePageChange:v,searchCases:d,filters:c}}},Ni=Fi,Ii=Object(h["a"])(Ni,Ei,Pi,!1,null,null,null),Li=Ii.exports,Ti=function(){var e=this,a=e._self._c;return a("div",[a("Listados",{attrs:{items:e.filteredClientes,fields:e.fields,"current-page":e.currentPage,"row-class":e.rowClass},on:{"page-changed":e.handlePageChange},scopedSlots:e._u([{key:"filters",fn:function(){return[a("Formulario",{attrs:{filters:e.filterFields,formClass:"form-filters",fieldClass:"col-4"},on:{submit:e.handleFiltersSubmit}})]},proxy:!0},{key:"tableActions",fn:function({data:t}){return[a("b-button",{staticClass:"mt-3 mx-3",attrs:{size:"sm",variant:"info"},on:{click:function(a){return e.$router.push({name:"UserProfile",params:{id:t.item.clienteId},query:{type:"cliente"}})}}},[a("b-icon",{attrs:{icon:"eye",variant:"white"}})],1)]}}])})],1)},Qi=[],Mi={components:{BorrarCaso:It,Listados:dt,Formulario:Sa},setup(){const e=Object(s["ref"])([]),a=Object(s["ref"])([]),t=Object(s["ref"])(""),i=Object(s["ref"])({}),n=Object(s["ref"])(1),o=[{key:"dias",label:"Días alta de caso"},{key:"factura",label:"nº factura"},{key:"nombreCliente",label:"Nombre Cliente"},{key:"apellidosCliente",label:"Apellidos Cliente"},{key:"telCliente",label:"Telefono Cliente"},{key:"actions",label:"Acciones"}],c=Object(s["ref"])({searchQuery:"",searchQueryName:"",searchQuerySurname:""}),r=[{name:"searchQuery",label:"Filtrar por teléfono",type:"input",placeholder:"Buscar por teléfono"},{name:"searchQueryName",label:"Filtrar por nombre",type:"input",placeholder:"Buscar por nombre"},{name:"searchQuerySurname",label:"Filtrar por apellidos",type:"input",placeholder:"Buscar por apellidos"}],d=async()=>{try{const t=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("status","==","3"),Object(l["n"])("telEspecialista","==",i.value.tel)),s=await Object(l["f"])(t);let n=s.docs.map(e=>({id:e.id,...e.data()}));await Promise.all(n.map(async e=>{const t=Object(l["k"])(Object(l["b"])(p,"clientes"),Object(l["n"])("tel","==",e.telCliente)),s=await Object(l["f"])(t);let i=s.docs.map(e=>({id:e.id,...e.data()}));const n=i[0];e.nombreCliente=n?n.nombre:"N/A",e.clienteId=n?n.id:"N/A";const o=a.value.find(a=>a.id===e.especialidad);e.nombreEspe=o.nombre,e.apellidosCliente=n?n.apellidos:"N/A",e.correo=n?n.correo:"N/A",e.comunidadCliente=n?ba[n.comunidad]:"N/A",e.provinciaCliente=n?fa[n.provincia]:"N/A",e.observaciones=n?n.observaciones:"N/A",e.time=e.presupuestoAceptado?e.presupuestoAceptado:1723068e6,e.factura=e.id;const c=new Date(e.time),r=new Date,d=r-c,u=Math.floor(d/864e5);e.dias=u,e.estadoInforme=e.especialista&&e.especialista.informeEntregado?"Entregado":"Pendiente"})),n=n.sort((e,a)=>parseFloat(e.time)-parseFloat(a.time)),e.value=n}catch(t){console.error("Error al buscar casos:",t)}},u=Object(s["computed"])(()=>{let a=e.value;return""!=t.value&&(a=a.filter(e=>e.especialidad===t.value)),c.value.searchQuery||c.value.searchQueryName||c.value.searchQuerySurname?(c.value.searchQuery?a=a.filter(e=>e.telCliente.toLowerCase().includes(c.value.searchQuery.toLowerCase())):c.value.searchQueryName?a=a.filter(e=>e.nombreCliente.toLowerCase().includes(c.value.searchQueryName.toLowerCase())):c.value.searchQuerySurname&&(a=a.filter(e=>e.apellidosCliente.toLowerCase().includes(c.value.searchQuerySurname.toLowerCase()))),a.sort((e,a)=>parseFloat(a.time)-parseFloat(e.time))):a.sort((e,a)=>parseFloat(a.time)-parseFloat(e.time))}),m=async()=>{a.value=(await Object(l["f"])(Object(l["b"])(p,"especialidades"))).docs.map(e=>({id:e.id,...e.data()}))},v=()=>{const e={filters:{},order:order.value,currentPage:n.value};r.value.forEach(a=>{e.filters[a.name]=a.value}),localStorage.setItem("listadoMisCasos",JSON.stringify(e))},b=e=>{n.value=parseInt(e),v()};Object(s["onMounted"])(()=>{i.value=JSON.parse(localStorage.getItem("userInform")),d(),m()});const f=e=>{Object.assign(c.value,e)},C=(e,a)=>e&&e.especialista&&e.especialista.informeEntregado?"informe-entregado":"";return{fields:o,filterFields:r,handleFiltersSubmit:f,casos:e,filteredClientes:u,filterEspe:t,especialidades:a,handlePageChange:b,currentPage:n,rowClass:C}}},$i=Mi,Bi=Object(h["a"])($i,Ti,Qi,!1,null,null,null),Vi=Bi.exports,zi=function(){var e=this,a=e._self._c;return a("div",[a("Listados",{attrs:{items:e.filteredClientes,fields:e.fields,"current-page":e.currentPage},on:{"page-changed":e.handlePageChange},scopedSlots:e._u([{key:"filters",fn:function(){return[a("Formulario",{attrs:{filters:e.filterFields,formClass:"form-filters",fieldClass:"col-4"},on:{submit:e.handleFiltersSubmit}})]},proxy:!0},{key:"tableActions",fn:function({data:t}){return[a("b-button",{staticClass:"mt-3 mx-3",attrs:{size:"sm",variant:"info"},on:{click:function(a){return e.$router.push({name:"UserProfile",params:{id:t.item.clienteId},query:{type:"cliente"}})}}},[a("b-icon",{attrs:{icon:"eye",variant:"white"}})],1)]}}])})],1)},Ri=[],Ji={components:{BorrarCaso:It,Listados:dt,Formulario:Sa},setup(){const e=Object(s["ref"])([]),a=Object(s["ref"])([]),t=Object(s["ref"])(""),i=Object(s["ref"])({}),n=Object(s["ref"])(1),o=[{key:"dias",label:"Días alta de caso"},{key:"nombreCliente",label:"Nombre Cliente"},{key:"apellidosCliente",label:"Apellidos Cliente"},{key:"telCliente",label:"Telefono Cliente"},{key:"actions",label:"Acciones"}],c=Object(s["ref"])({searchQuery:"",searchQueryName:"",searchQuerySurname:""}),r=[{name:"searchQuery",label:"Filtrar por teléfono",type:"input",placeholder:"Buscar por teléfono"},{name:"searchQueryName",label:"Filtrar por nombre",type:"input",placeholder:"Buscar por nombre"},{name:"searchQuerySurname",label:"Filtrar por apellidos",type:"input",placeholder:"Buscar por apellidos"}],d=async()=>{try{const t=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("presupuestoAceptadoAbogado","==","1"),Object(l["n"])("idDespacho","==",i.value.id)),s=await Object(l["f"])(t);let n=s.docs.map(e=>({id:e.id,...e.data()}));await Promise.all(n.map(async e=>{const t=Object(l["k"])(Object(l["b"])(p,"clientes"),Object(l["n"])("tel","==",e.telCliente)),s=await Object(l["f"])(t);let i=s.docs.map(e=>({id:e.id,...e.data()}));const n=i[0];e.nombreCliente=n?n.nombre:"N/A",e.clienteId=n?n.id:"N/A";const o=a.value.find(a=>a.id===e.especialidad);e.nombreEspe=o.nombre,e.apellidosCliente=n?n.apellidos:"N/A",e.correo=n?n.correo:"N/A",e.comunidadCliente=n?ba[n.comunidad]:"N/A",e.provinciaCliente=n?fa[n.provincia]:"N/A",e.observaciones=n?n.observaciones:"N/A",e.time=e.presupuestoAceptado?e.presupuestoAceptado:1723068e6,e.factura=e.id;const c=new Date(e.time),r=new Date,d=r-c,u=Math.floor(d/864e5);e.dias=u})),n=n.sort((e,a)=>parseFloat(e.time)-parseFloat(a.time)),e.value=n}catch(t){console.error("Error al buscar casos:",t)}},u=Object(s["computed"])(()=>{let a=e.value;return""!=t.value&&(a=a.filter(e=>e.especialidad===t.value)),c.value.searchQuery||c.value.searchQueryName||c.value.searchQuerySurname?(c.value.searchQuery?a=a.filter(e=>e.telCliente.toLowerCase().includes(c.value.searchQuery.toLowerCase())):c.value.searchQueryName?a=a.filter(e=>e.nombreCliente.toLowerCase().includes(c.value.searchQueryName.toLowerCase())):c.value.searchQuerySurname&&(a=a.filter(e=>e.apellidosCliente.toLowerCase().includes(c.value.searchQuerySurname.toLowerCase()))),a.sort((e,a)=>parseFloat(a.time)-parseFloat(e.time))):a.sort((e,a)=>parseFloat(a.time)-parseFloat(e.time))}),m=async()=>{a.value=(await Object(l["f"])(Object(l["b"])(p,"especialidades"))).docs.map(e=>({id:e.id,...e.data()}))},v=()=>{const e={filters:{},order:order.value,currentPage:n.value};r.value.forEach(a=>{e.filters[a.name]=a.value}),localStorage.setItem("listadoMisCasos",JSON.stringify(e))},b=e=>{n.value=parseInt(e),v()};Object(s["onMounted"])(()=>{i.value=JSON.parse(localStorage.getItem("userInform")),d(),m()});const f=e=>{Object.assign(c.value,e)};return{fields:o,filterFields:r,handleFiltersSubmit:f,casos:e,filteredClientes:u,filterEspe:t,especialidades:a,handlePageChange:b,currentPage:n}}},qi=Ji,Ui=Object(h["a"])(qi,zi,Ri,!1,null,null,null),Hi=Ui.exports,Wi=function(){var e=this,a=e._self._c;return a("div",[a("Listados",{attrs:{items:e.filteredClientes,fields:e.fields,"current-page":e.currentPage},on:{"page-changed":e.handlePageChange},scopedSlots:e._u([{key:"filters",fn:function(){return[a("Formulario",{attrs:{filters:e.filterFields,formClass:"form-filters",fieldClass:"col-4"},on:{submit:e.handleFiltersSubmit}})]},proxy:!0},{key:"tableActions",fn:function({data:t}){return[a("b-button",{staticClass:"mt-3 mx-3",attrs:{size:"sm",variant:"info"},on:{click:function(a){return e.$router.push({name:"UserProfile",params:{id:t.item.clienteId},query:{type:"cliente"}})}}},[a("b-icon",{attrs:{icon:"eye",variant:"white"}})],1)]}}])})],1)},Gi=[],Yi={components:{Listados:dt,Formulario:Sa},setup(){const e=Object(s["ref"])(1),a=Object(s["ref"])([]),t=Object(s["ref"])([]),i=Object(s["ref"])({}),n=(Object(s["ref"])([]),[{key:"dias",label:"Días alta de caso"},{key:"factura",label:"nº factura"},{key:"nombreCliente",label:"Nombre Cliente"},{key:"apellidosCliente",label:"Apellidos Cliente"},{key:"telCliente",label:"Telefono Cliente"},{key:"actions",label:"Acciones"}]),o=Object(s["ref"])({searchQuery:"",searchQueryName:"",searchQuerySurname:""}),c=[{name:"searchQuery",label:"Filtrar por teléfono",type:"input",placeholder:"Buscar por teléfono"},{name:"searchQueryName",label:"Filtrar por nombre",type:"input",placeholder:"Buscar por nombre"},{name:"searchQuerySurname",label:"Filtrar por apellidos",type:"input",placeholder:"Buscar por apellidos"}],r=async e=>{try{let s=[];for(const a of e){console.log("Especialidad",a);const e=Object(l["b"])(p,"casos"),t=Object(l["k"])(e,Object(l["n"])("status","==","3"),Object(l["n"])("especialidad","==",a.id)),i=await Object(l["f"])(t);i.forEach(e=>{s.push({id:e.id,...e.data()})})}await Promise.all(s.map(async e=>{const a=Object(l["k"])(Object(l["b"])(p,"clientes"),Object(l["n"])("tel","==",e.telCliente)),s=await Object(l["f"])(a);let i=s.docs.map(e=>({id:e.id,...e.data()}));const n=i[0];e.nombreCliente=n?n.nombre:"N/A",e.clienteId=n?n.id:"N/A";const o=t.value.find(a=>a.id===e.especialidad);e.nombreEspe=o.nombre,e.apellidosCliente=n?n.apellidos:"N/A",e.correo=n?n.correo:"N/A",e.comunidadCliente=n?ba[n.comunidad]:"N/A",e.provinciaCliente=n?fa[n.provincia]:"N/A",e.observaciones=n?n.observaciones:"N/A",e.time=e.presupuestoAceptado?e.presupuestoAceptado:1723068e6,e.factura=e.id;const c=new Date(e.time),r=new Date,d=r-c,u=Math.floor(d/864e5);e.dias=u})),s=s.sort((e,a)=>parseFloat(e.time)-parseFloat(a.time)),a.value=s}catch(s){console.error("Error al buscar casos:",s)}},d=Object(s["computed"])(()=>{let e=[];return o.value.searchQuery||o.value.searchQueryName||o.value.searchQuerySurname?(o.value.searchQuery?e=a.value.filter(e=>e.telCliente.toLowerCase().includes(o.value.searchQuery.toLowerCase())):o.value.searchQueryName?e=a.value.filter(e=>e.nombreCliente.toLowerCase().includes(o.value.searchQueryName.toLowerCase())):o.value.searchQuerySurname&&(e=a.value.filter(e=>e.apellidosCliente.toLowerCase().includes(o.value.searchQuerySurname.toLowerCase()))),e.sort((e,a)=>parseFloat(a.time)-parseFloat(e.time))):(e=a.value,e.sort((e,a)=>parseFloat(a.time)-parseFloat(e.time)))}),u=async()=>{t.value=(await Object(l["f"])(Object(l["b"])(p,"especialidades"))).docs.map(e=>({id:e.id,...e.data()}))};Object(s["onMounted"])(()=>{i.value=JSON.parse(localStorage.getItem("userInform")),r(i.value.especialidadesObs),u()});const m=e=>{Object.assign(o.value,e)},v=a=>{e.value=parseInt(a)};return{currentPage:e,handlePageChange:v,fields:n,filterFields:c,handleFiltersSubmit:m,casos:a,fields:n,filteredClientes:d}}},Ki=Yi,Zi=Object(h["a"])(Ki,Wi,Gi,!1,null,null,null),Xi=Zi.exports,en=function(){var e=this,a=e._self._c;return a("div",[a("Listados",{attrs:{items:e.filteredClientes,fields:e.fields,"current-page":e.currentPage},on:{"page-changed":e.handlePageChange},scopedSlots:e._u([{key:"filters",fn:function(){return[a("Formulario",{attrs:{filters:e.filterFields,formClass:"form-filters",fieldClass:"col-4",initialData:e.filters},on:{submit:e.handleFiltersSubmit,search:e.searchCases}}),a("b-button",{staticClass:"mt-2",attrs:{variant:"primary"},on:{click:e.searchCases}},[e._v("Buscar")])]},proxy:!0},{key:"tableActions",fn:function({data:t}){return[a("b-button",{staticClass:"mt-3 mx-3",attrs:{size:"sm",variant:"success"},on:{click:function(a){return e.openVincularAbogadoModal(t.item)}}},[e._v("Vincular Abogado")]),t.item.clienteId?a("b-button",{staticClass:"mt-3 mx-3",attrs:{size:"sm"},on:{click:function(a){return e.$router.push({name:"UserProfile",params:{id:t.item.clienteId},query:{type:"cliente"}})}}},[e._v("Ver cliente")]):e._e()]}}])}),a("b-modal",{attrs:{id:"budget-modal","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Realizar Factura\n    ")]},proxy:!0}]),model:{value:e.modalFactura,callback:function(a){e.modalFactura=a},expression:"modalFactura"}},[a("factura")],1),a("b-modal",{attrs:{id:"vincular-abogado-modal","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Vincular Abogado\n    ")]},proxy:!0}]),model:{value:e.modalVincularAbogado,callback:function(a){e.modalVincularAbogado=a},expression:"modalVincularAbogado"}},[a("div",{staticClass:"text-center"},[e.casoSeleccionado?a("p",[e._v("Vincular abogado al caso "+e._s(e.casoSeleccionado.nombreCliente+" "+e.casoSeleccionado.apellidosCliente))]):e._e(),a("div",{staticClass:"custom-select-wrapper col-md-12 mt-4"},[a("label",{attrs:{for:""}},[e._v("Listado de Abogados")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.abogadoSelect,expression:"abogadoSelect"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.abogadoSelect=a.target.multiple?t:t[0]}}},e._l(e.despachos,(function(t){return a("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.nombre+" "+t.tel))])})),0)]),a("b-button",{staticClass:"mt-3 mx-3",attrs:{variant:"success"},on:{click:e.vincularAbogado}},[e._v("Vincular Abogado")])],1)])],1)},an=[],tn={components:{BorrarCaso:It,Listados:dt,Formulario:Sa,Factura:oi},setup(){const e=Object(s["ref"])([]),a=Object(s["ref"])([]),t=Object(s["ref"])(!1),i=Object(s["ref"])(1),n=Object(s["ref"])(!1),o=Object(s["ref"])(null),c=Object(s["ref"])([]),r=Object(s["ref"])(null),d=[{key:"factura",label:"nº factura"},{key:"nombreEspe",label:"Especialidad"},{key:"nombreCliente",label:"Nombre Cliente"},{key:"apellidosCliente",label:"Apellidos Cliente"},{key:"telCliente",label:"Telefono Cliente"},{key:"actions",label:"Acciones"}],u=Object(s["ref"])({searchQuery:"",searchQueryName:"",searchQuerySurname:""}),m=Object(s["ref"])([{name:"searchQuery",label:"Filtrar por teléfono",type:"input",placeholder:"Buscar por teléfono",value:""}]),v=e=>{o.value=e,n.value=!0},b=async()=>{(new Date).getTime();try{let t;t=u.value.searchQuery?Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("statusAbogado","==","0"),Object(l["n"])("necesitaAbogado","==","1"),Object(l["n"])("telCliente","==",u.value.searchQuery),Object(l["h"])(30)):Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("statusAbogado","==","0"),Object(l["n"])("necesitaAbogado","==","1"),Object(l["j"])("time","desc"),Object(l["h"])(30));const s=await Object(l["f"])(t);let i=s.docs.map(e=>({id:e.id,...e.data()}));u.value.searchQuery&&(i=i.filter(e=>e.telCliente.toLowerCase().includes(u.value.searchQuery.toLowerCase()))),await Promise.all(i.map(async e=>{const t=Object(l["k"])(Object(l["b"])(p,"clientes"),Object(l["n"])("tel","==",e.telCliente)),s=await Object(l["f"])(t),i=s.docs.map(e=>e.data())[0];e.nombreCliente=i?i.nombre:"N/A";const n=a.value.find(a=>a.id===e.especialidad);e.nombreEspe=n.nombre,e.nombreEspe=n.nombre,e.apellidosCliente=i?i.apellidos:"N/A",e.clienteId=i?i.id:"N/A",e.correo=i?i.correo:"N/A",e.comunidadCliente=i?ba[i.comunidad]:"N/A",e.provinciaCliente=i?fa[i.provincia]:"N/A",e.observaciones=i?i.observaciones:"N/A",e.time=e.presupuestoAceptado?e.presupuestoAceptado:1723068e6,e.factura=e.id;const o=new Date(e.time),c=new Date,r=c-o,d=Math.floor(r/864e5);e.dias=d})),i=i.sort((e,a)=>parseFloat(e.time)-parseFloat(a.time)),e.value=i}catch(t){console.error("Error al buscar casos:",t)}},f=async()=>{try{const e=Object(l["k"])(Object(l["b"])(p,"despachos"),Object(l["n"])("colabora","==","1")),a=await Object(l["f"])(e);c.value=a.docs.map(e=>({id:e.id,...e.data()})),console.log("Despachos con routes:",c.value)}catch(e){console.error("Error al obtener despachos:",e)}},C=Object(s["computed"])(()=>{let a=e.value;return u.value.searchQuery||u.value.searchQueryName||u.value.searchQuerySurname?(u.value.searchQuery?a=a.filter(e=>e.telCliente.toLowerCase().includes(u.value.searchQuery.toLowerCase())):u.value.searchQueryName?a=a.filter(e=>e.nombreCliente.toLowerCase().includes(u.value.searchQueryName.toLowerCase())):u.value.searchQuerySurname&&(a=a.filter(e=>e.apellidosCliente.toLowerCase().includes(u.value.searchQuerySurname.toLowerCase()))),a.sort((e,a)=>parseFloat(a.time)-parseFloat(e.time))):a.sort((e,a)=>parseFloat(a.time)-parseFloat(e.time))}),h=async()=>{a.value=(await Object(l["f"])(Object(l["b"])(p,"especialidades"))).docs.map(e=>({id:e.id,...e.data()}))},g=e=>{i.value=parseInt(e),y()},y=()=>{const e={filters:{},currentPage:i.value};m.value.forEach(a=>{e.filters[a.name]=a.value}),localStorage.setItem("clientesSinAbogado",JSON.stringify(e))},_=()=>{const e=localStorage.getItem("clientesSinAbogado");if(e){const a=JSON.parse(e);a.filters&&(m.value.forEach(e=>{e.value=a.filters[e.name]||""}),u.value={searchQuery:a.filters.searchQuery||"",searchQueryName:a.filters.searchQueryName||"",searchQuerySurname:a.filters.searchQuerySurname||""},a.currentPage&&(i.value=parseInt(a.currentPage))),b()}else b()};Object(s["watch"])(u,()=>{y()},{deep:!0}),Object(s["watch"])(i,()=>{y()});const w=e=>{"Enter"===e.key&&b()};Object(s["onMounted"])(()=>{h(),_(),f(),window.addEventListener("keyup",w)}),Object(s["onBeforeUnmount"])(()=>{y(),window.removeEventListener("keyup",w)});const O=e=>{Object.assign(u.value,e),m.value.forEach(a=>{a.value=e[a.name]||""}),y()},j=async()=>{if(console.log("Vincular Abogado",r.value),o.value&&r.value){const e=Object(l["d"])(p,"casos",o.value.id);await Object(l["m"])(e,{idDespacho:r.value,statusAbogado:"1"}),await b(),n.value=!1,o.value=null,r.value=null}};return{fields:d,filterFields:m,handleFiltersSubmit:O,casos:e,filteredClientes:C,especialidades:a,modalFactura:t,currentPage:i,handlePageChange:g,searchCases:b,filters:u,openVincularAbogadoModal:v,vincularAbogado:j,modalVincularAbogado:n,casoSeleccionado:o,despachos:c,abogadoSelect:r}}},sn=tn,nn=Object(h["a"])(sn,en,an,!1,null,null,null),on=nn.exports,ln=function(){var e=this,a=e._self._c;return a("div",[a("Listados",{attrs:{items:e.filteredClientes,fields:e.fields,"current-page":e.currentPage},on:{"page-changed":e.handlePageChange},scopedSlots:e._u([{key:"filters",fn:function(){return[a("Formulario",{attrs:{filters:e.filterFields,formClass:"form-filters",fieldClass:"col-4",initialData:e.filters},on:{submit:e.handleFiltersSubmit,search:e.searchCases}}),a("b-button",{staticClass:"mt-2",attrs:{variant:"primary"},on:{click:e.searchCases}},[e._v("Buscar")])]},proxy:!0},{key:"tableActions",fn:function({data:t}){return[a("b-button",{staticClass:"mt-3 mx-3",attrs:{size:"sm"},on:{click:function(a){return e.confirmarPresupuesto(t.item)}}},[e._v("Viable juridicamente")]),a("b-button",{staticClass:"mt-3 mx-3",attrs:{size:"sm",variant:"danger"},on:{click:function(a){return e.noViableJuridicamente(t.item)}}},[e._v("No viable jurídicamente")]),t.item.clienteId?a("b-button",{staticClass:"mt-3 mx-3",attrs:{size:"sm"},on:{click:function(a){return e.$router.push({name:"UserProfile",params:{id:t.item.clienteId},query:{type:"cliente"}})}}},[e._v("Ver cliente")]):e._e()]}}])}),a("b-modal",{attrs:{id:"budget-modal","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Realizar Factura\n    ")]},proxy:!0}]),model:{value:e.modalFactura,callback:function(a){e.modalFactura=a},expression:"modalFactura"}},[a("factura")],1),a("b-modal",{attrs:{id:"confirmar-presupuesto-modal","hide-footer":"",size:"lg"},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Viable Jurídicamente - Seleccionar Presupuesto\n    ")]},proxy:!0}]),model:{value:e.showConfirmarPresupuesto,callback:function(a){e.showConfirmarPresupuesto=a},expression:"showConfirmarPresupuesto"}},[e.casoSeleccionado?a("div",[a("div",{staticClass:"mb-3"},[a("strong",[e._v("Cliente:")]),e._v(" "+e._s(e.casoSeleccionado.nombreCliente)+" "+e._s(e.casoSeleccionado.apellidosCliente)),a("br"),a("strong",[e._v("Correo:")]),e._v(" "+e._s(e.casoSeleccionado.correo)),a("br"),a("strong",[e._v("Teléfono:")]),e._v(" "+e._s(e.casoSeleccionado.telCliente)+"\n      ")]),a("div",{staticClass:"mb-3"},[a("label",{staticClass:"font-weight-bold"},[e._v("Selecciona el presupuesto a enviar:")]),a("div",{staticClass:"list-group mt-2"},e._l(e.presupuestosPDF,(function(t){return a("button",{key:t.id,staticClass:"list-group-item list-group-item-action",class:{active:e.presupuestoSeleccionado===t.id},attrs:{type:"button"},on:{click:function(a){e.presupuestoSeleccionado=t.id}}},[e._v("\n            "+e._s(t.nombre)+"\n          ")])})),0)]),a("div",{staticClass:"mt-4 text-center"},[e.loadingEnvio?a("b-spinner",{attrs:{label:"Enviando..."}}):[a("b-button",{staticClass:"mr-2",attrs:{variant:"success",disabled:!e.presupuestoSeleccionado},on:{click:e.confirmarPresupuestoFinal}},[e._v("\n            Enviar Presupuesto\n          ")]),a("b-button",{attrs:{variant:"secondary"},on:{click:function(a){e.showConfirmarPresupuesto=!1}}},[e._v("\n            Cancelar\n          ")])]],2)]):e._e()]),a("b-modal",{attrs:{id:"no-viable-juridicamente-modal","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Confirmar No Viable Jurídicamente\n    ")]},proxy:!0}]),model:{value:e.showNoViableJuridicamente,callback:function(a){e.showNoViableJuridicamente=a},expression:"showNoViableJuridicamente"}},[a("div",{staticClass:"text-center"},[a("p",[e._v("¿Estás seguro de que quieres marcar este caso como no viable jurídicamente?")]),a("div",{staticClass:"mt-3"},[a("b-button",{staticClass:"mr-2",attrs:{variant:"danger"},on:{click:e.noViableJuridicamenteFinal}},[e._v("\n          Confirmar\n        ")]),a("b-button",{attrs:{variant:"secondary"},on:{click:function(a){e.showNoViableJuridicamente=!1}}},[e._v("\n          Cancelar\n        ")])],1)])])],1)},cn=[],rn={components:{BorrarCaso:It,Listados:dt,Formulario:Sa,Factura:oi},setup(){const e=Object(s["ref"])([]),a=["8t9rn2kRiHRANdZ7M8zG","Vhqr0N6hyqVctKtYtc8i"],t=Object(s["ref"])(!1),i=Object(s["ref"])(1),n=Object(s["ref"])(!1),o=Object(s["ref"])(!1),c=Object(s["ref"])(null),r=Object(s["ref"])(JSON.parse(localStorage.getItem("userInform"))),d=Object(s["ref"])(null),u=Object(s["ref"])(!1),m=Object(s["ref"])([{id:1,nombre:"Incapacidad desde Denegación",archivo:"1. HOJA DE ENCARGO - INCAPACIDAD DESDE DENEGACION - NGLEX.pdf"},{id:2,nombre:"Discapacidad desde Denegación",archivo:"2. HOJA DE ENCARGO - DISCAPACIDAD DESDE DENEGACION - NGLEX.pdf"},{id:3,nombre:"Responsabilidad Civil (Accidente)",archivo:"3. HOJA DE ENCARGO - RESPONSABILIDAD CIVIL (ACCIDENTE) - NGLEX.pdf"},{id:4,nombre:"Responsabilidad Civil (Caída)",archivo:"4. HOJA DE ENCARGO - RESPONSABILIDAD CIVIL (CAIDA) - NGLEX.pdf"},{id:5,nombre:"Discapacidad desde Solicitud",archivo:"5. HOJA DE ENCARGO - DISCAPACIDAD DESDE SOLICITUD - NGLEX.pdf"},{id:6,nombre:"Incapacidad desde Solicitud",archivo:"6. HOJA DE ENCARGO - INCAPACIDAD DESDE SOLICITUD - NGLEX.pdf"},{id:7,nombre:"Impugnación de Alta",archivo:"7. HOJA DE ENCARGO - IMPUGNACIÓN DE ALTA- NGLEX.pdf"}]),v=[{key:"dias",label:"Días sin llamar"},{key:"nombreEspe",label:"Especialidad"},{key:"nombreCliente",label:"Nombre Cliente"},{key:"apellidosCliente",label:"Apellidos Cliente"},{key:"telCliente",label:"Telefono Cliente"},{key:"actions",label:"Acciones"}],b=Object(s["ref"])({searchQuery:"",searchQueryName:"",searchQuerySurname:""}),f=Object(s["ref"])([{name:"searchQuery",label:"Filtrar por teléfono",type:"input",placeholder:"Buscar por teléfono",value:""}]),C=async()=>{(new Date).getTime();try{let t=[];if("gcnabogado@gmail.com"===r.value.correo)if(b.value.searchQuery){const e=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("statusAbogado","==","1"),Object(l["n"])("necesitaAbogado","==","1"),Object(l["n"])("telCliente","==",b.value.searchQuery),Object(l["n"])("idDespacho","==",r.value.id),Object(l["h"])(30)),a=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("necesitaAbogado","==","1"),Object(l["n"])("telCliente","==",b.value.searchQuery),Object(l["n"])("idDespacho","==",r.value.id),Object(l["h"])(30)),[s,i]=await Promise.all([Object(l["f"])(e),Object(l["f"])(a)]),n=s.docs.map(e=>({id:e.id,...e.data()})),o=i.docs.map(e=>({id:e.id,...e.data()})).filter(e=>!e.statusAbogado);t=[...n,...o]}else{const e=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("statusAbogado","==","1"),Object(l["n"])("necesitaAbogado","==","1"),Object(l["n"])("idDespacho","==",r.value.id),Object(l["j"])("time","desc"),Object(l["h"])(30)),a=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("necesitaAbogado","==","1"),Object(l["n"])("idDespacho","==",r.value.id),Object(l["j"])("time","desc"),Object(l["h"])(30)),[s,i]=await Promise.all([Object(l["f"])(e),Object(l["f"])(a)]),n=s.docs.map(e=>({id:e.id,...e.data()})),o=i.docs.map(e=>({id:e.id,...e.data()})).filter(e=>!e.statusAbogado);t=[...n,...o]}else if(b.value.searchQuery){const e=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("statusAbogado","==","1"),Object(l["n"])("necesitaAbogado","==","1"),Object(l["n"])("telCliente","==",b.value.searchQuery),Object(l["n"])("idDespacho","==",r.value.id),Object(l["h"])(30)),[a,s]=await Promise.all([Object(l["f"])(e)]),i=a.docs.map(e=>({id:e.id,...e.data()})),n=s.docs.map(e=>({id:e.id,...e.data()})).filter(e=>!e.statusAbogado);t=[...i,...n]}else{const e=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("statusAbogado","==","1"),Object(l["n"])("necesitaAbogado","==","1"),Object(l["n"])("idDespacho","==",r.value.id),Object(l["j"])("time","desc"),Object(l["h"])(30)),a=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("necesitaAbogado","==","1"),Object(l["n"])("idDespacho","==",r.value.id),Object(l["j"])("time","desc"),Object(l["h"])(30)),[s,i]=await Promise.all([Object(l["f"])(e),Object(l["f"])(a)]),n=s.docs.map(e=>({id:e.id,...e.data()})),o=i.docs.map(e=>({id:e.id,...e.data()})).filter(e=>!e.statusAbogado);t=[...n,...o]}console.log(t),b.value.searchQuery&&(t=t.filter(e=>e.telCliente.toLowerCase().includes(b.value.searchQuery.toLowerCase()))),await Promise.all(t.map(async e=>{const t=Object(l["k"])(Object(l["b"])(p,"clientes"),Object(l["n"])("tel","==",e.telCliente)),s=await Object(l["f"])(t),i=s.docs.map(e=>e.data())[0];e.nombreCliente=i?i.nombre:"N/A";const n=a.value.find(a=>a.id===e.especialidad);e.nombreEspe=n?n.nombre:"N/A",e.apellidosCliente=i?i.apellidos:"N/A",e.clienteId=i?i.id:"N/A",e.correo=i?i.correo:"N/A",e.comunidadCliente=i?ba[i.comunidad]:"N/A",e.provinciaCliente=i?fa[i.provincia]:"N/A",e.observaciones=i?i.observaciones:"N/A",e.time=e.presupuestoEnviado?e.presupuestoEnviado:1723068e6,e.factura=e.id;const o=new Date(e.time),c=new Date,r=c-o,d=Math.floor(r/864e5);e.dias=e.presupuestoEnviado?d:0})),t="gcnabogado@gmail.com"===r.value.correo||"beafreire@gmail.com"===r.value.correo?t:t.filter(e=>e.nombreEspe&&!e.nombreEspe.toLowerCase().includes("praxis")),t=t.sort((e,a)=>parseFloat(e.time)-parseFloat(a.time)),e.value=t}catch(t){console.error("Error al buscar casos:",t)}},h=Object(s["computed"])(()=>{let a=e.value;return b.value.searchQuery||b.value.searchQueryName||b.value.searchQuerySurname?(b.value.searchQuery?a=a.filter(e=>e.telCliente.toLowerCase().includes(b.value.searchQuery.toLowerCase())):b.value.searchQueryName?a=a.filter(e=>e.nombreCliente.toLowerCase().includes(b.value.searchQueryName.toLowerCase())):b.value.searchQuerySurname&&(a=a.filter(e=>e.apellidosCliente.toLowerCase().includes(b.value.searchQuerySurname.toLowerCase()))),a.sort((e,a)=>parseFloat(e.dias)-parseFloat(a.dias))):a.sort((e,a)=>parseFloat(e.dias)-parseFloat(a.dias))}),g=async()=>{a.value=(await Object(l["f"])(Object(l["b"])(p,"especialidades"))).docs.map(e=>({id:e.id,...e.data()}))},y=e=>{i.value=parseInt(e),_()},_=()=>{const e={filters:{},currentPage:i.value};f.value.forEach(a=>{e.filters[a.name]=a.value}),localStorage.setItem("clientesSinAbogado",JSON.stringify(e))},w=()=>{const e=localStorage.getItem("clientesSinAbogado");if(e){const a=JSON.parse(e);a.filters&&(f.value.forEach(e=>{e.value=a.filters[e.name]||""}),b.value={searchQuery:a.filters.searchQuery||"",searchQueryName:a.filters.searchQueryName||"",searchQuerySurname:a.filters.searchQuerySurname||""},a.currentPage&&(i.value=parseInt(a.currentPage))),C()}else C()};Object(s["watch"])(b,()=>{_()},{deep:!0}),Object(s["watch"])(i,()=>{_()});const O=e=>{"Enter"===e.key&&C()};Object(s["onMounted"])(()=>{g(),w(),window.addEventListener("keyup",O)}),Object(s["onBeforeUnmount"])(()=>{_(),window.removeEventListener("keyup",O)});const j=e=>{Object.assign(b.value,e),f.value.forEach(a=>{a.value=e[a.name]||""}),_()},k=e=>{console.log(e),c.value=e,d.value=null,n.value=!0},A=async()=>{try{if(c.value&&d.value){u.value=!0;const e=m.value.find(e=>e.id===d.value);if(e&&c.value.correo&&"N/A"!==c.value.correo){const a=`${window.location.origin}/presupuestos/${encodeURIComponent(e.archivo)}`,t=await fetch(a);if(!t.ok)throw new Error("No se pudo cargar el PDF: "+t.status);const s=await t.blob(),i=new File([s],e.archivo,{type:"application/pdf"}),n=new FormData;n.append("to",c.value.correo),n.append("cc","nerea.abogada@gmail.com"),n.append("subject","Presupuesto - Hoja de Encargo"),n.append("text",`Estimado/a ${c.value.nombreCliente} ${c.value.apellidosCliente},\n\nAdjunto encontrará la hoja de encargo correspondiente a su caso.\n\nQuedamos a su disposición para cualquier consulta.\n\nUn saludo.`),n.append("file",i);const o=await fetch(li,{method:"POST",body:n}),l=await o.json();if(!l.success)throw new Error(l.error||"Error al enviar el email");console.log("Email enviado correctamente:",l.messageId)}console.log("casoSeleccionado.value",c.value);const a=Object(l["d"])(p,"casos",c.value.id);await Object(l["m"])(a,{statusAbogado:"2",viableJuridicamente:"1",viableJuridicamenteTime:(new Date).getTime(),presupuestoAbogadoEnviado:"0"}),await C(),n.value=!1,c.value=null,d.value=null}}catch(e){console.error("Error al confirmar presupuesto:",e),alert("Error: "+e.message)}finally{u.value=!1}},x=e=>{console.log(e),c.value=e,o.value=!0},S=async()=>{try{if(c.value){const e=Object(l["d"])(p,"casos",c.value.id);await Object(l["m"])(e,{statusAbogado:"4",viableJuridicamente:"0",presupuestoAbogadoEnviado:"0",idDespacho:r.value.id}),await C(),o.value=!1,c.value=null}}catch(e){console.error("Error al marcar como no viable jurídicamente:",e)}};return{fields:v,filterFields:f,handleFiltersSubmit:j,confirmarPresupuesto:k,confirmarPresupuestoFinal:A,showConfirmarPresupuesto:n,casos:e,filteredClientes:h,especialidades:a,modalFactura:t,currentPage:i,handlePageChange:y,searchCases:C,filters:b,showNoViableJuridicamente:o,noViableJuridicamenteFinal:S,noViableJuridicamente:x,presupuestosPDF:m,presupuestoSeleccionado:d,loadingEnvio:u,casoSeleccionado:c}}},dn=rn,un=Object(h["a"])(dn,ln,cn,!1,null,null,null),pn=un.exports,mn=function(){var e=this,a=e._self._c;return a("div",[a("Listados",{attrs:{items:e.filteredClientes,fields:e.fields,"current-page":e.currentPage},on:{"page-changed":e.handlePageChange},scopedSlots:e._u([{key:"filters",fn:function(){return[a("Formulario",{attrs:{filters:e.filterFields,formClass:"form-filters",fieldClass:"col-4",initialData:e.filters},on:{submit:e.handleFiltersSubmit,search:e.searchCases}}),a("b-button",{staticClass:"mt-2",attrs:{variant:"primary"},on:{click:e.searchCases}},[e._v("Buscar")])]},proxy:!0},{key:"tableActions",fn:function({data:t}){return[a("b-button",{staticClass:"mt-3 mx-3",attrs:{size:"sm"},on:{click:function(a){return e.openBudgetModal(t.item)}}},[e._v("Enviar presupuesto")]),t.item.clienteId?a("b-button",{staticClass:"mt-3 mx-3",attrs:{size:"sm"},on:{click:function(a){return e.$router.push({name:"UserProfile",params:{id:t.item.clienteId},query:{type:"cliente"}})}}},[e._v("Ver cliente")]):e._e()]}}])}),a("b-modal",{attrs:{id:"confirmar-envio-modal","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Confirmar Envío de Presupuesto Abogado\n    ")]},proxy:!0}]),model:{value:e.showConfirmarEnvio,callback:function(a){e.showConfirmarEnvio=a},expression:"showConfirmarEnvio"}},[a("div",{staticClass:"text-center"},[a("p",[e._v("¿Estás seguro de que quieres marcar como enviado el presupuesto del abogado?")]),a("div",{staticClass:"mt-3"},[a("b-button",{staticClass:"mr-2",attrs:{variant:"success"},on:{click:e.confirmarEnvioFinal}},[e._v("\n          Confirmar\n        ")]),a("b-button",{attrs:{variant:"secondary"},on:{click:function(a){e.showConfirmarEnvio=!1}}},[e._v("\n          Cancelar\n        ")])],1)])]),a("b-modal",{attrs:{id:"budget-modal","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Enviar presupuesto\n    ")]},proxy:!0}]),model:{value:e.modalMail,callback:function(a){e.modalMail=a},expression:"modalMail"}},[a("form",{on:{submit:function(a){return a.preventDefault(),e.sendBudget.apply(null,arguments)}}},[e.caseWantSet?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-center mb-2"},[a("b-button",{on:{click:function(a){return e.updateCase()}}},[e._v("Correo enviado manualmente")])],1),a("div",{staticClass:"col-12 text-center mb-3"},[a("a",{attrs:{href:`https://wa.me/34${e.caseWantSet.telCliente}?text=${e.body}`,target:"_blank"}},[e._v("Abrir en WhatsApp")]),a("br")]),e.espePresupuesto.nombre?a("div",{staticClass:"col-12"},[e._v("\n          Nombre especialista: "+e._s(e.espePresupuesto.nombre+" "+e.espePresupuesto.apellidos)+"\n        ")]):e._e(),a("div",{staticClass:"col-12 mt-2"},[e._v("\n          Nombre cliente: "+e._s(e.caseWantSet.nombreCliente+" "+e.caseWantSet.apellidosCliente)+"\n        ")]),a("div",{staticClass:"col-12 mt-2"},[e._v("\n          Teléfono cliente: "+e._s(e.caseWantSet.telCliente)+"\n        ")]),a("div",{staticClass:"col-12 mt-2"},[e._v("\n          Correo cliente: "+e._s(e.caseWantSet.correo)+"\n        ")]),a("div",{staticClass:"col-12 mt-2"},[e._v("\n          Comunidad (Provincia): "+e._s(e.caseWantSet.comunidadCliente+"("+e.caseWantSet.provinciaCliente+")")+"\n        ")]),a("div",{staticClass:"col-12 mt-2"},[e._v("\n          Especialidad: "+e._s(e.caseWantSet.nombreEspe)+"\n        ")]),a("div",{staticClass:"col-12 mt-2 mb-3"},[e._v("\n          Observaciones: "+e._s(e.caseWantSet.observaciones)+"\n        ")])]):e._e(),a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.body,expression:"body"}],staticStyle:{width:"100%"},attrs:{placeholder:"Escribe el mensaje del presupuesto",rows:"6"},domProps:{value:e.body},on:{input:function(a){a.target.composing||(e.body=a.target.value)}}})]),a("div",[a("input",{attrs:{type:"file",accept:".pdf",multiple:""},on:{change:e.onFileChange}})]),a("div",{staticClass:"text-center mt-4"},[e.loading?a("b-spinner",{attrs:{label:"Spinning"}}):a("b-button",{attrs:{type:"submit"}},[e._v("Enviar")])],1)])])],1)},vn=[],bn={components:{Listados:dt,Formulario:Sa},setup(){const e=Object(s["ref"])([]),a=["8t9rn2kRiHRANdZ7M8zG","Vhqr0N6hyqVctKtYtc8i"],t=Object(s["ref"])(1),i=Object(s["ref"])(!1),n=Object(s["ref"])(null),o=(Object(s["ref"])(JSON.parse(localStorage.getItem("userInform"))),Object(s["ref"])(!1)),r=Object(s["ref"])(null),d=Object(s["ref"])(""),u=Object(s["ref"])(null),m=Object(s["ref"])(""),b=Object(s["ref"])(!1),f=[{key:"dias",label:"Días desde viable"},{key:"factura",label:"nº factura"},{key:"nombreEspe",label:"Especialidad"},{key:"nombreCliente",label:"Nombre Cliente"},{key:"apellidosCliente",label:"Apellidos Cliente"},{key:"telCliente",label:"Telefono Cliente"},{key:"actions",label:"Acciones"}],C=Object(s["ref"])({searchQuery:"",searchQueryName:"",searchQuerySurname:""}),h=Object(s["ref"])([{name:"searchQuery",label:"Filtrar por teléfono",type:"input",placeholder:"Buscar por teléfono",value:""}]),g=async()=>{try{const e=Object(l["k"])(Object(l["b"])(p,"especialistas"),Object(l["n"])("tel","==",r.value.telEspecialista)),a=await Object(l["f"])(e),t=a.docs.map(e=>({id:e.id,...e.data()}));m.value=t[0],console.log(m.value)}catch(e){console.error("Error al buscar especialista:",e)}},y=e=>{u.value=Array.from(e.target.files)},_=async()=>{for(const e of u.value){const a=Object(c["f"])(v,`casos/${r.value.id}/presupuesto/${e.name}`),t=Object(c["h"])(a,e);t.on("state_changed",a=>{const t=a.bytesTransferred/a.totalBytes*100;console.log(`Progreso de ${e.name}: ${t.toFixed(0)}%`)},a=>{console.error(`Error al subir el archivo "${e.name}":`,a.message)})}},w=async()=>{try{b.value=!0;const e=new FormData;if(e.append("to",r.value.correo),e.append("subject","Informe pericial"),e.append("text",d.value),u.value)for(const a of u.value)e.append("file",a);console.log(e),await fetch("https://test-perito.onrender.com/send-email",{method:"POST",body:e}),u.value&&await _(),await O(),d.value="",u.value=null,r.value=null,m.value=""}catch(e){console.error("Error al enviar el presupuesto:",e),alert("Hubo un error al enviar el presupuesto")}finally{b.value=!1}},O=async()=>{const e=Object(l["d"])(p,"casos",r.value.id);await Object(l["m"])(e,{status:"2",statusAbogado:"2",presupuestoAbogadoEnviado:"1",presupuestoAbogadoEnviadoTime:(new Date).getTime(),presupuestoEnviado:(new Date).getTime()}),await k(),o.value=!1},j=e=>{console.log("Open this modal",e),r.value=e,g(),o.value=!0},k=async()=>{try{let a=[];const t=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("viableJuridicamente","==","1"),Object(l["n"])("presupuestoAbogadoEnviado","==","0"),Object(l["n"])("necesitaAbogado","==","1"),Object(l["j"])("time","desc"),Object(l["h"])(50)),s=await Object(l["f"])(t);a=s.docs.map(e=>({id:e.id,...e.data()})),C.value.searchQuery&&(a=a.filter(e=>e.telCliente&&e.telCliente.toLowerCase().includes(C.value.searchQuery.toLowerCase()))),await Promise.all(a.map(async e=>{const a=Object(l["k"])(Object(l["b"])(p,"clientes"),Object(l["n"])("tel","==",e.telCliente)),t=await Object(l["f"])(a),s=t.docs.map(e=>e.data())[0];e.nombreCliente=s?s.nombre:"N/A",e.apellidosCliente=s?s.apellidos:"N/A",e.clienteId=s?s.id:"N/A",e.correo=s?s.correo:"N/A",e.comunidadCliente=s?ba[s.comunidad]:"N/A",e.provinciaCliente=s?fa[s.provincia]:"N/A",e.observaciones=s?s.observaciones:"N/A",e.pago=s?s.pago||"No":"N/A";const i=Object(l["k"])(Object(l["b"])(p,"especialidades"),Object(l["n"])("__name__","==",e.especialidad)),n=await Object(l["f"])(i),o=n.docs.map(e=>e.data())[0];e.nombreEspe=o?o.nombre:"N/A",e.factura=e.id;const c=e.viableJuridicamenteTime?new Date(e.viableJuridicamenteTime):new Date,r=new Date,d=r-c,u=Math.floor(d/864e5);e.dias=u})),a=a.sort((e,a)=>parseFloat(e.dias)-parseFloat(a.dias)),e.value=a}catch(a){console.error("Error al buscar casos:",a)}},A=Object(s["computed"])(()=>{let a=e.value;return C.value.searchQuery||C.value.searchQueryName||C.value.searchQuerySurname?(C.value.searchQuery?a=a.filter(e=>e.telCliente&&e.telCliente.toLowerCase().includes(C.value.searchQuery.toLowerCase())):C.value.searchQueryName?a=a.filter(e=>e.nombreCliente&&e.nombreCliente.toLowerCase().includes(C.value.searchQueryName.toLowerCase())):C.value.searchQuerySurname&&(a=a.filter(e=>e.apellidosCliente&&e.apellidosCliente.toLowerCase().includes(C.value.searchQuerySurname.toLowerCase()))),a.sort((e,a)=>parseFloat(e.dias)-parseFloat(e.dias))):a.sort((e,a)=>parseFloat(e.dias)-parseFloat(e.dias))}),x=e=>{t.value=parseInt(e),S()},S=()=>{const e={filters:{},currentPage:t.value};h.value.forEach(a=>{e.filters[a.name]=a.value}),localStorage.setItem("casosViableJuridicamente",JSON.stringify(e))},D=()=>{const e=localStorage.getItem("casosViableJuridicamente");if(e){const a=JSON.parse(e);a.filters&&(h.value.forEach(e=>{e.value=a.filters[e.name]||""}),C.value={searchQuery:a.filters.searchQuery||"",searchQueryName:a.filters.searchQueryName||"",searchQuerySurname:a.filters.searchQuerySurname||""},a.currentPage&&(t.value=parseInt(a.currentPage))),k()}else k()};Object(s["watch"])(C,()=>{S()},{deep:!0}),Object(s["watch"])(t,()=>{S()}),Object(s["watch"])(o,e=>{e||(d.value="",u.value=null,r.value=null,m.value="")});const E=e=>{"Enter"===e.key&&k()};Object(s["onMounted"])(()=>{D(),window.addEventListener("keyup",E)}),Object(s["onBeforeUnmount"])(()=>{S(),window.removeEventListener("keyup",E)});const P=e=>{Object.assign(C.value,e),h.value.forEach(a=>{a.value=e[a.name]||""}),S()},F=e=>{console.log(e),n.value=e,i.value=!0},N=async()=>{try{if(n.value){const e=Object(l["d"])(p,"casos",n.value.id);await Object(l["m"])(e,{presupuestoAbogadoEnviado:"1",presupuestoAbogadoEnviadoTime:(new Date).getTime()}),await k(),i.value=!1,n.value=null}}catch(e){console.error("Error al confirmar envío:",e)}};return{fields:f,filterFields:h,handleFiltersSubmit:P,enviarPresupuestoAbogado:F,confirmarEnvioFinal:N,showConfirmarEnvio:i,casos:e,filteredClientes:A,especialidades:a,currentPage:t,handlePageChange:x,searchCases:k,filters:C,modalMail:o,caseWantSet:r,body:d,filePresu:u,espePresupuesto:m,loading:b,openBudgetModal:j,onFileChange:y,sendBudget:w,updateCase:O}}},fn=bn,Cn=Object(h["a"])(fn,mn,vn,!1,null,null,null),hn=Cn.exports,gn=function(){var e=this,a=e._self._c;return a("div",[a("Listados",{attrs:{items:e.filteredClientes,fields:e.fields,"current-page":e.currentPage},on:{"page-changed":e.handlePageChange},scopedSlots:e._u([{key:"filters",fn:function(){return[a("Formulario",{attrs:{filters:e.filterFields,formClass:"form-filters",fieldClass:"col-4",initialData:e.filters},on:{submit:e.handleFiltersSubmit,search:e.searchCases}}),a("b-button",{staticClass:"mt-2",attrs:{variant:"primary"},on:{click:e.searchCases}},[e._v("Buscar")])]},proxy:!0},{key:"tableActions",fn:function({data:t}){return[a("b-button",{staticClass:"mt-3 mx-3",attrs:{size:"sm",variant:"success"},on:{click:function(a){return e.confirmarPresupuestoAceptado(t.item)}}},[e._v("Confirmar aceptado")]),t.item.clienteId?a("b-button",{staticClass:"mt-3 mx-3",attrs:{size:"sm"},on:{click:function(a){return e.$router.push({name:"UserProfile",params:{id:t.item.clienteId},query:{type:"cliente"}})}}},[e._v("Ver cliente")]):e._e()]}}])}),a("b-modal",{attrs:{id:"confirmar-aceptado-modal","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Confirmar Presupuesto Aceptado\n    ")]},proxy:!0}]),model:{value:e.showConfirmarAceptado,callback:function(a){e.showConfirmarAceptado=a},expression:"showConfirmarAceptado"}},[a("div",{staticClass:"text-center"},[a("p",[e._v("¿Estás seguro de que quieres confirmar que el presupuesto del abogado ha sido aceptado?")]),a("div",{staticClass:"mt-3"},[a("b-button",{staticClass:"mr-2",attrs:{variant:"success"},on:{click:e.confirmarAceptadoFinal}},[e._v("\n          Confirmar\n        ")]),a("b-button",{attrs:{variant:"secondary"},on:{click:function(a){e.showConfirmarAceptado=!1}}},[e._v("\n          Cancelar\n        ")])],1)])])],1)},yn=[],_n={components:{Listados:dt,Formulario:Sa},setup(){const e=Object(s["ref"])([]),a=["8t9rn2kRiHRANdZ7M8zG","Vhqr0N6hyqVctKtYtc8i"],t=Object(s["ref"])(1),i=Object(s["ref"])(!1),n=Object(s["ref"])(null),o=(Object(s["ref"])(JSON.parse(localStorage.getItem("userInform"))),[{key:"dias",label:"Días desde envío"},{key:"factura",label:"nº factura"},{key:"nombreEspe",label:"Especialidad"},{key:"nombreCliente",label:"Nombre Cliente"},{key:"apellidosCliente",label:"Apellidos Cliente"},{key:"telCliente",label:"Telefono Cliente"},{key:"actions",label:"Acciones"}]),c=Object(s["ref"])({searchQuery:"",searchQueryName:"",searchQuerySurname:""}),r=Object(s["ref"])([{name:"searchQuery",label:"Filtrar por teléfono",type:"input",placeholder:"Buscar por teléfono",value:""}]),d=async()=>{try{let a=[];const t=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("presupuestoAbogadoEnviado","==","1"),Object(l["n"])("necesitaAbogado","==","1"),Object(l["j"])("presupuestoAbogadoEnviadoTime","desc"),Object(l["h"])(50)),s=await Object(l["f"])(t);a=s.docs.map(e=>({id:e.id,...e.data()})),a=a.filter(e=>!e.presupuestoAceptado||"0"===e.presupuestoAceptado),c.value.searchQuery&&(a=a.filter(e=>e.telCliente&&e.telCliente.toLowerCase().includes(c.value.searchQuery.toLowerCase()))),await Promise.all(a.map(async e=>{const a=Object(l["k"])(Object(l["b"])(p,"clientes"),Object(l["n"])("tel","==",e.telCliente)),t=await Object(l["f"])(a),s=t.docs.map(e=>e.data())[0];e.nombreCliente=s?s.nombre:"N/A",e.apellidosCliente=s?s.apellidos:"N/A",e.clienteId=s?s.id:"N/A",e.correo=s?s.correo:"N/A",e.comunidadCliente=s?ba[s.comunidad]:"N/A",e.provinciaCliente=s?fa[s.provincia]:"N/A",e.observaciones=s?s.observaciones:"N/A";const i=Object(l["k"])(Object(l["b"])(p,"especialidades"),Object(l["n"])("__name__","==",e.especialidad)),n=await Object(l["f"])(i),o=n.docs.map(e=>e.data())[0];e.nombreEspe=o?o.nombre:"N/A",e.factura=e.id;const c=e.presupuestoAbogadoEnviadoTime?new Date(e.presupuestoAbogadoEnviadoTime):new Date,r=new Date,d=r-c,u=Math.floor(d/864e5);e.dias=u})),a=a.sort((e,a)=>parseFloat(e.dias)-parseFloat(a.dias)),e.value=a}catch(a){console.error("Error al buscar casos:",a)}},u=Object(s["computed"])(()=>{let a=e.value;return c.value.searchQuery||c.value.searchQueryName||c.value.searchQuerySurname?(c.value.searchQuery?a=a.filter(e=>e.telCliente&&e.telCliente.toLowerCase().includes(c.value.searchQuery.toLowerCase())):c.value.searchQueryName?a=a.filter(e=>e.nombreCliente&&e.nombreCliente.toLowerCase().includes(c.value.searchQueryName.toLowerCase())):c.value.searchQuerySurname&&(a=a.filter(e=>e.apellidosCliente&&e.apellidosCliente.toLowerCase().includes(c.value.searchQuerySurname.toLowerCase()))),a.sort((e,a)=>parseFloat(e.dias)-parseFloat(a.dias))):a.sort((e,a)=>parseFloat(e.dias)-parseFloat(a.dias))}),m=e=>{t.value=parseInt(e),v()},v=()=>{const e={filters:{},currentPage:t.value};r.value.forEach(a=>{e.filters[a.name]=a.value}),localStorage.setItem("presupuestosAbogadoEnviados",JSON.stringify(e))},b=()=>{const e=localStorage.getItem("presupuestosAbogadoEnviados");if(e){const a=JSON.parse(e);a.filters&&(r.value.forEach(e=>{e.value=a.filters[e.name]||""}),c.value={searchQuery:a.filters.searchQuery||"",searchQueryName:a.filters.searchQueryName||"",searchQuerySurname:a.filters.searchQuerySurname||""},a.currentPage&&(t.value=parseInt(a.currentPage))),d()}else d()};Object(s["watch"])(c,()=>{v()},{deep:!0}),Object(s["watch"])(t,()=>{v()});const f=e=>{"Enter"===e.key&&d()};Object(s["onMounted"])(()=>{b(),window.addEventListener("keyup",f)}),Object(s["onBeforeUnmount"])(()=>{v(),window.removeEventListener("keyup",f)});const C=e=>{Object.assign(c.value,e),r.value.forEach(a=>{a.value=e[a.name]||""}),v()},h=e=>{console.log(e),n.value=e,i.value=!0},g=async()=>{try{if(n.value){const e=Object(l["d"])(p,"casos",n.value.id);await Object(l["m"])(e,{presupuestoAceptadoAbogado:"1",presupuestoAbogadoEnviado:"2",presupuestoAceptadoAbogadoTime:(new Date).getTime(),statusAbogado:"2"}),await d(),i.value=!1,n.value=null}}catch(e){console.error("Error al confirmar presupuesto aceptado:",e)}};return{fields:o,filterFields:r,handleFiltersSubmit:C,confirmarPresupuestoAceptado:h,confirmarAceptadoFinal:g,showConfirmarAceptado:i,casos:e,filteredClientes:u,especialidades:a,currentPage:t,handlePageChange:m,searchCases:d,filters:c}}},wn=_n,On=Object(h["a"])(wn,gn,yn,!1,null,null,null),jn=On.exports,kn=function(){var e=this,a=e._self._c;return a("div",[a("Listados",{attrs:{items:e.filteredClientes,fields:e.fields,"current-page":e.currentPage},on:{"page-changed":e.handlePageChange},scopedSlots:e._u([{key:"tableActions",fn:function({data:t}){return[t.item.clienteId?a("b-button",{staticClass:"mt-3 mx-3",attrs:{size:"sm"},on:{click:function(a){return e.$router.push({name:"UserProfile",params:{id:t.item.clienteId},query:{type:"cliente"}})}}},[e._v("Ver cliente")]):e._e()]}}])})],1)},An=[],xn={components:{Listados:dt,Formulario:Sa},setup(){const e=Object(s["ref"])([]),a=["8t9rn2kRiHRANdZ7M8zG","Vhqr0N6hyqVctKtYtc8i"],t=Object(s["ref"])(1),i=Object(s["ref"])(!1),n=Object(s["ref"])(null),o=Object(s["ref"])(JSON.parse(localStorage.getItem("userInform"))),c=[{key:"dias",label:"Días desde envío"},{key:"factura",label:"nº factura"},{key:"nombreEspe",label:"Especialidad"},{key:"nombreCliente",label:"Nombre Cliente"},{key:"apellidosCliente",label:"Apellidos Cliente"},{key:"telCliente",label:"Telefono Cliente"},{key:"actions",label:"Acciones"}],r=Object(s["ref"])({searchQuery:"",searchQueryName:"",searchQuerySurname:""}),d=Object(s["ref"])([{name:"searchQuery",label:"Filtrar por teléfono",type:"input",placeholder:"Buscar por teléfono",value:""}]),u=async()=>{try{let a=[];const t=new Date;t.setDate(t.getDate()-20);const s=t.getTime(),i=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("presupuestoAbogadoEnviado","==","1"),Object(l["n"])("necesitaAbogado","==","1"),Object(l["n"])("idDespacho","==",o.value.id),Object(l["j"])("presupuestoAbogadoEnviadoTime","desc"),Object(l["n"])("presupuestoAbogadoEnviadoTime",">",s),Object(l["h"])(50)),n=await Object(l["f"])(i);a=n.docs.map(e=>({id:e.id,...e.data()})),console.log(a),a.forEach(e=>{console.log(e.idDespacho)}),a=a.filter(e=>!e.presupuestoAceptado||"0"===e.presupuestoAceptado),r.value.searchQuery&&(a=a.filter(e=>e.telCliente&&e.telCliente.toLowerCase().includes(r.value.searchQuery.toLowerCase()))),await Promise.all(a.map(async e=>{const a=Object(l["k"])(Object(l["b"])(p,"clientes"),Object(l["n"])("tel","==",e.telCliente)),t=await Object(l["f"])(a),s=t.docs.map(e=>e.data())[0];e.nombreCliente=s?s.nombre:"N/A",e.apellidosCliente=s?s.apellidos:"N/A",e.clienteId=s?s.id:"N/A",e.correo=s?s.correo:"N/A",e.comunidadCliente=s?ba[s.comunidad]:"N/A",e.provinciaCliente=s?fa[s.provincia]:"N/A",e.observaciones=s?s.observaciones:"N/A";const i=Object(l["k"])(Object(l["b"])(p,"especialidades"),Object(l["n"])("__name__","==",e.especialidad)),n=await Object(l["f"])(i),o=n.docs.map(e=>e.data())[0];e.nombreEspe=o?o.nombre:"N/A",e.factura=e.id;const c=e.presupuestoAbogadoEnviadoTime?new Date(e.presupuestoAbogadoEnviadoTime):new Date,r=new Date,d=r-c,u=Math.floor(d/864e5);e.dias=u})),a=a.sort((e,a)=>parseFloat(e.dias)-parseFloat(a.dias)),e.value=a}catch(a){console.error("Error al buscar casos:",a)}},m=Object(s["computed"])(()=>{let a=e.value;return r.value.searchQuery||r.value.searchQueryName||r.value.searchQuerySurname?(r.value.searchQuery?a=a.filter(e=>e.telCliente&&e.telCliente.toLowerCase().includes(r.value.searchQuery.toLowerCase())):r.value.searchQueryName?a=a.filter(e=>e.nombreCliente&&e.nombreCliente.toLowerCase().includes(r.value.searchQueryName.toLowerCase())):r.value.searchQuerySurname&&(a=a.filter(e=>e.apellidosCliente&&e.apellidosCliente.toLowerCase().includes(r.value.searchQuerySurname.toLowerCase()))),a.sort((e,a)=>parseFloat(e.dias)-parseFloat(a.dias))):a.sort((e,a)=>parseFloat(e.dias)-parseFloat(a.dias))}),v=e=>{t.value=parseInt(e),b()},b=()=>{const e={filters:{},currentPage:t.value};d.value.forEach(a=>{e.filters[a.name]=a.value}),localStorage.setItem("presupuestosAbogadoEnviados",JSON.stringify(e))},f=()=>{const e=localStorage.getItem("presupuestosAbogadoEnviados");if(e){const a=JSON.parse(e);a.filters&&(d.value.forEach(e=>{e.value=a.filters[e.name]||""}),r.value={searchQuery:a.filters.searchQuery||"",searchQueryName:a.filters.searchQueryName||"",searchQuerySurname:a.filters.searchQuerySurname||""},a.currentPage&&(t.value=parseInt(a.currentPage))),u()}else u()};Object(s["watch"])(r,()=>{b()},{deep:!0}),Object(s["watch"])(t,()=>{b()});const C=e=>{"Enter"===e.key&&u()};Object(s["onMounted"])(()=>{f(),window.addEventListener("keyup",C)}),Object(s["onBeforeUnmount"])(()=>{b(),window.removeEventListener("keyup",C)});const h=e=>{Object.assign(r.value,e),d.value.forEach(a=>{a.value=e[a.name]||""}),b()},g=e=>{console.log(e),n.value=e,i.value=!0},y=async()=>{try{if(n.value){const e=Object(l["d"])(p,"casos",n.value.id);await Object(l["m"])(e,{presupuestoAceptadoAbogado:"1",presupuestoAbogadoEnviado:"2",presupuestoAceptadoAbogadoTime:(new Date).getTime(),statusAbogado:"2"}),await u(),i.value=!1,n.value=null}}catch(e){console.error("Error al confirmar presupuesto aceptado:",e)}};return{fields:c,filterFields:d,handleFiltersSubmit:h,confirmarPresupuestoAceptado:g,confirmarAceptadoFinal:y,showConfirmarAceptado:i,casos:e,filteredClientes:m,especialidades:a,currentPage:t,handlePageChange:v,searchCases:u,filters:r}}},Sn=xn,Dn=Object(h["a"])(Sn,kn,An,!1,null,null,null),En=Dn.exports,Pn=function(){var e=this,a=e._self._c;return a("div",[a("Listados",{attrs:{items:e.filteredClientes,fields:e.fields,"current-page":e.currentPage},on:{"page-changed":e.handlePageChange},scopedSlots:e._u([{key:"filters",fn:function(){return[a("Formulario",{attrs:{filters:e.filterFields,formClass:"form-filters",fieldClass:"col-4"},on:{submit:e.handleFiltersSubmit}}),a("div",{staticClass:"custom-select-wrapper col-md-3 pl-0 mb-3"},[a("label",{attrs:{for:""}},[e._v("Filtrar por días:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.filterDias,expression:"filterDias"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.filterDias=a.target.multiple?t:t[0]}}},[a("option",{attrs:{value:"7"}},[e._v("7 días")]),a("option",{attrs:{value:"10"}},[e._v("10 días")]),a("option",{attrs:{value:"14"}},[e._v("14 días")]),a("option",{attrs:{value:"20"}},[e._v("20 días")]),a("option",{attrs:{value:"30"}},[e._v("30 días")]),a("option",{attrs:{value:"60"}},[e._v("Más de 30 días")])])]),a("div",{staticClass:"custom-select-wrapper col-md-3 pl-0 mb-3"},[a("label",{attrs:{for:""}},[e._v("Estado envío:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.filterEnviado,expression:"filterEnviado"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.filterEnviado=a.target.multiple?t:t[0]}}},[a("option",{attrs:{value:"todos"}},[e._v("Todos")]),a("option",{attrs:{value:"enviado"}},[e._v("Enviados al cliente")]),a("option",{attrs:{value:"no-enviado"}},[e._v("No enviados al cliente")])])]),a("div",{staticClass:"custom-select-wrapper col-md-3 pl-0 mb-3"},[a("label",{attrs:{for:""}},[e._v("Filtrar por especialidad:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.filterEspe,expression:"filterEspe"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.filterEspe=a.target.multiple?t:t[0]}}},[a("option",{attrs:{value:""}},[e._v("Todas")]),e._l(e.especialidades,(function(t){return a("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.nombre))])}))],2)])]},proxy:!0},{key:"tableActions",fn:function({data:t}){return[t.item.clienteId?a("b-button",{attrs:{size:"sm"},on:{click:function(a){e.$router.push(e.navigateToProfile(t.item))}}},[e._v("Ver cliente")]):e._e()]}}])})],1)},Fn=[],Nn={components:{Listados:dt,Formulario:Sa},setup(){const e=Object(s["ref"])([]),a=Object(s["ref"])([]),t=Object(s["ref"])(""),i=Object(s["ref"])("7"),n=Object(s["ref"])("todos"),o=Object(s["ref"])(1),c=e=>{o.value=parseInt(e)},r=e=>{if(!e)return"";const a=e.split("-");return 3===a.length?`${a[2]}-${a[1]}-${a[0]}`:e},d=[{key:"diasDesdeEncargo",label:"Días hasta encargo"},{key:"fechaEncargo",label:"Fecha encargo"},{key:"tipoEncargo",label:"Tipo"},{key:"factura",label:"nº factura"},{key:"nombreEspe",label:"Especialidad"},{key:"nombreCliente",label:"Nombre Cliente"},{key:"apellidosCliente",label:"Apellidos Cliente"},{key:"telCliente",label:"Teléfono Cliente"},{key:"enviadoCliente",label:"Enviado al cliente"},{key:"actions",label:"Acciones"}],u=Object(s["ref"])({searchQuery:"",searchQueryName:"",searchQuerySurname:""}),m=[{name:"searchQuery",label:"Filtrar por teléfono",type:"input",placeholder:"Buscar por teléfono"},{name:"searchQueryName",label:"Filtrar por nombre",type:"input",placeholder:"Buscar por nombre"},{name:"searchQuerySurname",label:"Filtrar por apellidos",type:"input",placeholder:"Buscar por apellidos"}],v=async(t=7,s=!1)=>{try{const n=new Date;n.setHours(0,0,0,0);const o=n.toISOString().split("T")[0],c=new Date(n);c.setDate(c.getDate()+t);const d=c.toISOString().split("T")[0],u=[],m=new Map;if(s)try{u.push(Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("status",">=","2"),Object(l["n"])("informe.fechaEncargo",">=",o),Object(l["n"])("informe.fechaEncargo","<=",d),Object(l["n"])("informe.enviadoCliente","!=","true")))}catch(i){console.warn("Query informe con filtros falló, usando alternativa:",i)}else try{u.push(Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("status",">=","2"),Object(l["n"])("informe.fechaEncargo",">=",o),Object(l["n"])("informe.fechaEncargo","<=",d)))}catch(i){console.warn("Query informe falló, usando alternativa:",i)}if(s)try{u.push(Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("status",">=","2"),Object(l["n"])("estudio.fechaEncargo",">=",o),Object(l["n"])("estudio.fechaEncargo","<=",d),Object(l["n"])("estudio.enviadoCliente","!=","true")))}catch(i){console.warn("Query estudio con filtros falló:",i)}else try{u.push(Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("status",">=","2"),Object(l["n"])("estudio.fechaEncargo",">=",o),Object(l["n"])("estudio.fechaEncargo","<=",d)))}catch(i){console.warn("Query estudio falló:",i)}if(s)try{u.push(Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("status",">=","2"),Object(l["n"])("ratificacion.fechaEncargo",">=",o),Object(l["n"])("ratificacion.fechaEncargo","<=",d),Object(l["n"])("ratificacion.enviadoCliente","!=","true")))}catch(i){console.warn("Query ratificacion con filtros falló:",i)}else try{u.push(Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("status",">=","2"),Object(l["n"])("ratificacion.fechaEncargo",">=",o),Object(l["n"])("ratificacion.fechaEncargo","<=",d)))}catch(i){console.warn("Query ratificacion falló:",i)}if(u.length>0){const e=await Promise.all(u.map(e=>Object(l["f"])(e).catch(e=>(console.warn("Error en query:",e),{docs:[]}))));e.forEach(e=>{e.docs.forEach(e=>{m.has(e.id)||m.set(e.id,{id:e.id,...e.data()})})})}let v=[];if(m.size>0)v=Array.from(m.values()),console.log("Casos obtenidos de Firestore queries:",v.length),v=v.filter(e=>{const a=e.informe&&e.informe.fechaEncargo||e.estudio&&e.estudio.fechaEncargo||e.ratificacion&&e.ratificacion.fechaEncargo;if(!a)return!1;const t=e.informe&&e.informe.fechaEncargo||e.estudio&&e.estudio.fechaEncargo||e.ratificacion&&e.ratificacion.fechaEncargo;return!(t<o||t>d)}),console.log("Casos después de filtrar por rango:",v.length);else{console.log("Usando fallback - queries de Firestore fallaron");const e=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("status",">=","2")),a=await Object(l["f"])(e);v=a.docs.map(e=>({id:e.id,...e.data()})),console.log("Total casos antes de filtrar:",v.length),v=v.filter(e=>{const a=e.informe&&e.informe.fechaEncargo||e.estudio&&e.estudio.fechaEncargo||e.ratificacion&&e.ratificacion.fechaEncargo;if(!a)return!1;const t=e.informe&&e.informe.fechaEncargo||e.estudio&&e.estudio.fechaEncargo||e.ratificacion&&e.ratificacion.fechaEncargo;if(t<o||t>d)return!1;if(s){const a=e.informe&&("true"===e.informe.enviadoCliente||!0===e.informe.enviadoCliente)||e.estudio&&("true"===e.estudio.enviadoCliente||!0===e.estudio.enviadoCliente)||e.ratificacion&&("true"===e.ratificacion.enviadoCliente||!0===e.ratificacion.enviadoCliente);if(a)return!1}return!0}),console.log("Casos después de filtrar:",v.length)}v=v.filter(e=>{const a=e.informe&&e.informe.fechaEncargo||e.estudio&&e.estudio.fechaEncargo||e.ratificacion&&e.ratificacion.fechaEncargo;return!!a&&!(a<o||a>d)}),console.log("Casos después de filtrar por rango de fechas:",v.length,"rango:",o,"a",d),await Promise.all(v.map(async e=>{const t=Object(l["k"])(Object(l["b"])(p,"clientes"),Object(l["n"])("tel","==",e.telCliente)),s=await Object(l["f"])(t),i=s.docs[0],n=i?i.data():null;e.nombreCliente=n?n.nombre:"N/A",e.apellidosCliente=n?n.apellidos:"N/A",e.correo=n?n.correo:"N/A",e.clienteId=i?i.id:null,n&&(e.comunidadCliente=n&&ba[n.comunidad]?ba[n.comunidad]:n.comunidad||"NA",e.provinciaCliente=n&&fa[n.provincia]?fa[n.provincia]:n.provincia||"NA");const o=a.value.find(a=>a.id===e.especialidad);e.nombreEspe=o?o.nombre:"N/A",e.factura=e.id;let c=null,d="",u=!1;if(e.informe&&e.informe.fechaEncargo?(c=e.informe.fechaEncargo,d="Informe",u="true"===e.informe.enviadoCliente||!0===e.informe.enviadoCliente):e.estudio&&e.estudio.fechaEncargo?(c=e.estudio.fechaEncargo,d="Estudio",u="true"===e.estudio.enviadoCliente||!0===e.estudio.enviadoCliente):e.ratificacion&&e.ratificacion.fechaEncargo&&(c=e.ratificacion.fechaEncargo,d="Ratificación",u="true"===e.ratificacion.enviadoCliente||!0===e.ratificacion.enviadoCliente),e.fechaEncargo=c?r(c):"",e.tipoEncargo=d,c){const a=new Date(c);a.setHours(0,0,0,0);const t=new Date;t.setHours(0,0,0,0);const s=a-t,i=Math.ceil(s/864e5);if(i<0)return;e.diasDesdeEncargo=i}else e.diasDesdeEncargo=0;e.enviadoCliente=u?"Sí":"No",e.enviadoClienteBool=u})),e.value=v,console.log("Casos encontrados:",v.length,"con filtro de",t,"días")}catch(n){console.error("Error al buscar casos:",n)}},b=async()=>{a.value=(await Object(l["f"])(Object(l["b"])(p,"especialidades"))).docs.map(e=>({id:e.id,...e.data()}))},f=Object(s["computed"])(()=>{let a=e.value;return""!=t.value&&(a=a.filter(e=>e.especialidad===t.value)),u.value.searchQuery?a=a.filter(e=>e.telCliente&&e.telCliente.toLowerCase().includes(u.value.searchQuery.toLowerCase())):u.value.searchQueryName?a=a.filter(e=>e.nombreCliente&&e.nombreCliente.toLowerCase().includes(u.value.searchQueryName.toLowerCase())):u.value.searchQuerySurname&&(a=a.filter(e=>e.apellidosCliente&&e.apellidosCliente.toLowerCase().includes(u.value.searchQuerySurname.toLowerCase()))),a=a.filter(e=>void 0!==e.diasDesdeEncargo&&e.diasDesdeEncargo>=0),a.sort((e,a)=>parseFloat(e.diasDesdeEncargo)-parseFloat(a.diasDesdeEncargo))}),C=()=>{const a=i.value?parseInt(i.value):7,t="no-enviado"===n.value;console.log("Recargando casos con filtro:",{dias:a,soloNoEnviados:t,filterDiasValue:i.value}),e.value=[],v(a,t)};Object(s["watch"])([i,n],(e,a)=>{console.log("Filtros cambiados:",{nuevo:{filterDias:e[0],filterEnviado:e[1]},anterior:{filterDias:a[0],filterEnviado:a[1]}}),C()},{immediate:!1}),Object(s["onMounted"])(()=>{b(),C()});const h=e=>{Object.assign(u.value,e)},g=e=>e.clienteId?{name:"UserProfile",params:{id:e.clienteId},query:{type:"cliente"}}:null;return{fields:d,filterFields:m,handleFiltersSubmit:h,casos:e,filteredClientes:f,currentPage:o,handlePageChange:c,especialidades:a,filterEspe:t,filterDias:i,filterEnviado:n,navigateToProfile:g}}},In=Nn,Ln=Object(h["a"])(In,Pn,Fn,!1,null,null,null),Tn=Ln.exports,Qn=function(){var e=this,a=e._self._c;return a("div",[e.showSuccess?a("b-alert",{attrs:{variant:"success",show:""}},[e._v("Especialista dado de alta correctamente")]):e._e(),e.showError?a("b-alert",{attrs:{variant:"danger",show:""}},[e._v("Especialista ya se encuentra dado de alta")]):e._e(),a("form",{on:{submit:function(e){e.preventDefault()}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("fg-input",{attrs:{type:"text",label:"Nombre",placeholder:"Nombre"},model:{value:e.user.nombre,callback:function(a){e.$set(e.user,"nombre",a)},expression:"user.nombre"}})],1),a("div",{staticClass:"col-md-6"},[a("fg-input",{attrs:{type:"text",label:"Apellidos",placeholder:"Apellidos"},model:{value:e.user.apellidos,callback:function(a){e.$set(e.user,"apellidos",a)},expression:"user.apellidos"}})],1),a("div",{staticClass:"col-md-6"},[a("fg-input",{attrs:{type:"text",label:"Correo",placeholder:"Correo"},model:{value:e.user.correo,callback:function(a){e.$set(e.user,"correo",a)},expression:"user.correo"}})],1),a("div",{staticClass:"col-md-6"},[a("fg-input",{attrs:{type:"text",label:"Teléfono",placeholder:"Teléfono"},model:{value:e.user.tel,callback:function(a){e.$set(e.user,"tel",a)},expression:"user.tel"}})],1),a("div",{staticClass:"custom-select-wrapper col-md-6"},[a("label",{attrs:{for:""}},[e._v("Tipo de especialidad")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.user.especialidades,expression:"user.especialidades"}],staticClass:"custom-select",attrs:{multiple:""},on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.user,"especialidades",a.target.multiple?t:t[0])}}},e._l(e.especialidades,(function(t){return a("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.nombre))])})),0)]),a("div",{staticClass:"col-md-6"},[a("fg-input",{attrs:{type:"text",label:"Especialidad",placeholder:"Especialidad"},model:{value:e.user.especialista,callback:function(a){e.$set(e.user,"especialista",a)},expression:"user.especialista"}})],1),a("div",{staticClass:"custom-select-wrapper col-md-6"},[a("label",{attrs:{for:""}},[e._v("Comunidad Autonoma")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.user.comunidad,expression:"user.comunidad"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.user,"comunidad",a.target.multiple?t:t[0])}}},e._l(e.comunidades,(function(t,s){return a("option",{key:s,domProps:{value:s}},[e._v(e._s(t))])})),0)]),a("div",{staticClass:"custom-select-wrapper col-md-6"},[a("label",{attrs:{for:""}},[e._v("Provincias")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.user.provincia,expression:"user.provincia"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.user,"provincia",a.target.multiple?t:t[0])}}},e._l(e.provincias,(function(t,s){return a("option",{key:s,domProps:{value:s}},[e._v(e._s(t))])})),0)]),a("div",{staticClass:"custom-select-wrapper col-md-6"},[a("fg-input",{attrs:{type:"text",label:"Población",placeholder:"Población"},model:{value:e.user.poblacion,callback:function(a){e.$set(e.user,"poblacion",a)},expression:"user.poblacion"}})],1),a("div",{staticClass:"col-12 text-center mt-3"},[a("p-button",{attrs:{type:"info",round:""},nativeOn:{click:function(a){return a.preventDefault(),e.createEspe.apply(null,arguments)}}},[e._v("\n              Dar de alta especialista\n          ")])],1)])])],1)},Mn=[],$n={setup(){const e=Object(s["ref"])(!1),a=Object(s["ref"])(!1),t=Object(s["ref"])({nombre:"",apellidos:"",correo:"",tel:"",comunidad:"",provincia:"",poblacion:"",especialista:"",time:(new Date).getTime(),especialidades:[]}),i=Object(s["ref"])([]),n=async()=>{i.value=(await Object(l["f"])(Object(l["b"])(p,"especialidades"))).docs.map(e=>({id:e.id,...e.data()}))},o=async()=>{const s=Object(l["k"])(Object(l["b"])(p,"especialistas"),Object(l["n"])("tel","==",t.value.tel)),i=await Object(l["f"])(s);if(i.docs.length>0)a.value=!0,setTimeout(()=>{a.value=!1},2e3);else try{await Object(l["a"])(Object(l["b"])(p,"especialistas"),t.value),t.value={nombre:"",apellidos:"",correo:"",tel:"",comunidad:"",provincia:"",poblacion:"",especialista:"",especialidades:[]},e.value=!0,setTimeout(()=>{e.value=!1},2e3)}catch(n){console.error("Error adding document: ",n)}};return Object(s["onMounted"])(()=>{n()}),{user:t,comunidades:ba,provincias:fa,especialidades:i,showError:a,showSuccess:e,createEspe:()=>{o()}}}},Bn=$n,Vn=(t("ad5e"),Object(h["a"])(Bn,Qn,Mn,!1,null,null,null)),zn=Vn.exports,Rn=function(){var e=this,a=e._self._c;return a("div",[e.showSuccess?a("b-alert",{attrs:{variant:"success",show:""}},[e._v("Especialista dado de alta correctamente")]):e._e(),e.showError?a("b-alert",{attrs:{variant:"danger",show:""}},[e._v("Especialista ya se encuentra dado de alta")]):e._e(),a("form",{on:{submit:function(e){e.preventDefault()}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("fg-input",{attrs:{type:"text",label:"Nombre",placeholder:"Nombre"},model:{value:e.user.nombre,callback:function(a){e.$set(e.user,"nombre",a)},expression:"user.nombre"}})],1),a("div",{staticClass:"col-md-6"},[a("fg-input",{attrs:{type:"text",label:"Correo",placeholder:"Correo"},model:{value:e.user.correo,callback:function(a){e.$set(e.user,"correo",a)},expression:"user.correo"}})],1),a("div",{staticClass:"col-md-6"},[a("fg-input",{attrs:{type:"text",label:"Teléfono",placeholder:"Teléfono"},model:{value:e.user.tel,callback:function(a){e.$set(e.user,"tel",a)},expression:"user.tel"}})],1),a("div",{staticClass:"custom-select-wrapper col-md-6"},[a("label",{attrs:{for:""}},[e._v("Comunidad Autonoma")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.user.comunidad,expression:"user.comunidad"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.user,"comunidad",a.target.multiple?t:t[0])}}},e._l(e.comunidades,(function(t,s){return a("option",{key:s,domProps:{value:s}},[e._v(e._s(t))])})),0)]),a("div",{staticClass:"custom-select-wrapper col-md-6"},[a("label",{attrs:{for:""}},[e._v("Provincias")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.user.provincia,expression:"user.provincia"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.user,"provincia",a.target.multiple?t:t[0])}}},e._l(e.provincias,(function(t,s){return a("option",{key:s,domProps:{value:s}},[e._v(e._s(t))])})),0)]),a("div",{staticClass:"custom-select-wrapper col-md-6"},[a("fg-input",{attrs:{type:"text",label:"Población",placeholder:"Población"},model:{value:e.user.poblacion,callback:function(a){e.$set(e.user,"poblacion",a)},expression:"user.poblacion"}})],1),a("div",{staticClass:"col-12 text-center mt-3"},[a("p-button",{attrs:{type:"info",round:""},nativeOn:{click:function(a){return a.preventDefault(),e.createEspe.apply(null,arguments)}}},[e._v("\n              Dar de alta despacho\n          ")])],1)])])],1)},Jn=[],qn={setup(){const e=Object(s["ref"])(!1),a=Object(s["ref"])(!1),t=Object(s["ref"])({nombre:"",correo:"",tel:"",comunidad:"",provincia:"",poblacion:"",time:(new Date).getTime()}),i=async()=>{const s=Object(l["k"])(Object(l["b"])(p,"despachos"),Object(l["n"])("tel","==",t.value.tel)),i=await Object(l["f"])(s);if(i.docs.length>0)a.value=!0,setTimeout(()=>{a.value=!1},2e3);else try{await Object(l["a"])(Object(l["b"])(p,"despachos"),t.value),t.value={nombre:"",correo:"",tel:"",comunidad:"",provincia:"",poblacion:""},e.value=!0,setTimeout(()=>{e.value=!1},2e3)}catch(n){console.error("Error adding document: ",n)}};return Object(s["onMounted"])(()=>{fetchData()}),{user:t,comunidades:ba,provincias:fa,showError:a,showSuccess:e,createEspe:()=>{i()}}}},Un=qn,Hn=(t("6702"),Object(h["a"])(Un,Rn,Jn,!1,null,null,null)),Wn=Hn.exports,Gn=function(){var e=this,a=e._self._c;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h2",[e._v(" "+e._s("Perfil de "+("cliente_valmer"===e.typeUser?"Cliente Valmer":e.typeUser)))])]),a("div",{staticClass:"col-12 mb-3"},[a("span",{staticStyle:{color:"#007bff",cursor:"pointer"},on:{click:function(a){return e.$router.back()}}},[e._v("Volver listado")])]),a("div",{staticClass:"col-md-3"}),a("div",{staticClass:"col-md-9 col-xs-12 mb-3"},[e.cases.length>0&&e.showCases&&!e.isDespacho&&!e.isValmer?a("p-button",{staticClass:"mt-3",attrs:{type:"info",round:""},nativeOn:{click:function(a){return a.preventDefault(),e.wantAddBook()}}},[e._v("\n     Añadir cita/juicio\n    ")]):e._e(),e.cases.length>0&&e.showCases&&e.showAsSuperAdmin&&e.isClient&&!e.isValmer?a("p-button",{staticClass:"mt-3 ml-3",attrs:{type:"info",round:""},nativeOn:{click:function(a){a.preventDefault(),e.showRemesa=!0}}},[e._v("\n     Añadir remesa\n    ")]):e._e()],1),a("div",{staticClass:"col-md-3 col-xs-12"},[a("user-card",{attrs:{typeUser:"cliente_valmer"===e.typeUser?"cliente":e.typeUser,user:e.user,caseDetail:e.caseDetail,isDespacho:e.isDespacho,isClient:e.isClient||e.isValmer},on:{permisosUsuario:function(a){e.gestionPermiso?e.gestionPermiso=!1:e.gestionPermiso=!0}}})],1),null!==e.caseDetail||e.gestionPermiso||e.loadingCases?e._e():a("div",{staticClass:"col-md-9 col-xs-12"},[e.cases.length>0&&e.showCases&&!e.isValmer?a("casos-usuario",{attrs:{cases:e.cases},on:{wantSeeCase:e.setCase}}):e.isValmer&&e.cases.length>0&&e.showCases?a("casos-valmer",{attrs:{cases:e.cases},on:{wantSeeCase:e.setCase}}):e.loadingCases?e._e():a("div",[e._v("No tiene casos asignados")])],1),null===e.caseDetail||e.gestionPermiso||e.isValmer?e._e():a("div",{staticClass:"col-md-9 col-xs-12"},[a("user-case",{attrs:{caseDetail:e.caseDetail,isClient:e.isClient,isDespacho:e.isDespacho,userCase:e.userCase,user:e.user},on:{back:function(a){e.caseDetail=null}}})],1),null!==e.caseDetail&&!e.gestionPermiso&&e.isValmer?a("div",{staticClass:"col-md-9 col-xs-12"},[a("user-case-valmer",{attrs:{caseDetail:e.caseDetail,user:e.user},on:{back:function(a){e.caseDetail=null}}})],1):e._e(),e.gestionPermiso?a("div",{staticClass:"col-md-9 col-xs-12"},[a("gestion-permisos",{attrs:{user:e.user},on:{back:function(a){e.gestionPermiso=!1}}})],1):e._e(),a("b-modal",{attrs:{id:"bv-modal-example","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Añadir cita o juicio\n    ")]},proxy:!0}]),model:{value:e.showModalCita,callback:function(a){e.showModalCita=a},expression:"showModalCita"}},[e.cases.length>0&&e.showCases?a("citas",{attrs:{especialista:e.isClient?{}:e.user,casos:e.cases},on:{closeModal:function(a){e.showModalCita=!1}}}):e._e()],1),a("b-modal",{attrs:{title:"Nueva Remesa","hide-footer":""},model:{value:e.showRemesa,callback:function(a){e.showRemesa=a},expression:"showRemesa"}},[a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label"},[e._v("Remesas para:  "+e._s(e.user.nombre+e.user.apellidos))])]),a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label"},[e._v("Fecha de Remesa")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newRemesa.fecha,expression:"newRemesa.fecha"}],staticClass:"form-control",attrs:{type:"date",required:""},domProps:{value:e.newRemesa.fecha},on:{input:function(a){a.target.composing||e.$set(e.newRemesa,"fecha",a.target.value)}}})]),a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label"},[e._v("Cantidad")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newRemesa.cantidad,expression:"newRemesa.cantidad"}],staticClass:"form-control",attrs:{type:"number",required:""},domProps:{value:e.newRemesa.cantidad},on:{input:function(a){a.target.composing||e.$set(e.newRemesa,"cantidad",a.target.value)}}})]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[e._v("Remesas creadas: ")]),e._l(e.remesas,(function(t,s){return a("div",{key:s,staticClass:"col-12 mt-2"},[a("b",[e._v(e._s(t.fecha)+" - "+e._s(t.cantidad)+"€")]),a("i",{staticClass:"ti-trash",on:{click:function(a){return e.remesas.splice(s,1)}}})])}))],2),a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col-12"},[a("button",{staticClass:"btn btn-success",on:{click:function(a){return e.addRemesa()}}},[e._v("Añadir nueva fecha de remesa")])]),a("div",{staticClass:"col-12 mt-5"},[a("button",{staticClass:"btn btn-success",on:{click:function(a){return e.addAllRemesas()}}},[e._v("Guardar remesas")])])])])],1)},Yn=[],Kn=function(){var e=this,a=e._self._c;return a("card",{staticClass:"card-user"},[e.showSuccess?a("b-alert",{staticStyle:{position:"fixed",width:"100%",top:"0px","z-index":"9999"},attrs:{variant:"success",show:""}},[e._v("Observación modificada con exito")]):e._e(),a("div",[a("h4",{staticClass:"title"},[e._v("\n        "+e._s(e.user.apellidos?`${e.user.nombre} ${e.user.apellidos}`:""+e.user.nombre)+"\n      ")])]),e._l(e.dataUser,(function(t,s){return a("div",{key:s},[t.visible?a("div",{staticClass:"mt-2"},[t.label?a("label",{staticStyle:{display:"block"},attrs:{for:""}},[e._v(e._s(t.label)+" "),t.editable?a("a",{staticClass:"text-blue",on:{click:function(a){return e.toggleEdit(t.key)}}},[e._v("Editar")]):e._e()]):e._e(),e.isEditing(t.key)?e._e():a("span",[e._v(e._s(t.span))]),t.editable&&e.isEditing(t.key)?a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.editableObservations[t.key],expression:"editableObservations[data.key]"}],attrs:{name:"",id:"",cols:"30",rows:"10"},domProps:{value:e.editableObservations[t.key]},on:{input:function(a){a.target.composing||e.$set(e.editableObservations,t.key,a.target.value)}}}):e._e(),t.editable&&e.isEditing(t.key)?a("br"):e._e(),t.editable&&e.isEditing(t.key)?a("a",{staticClass:"text-blue",on:{click:function(a){return e.updateObs(t.key)}}},[e._v("Guardar")]):e._e()]):e._e()])})),!e.isClient&&e.showAsAdmin?a("div",{staticClass:"mt-4 text-blue",staticStyle:{color:"rgb(0, 123, 255)"},on:{click:function(a){return e.$emit("permisosUsuario")}}},[e._v("\n      Gestionar permisos\n    ")]):e._e(),e.showAsAdmin&&"despacho"!==e.typeUser?a("div",{staticClass:"mt-2"},[a("a",{attrs:{href:"https://wa.me/34"+e.user.tel,target:"_blank"}},[e._v("Abrir en WhatsApp")]),a("br"),a("a",{attrs:{href:"tel:+34"+e.user.tel}},[e._v("Llamar")])]):e._e(),e.user.tel&&e.caseDetail&&e.url.includes("cliente")?a("chat",{attrs:{caseDetail:e.caseDetail,userCase:e.user}}):e._e()],2)},Zn=[],Xn=function(){var e=this,a=e._self._c;return a("div",{staticClass:"container mt-5"},[a("div",{staticClass:"card shadow-sm"},[a("div",{staticClass:"py-2 bg-primary text-white text-center font-weight-bold d-flex justify-content-between align-items-center px-3"},[a("span"),a("span",[e._v("Chat")]),a("span",{staticClass:"expand-btn",attrs:{title:"Ampliar chat"},on:{click:function(a){e.expandChat=!0}}},[a("i",{staticClass:"fa fa-expand"})])]),a("div",{ref:"chatBox",staticClass:"card-body chat-box overflow-auto",staticStyle:{"max-height":"100px"}},e._l(e.messages,(function(t){return a("div",{key:t.id,staticClass:"mb-2"},[a("div",{staticClass:"alert alert-primary text-secondary"},[a("strong",[e._v(e._s(t.user))]),a("span",{staticClass:"small text-primary ml-1"},[e._v(e._s(t.time)+" "+e._s(t.timestamp?new Date(1e3*t.timestamp.seconds+t.timestamp.nanoseconds/1e6).toISOString().split("T")[0].split("-").reverse().join("/"):""))]),a("br"),e._v("\n          "+e._s(t.text)+"\n        ")])])})),0),a("div",{staticClass:"card-footer d-flex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.newMessage,expression:"newMessage"}],attrs:{placeholder:"Escribe un mensaje..."},domProps:{value:e.newMessage},on:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.sendMessage.apply(null,arguments)},input:function(a){a.target.composing||(e.newMessage=a.target.value)}}})])]),a("b-modal",{attrs:{id:"chat-expanded-modal",size:"xl","hide-footer":"",centered:""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[a("i",{staticClass:"fa fa-comments mr-2"}),e._v(" Chat\n    ")]},proxy:!0}]),model:{value:e.expandChat,callback:function(a){e.expandChat=a},expression:"expandChat"}},[a("div",{staticClass:"expanded-chat-container"},[a("div",{ref:"expandedChatBox",staticClass:"expanded-chat-box overflow-auto"},e._l(e.messages,(function(t){return a("div",{key:"expanded-"+t.id,staticClass:"mb-3"},[a("div",{staticClass:"alert alert-primary text-secondary"},[a("strong",[e._v(e._s(t.user))]),a("span",{staticClass:"small text-primary ml-2"},[e._v(e._s(t.time)+" "+e._s(t.timestamp?new Date(1e3*t.timestamp.seconds+t.timestamp.nanoseconds/1e6).toISOString().split("T")[0].split("-").reverse().join("/"):""))]),a("br"),e._v("\n            "+e._s(t.text)+"\n          ")])])})),0),a("div",{staticClass:"expanded-chat-footer d-flex mt-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.newMessage,expression:"newMessage"}],staticClass:"form-control",attrs:{placeholder:"Escribe un mensaje..."},domProps:{value:e.newMessage},on:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.sendMessage.apply(null,arguments)},input:function(a){a.target.composing||(e.newMessage=a.target.value)}}}),a("button",{staticClass:"btn btn-primary ml-2",on:{click:e.sendMessage}},[a("i",{staticClass:"fa fa-paper-plane"})])])])])],1)},eo=[],ao={name:"ChatApp",props:{userCase:{type:Object},caseDetail:{type:Object}},setup(e){const a=Object(s["ref"])(e.userCase.tel),t=Object(s["ref"])([]),i=Object(s["ref"])(""),n=Object(s["ref"])(!1);let o=null;const c=Object(s["ref"])(JSON.parse(localStorage.getItem("userInform")));console.log(e.caseDetail.telEspecialista);const r=()=>{o&&o(),o=Object(l["i"])(Object(l["k"])(Object(l["b"])(p,"chats",a.value,"messages"),Object(l["j"])("timestamp")),e=>{t.value=e.docs.map(e=>({id:e.id,...e.data()}))})},d=async()=>{""!==i.value.trim()&&(await Object(l["a"])(Object(l["b"])(p,"chats",a.value,"messages"),{text:i.value,user:c.value.nombre,userId:c.value.id,time:(new Date).toLocaleTimeString(),timestamp:new Date}),(e.caseDetail.presupuestoAceptado||e.caseDetail.presupuestoAceptadoAbogado)&&await Object(l["a"])(Object(l["b"])(p,"notificacionesChat"),{userWrite:c.value.tel,userTo:c.value.tel===e.caseDetail.telEspecialista?"607417310":e.caseDetail.telEspecialista,userId:e.userCase.id,userName:e.userCase.nombre,userEspe:e.caseDetail.telEspecialista}),i.value="")};return Object(s["onBeforeUnmount"])(()=>{o&&o()}),Object(s["onMounted"])(()=>{console.log(e.userCase),e.userCase.tel||(a.value=e.userCase.tel),r()}),{messages:t,newMessage:i,sendMessage:d,expandChat:n}}},to=ao,so=(t("def1"),Object(h["a"])(to,Xn,eo,!1,null,"0651167e",null)),io=so.exports,no={props:{user:{type:Object},isClient:{type:Boolean},typeUser:{type:String},caseDetail:{type:Object},isDespacho:{type:Boolean}},components:{Chat:io},setup(e){const a=Object(s["computed"])(()=>window.location.href),t=Object(s["ref"])({}),i=Object(s["ref"])(!1),n=Object(s["ref"])({observaciones:e.user.observaciones||"",observacionesEspecialista:e.user.observacionesEspecialista||"",observacionesDespacho:e.user.observacionesDespacho||""}),o=e=>{if(!e)return"NA";const a=new Date(e),t=String(a.getDate()).padStart(2,"0"),s=String(a.getMonth()+1).padStart(2,"0"),i=a.getFullYear();return`${t}/${s}/${i}`},c=JSON.parse(localStorage.getItem("userInform")),r=Object(s["computed"])(()=>!(!c.admin||!0!==c.admin)),d=Object(s["computed"])(()=>!c.despacho&&!c.admin),u=Object(s["computed"])(()=>!0===c.despacho),m=a=>{const i=!t.value[a];s["default"].set(t.value,a,i),i&&s["default"].set(n.value,a,e.user[a]||"")},v=e=>!0===t.value[e],b=Object(s["computed"])(()=>[{span:e.user.tel,visible:r.value},{span:e.user.correo,visible:r.value},{span:ba[e.user.comunidad]?ba[e.user.comunidad]:e.user.comunidad,visible:!0},{span:fa[e.user.provincia]?fa[e.user.provincia]:e.user.provincia,visible:!0},{span:e.user.poblacion,visible:!0},{span:e.user.especialista?e.user.especialista:"",label:"Especialidad:",visible:e.user.especialista},{span:e.user.observaciones,label:"Observaciones (Admin)",visible:r.value,editable:r.value,key:"observaciones"},{span:e.user.observacionesEspecialista,label:"Observaciones Especialista",visible:r.value||d.value,editable:r.value||d.value,key:"observacionesEspecialista"},{span:e.user.observacionesDespacho,label:"Observaciones Despacho",visible:r.value||u.value,editable:r.value||u.value,key:"observacionesDespacho"},{span:o(e.user.time),label:"Fecha perfil creado:",visible:r.value}]),f=()=>"cliente"===e.typeUser?"clientes":"especialista"===e.typeUser?"especialistas":"despacho"===e.typeUser?"despachos":"clientes",C=async a=>{const o=f(),c=Object(l["d"])(p,o,e.user.id),r={};r[a]=n.value[a],await Object(l["m"])(c,r),e.user[a]=n.value[a],s["default"].set(t.value,a,!1),i.value=!0,setTimeout(()=>{i.value=!1},4e3)};return{formatDate:o,comunidades:ba,provincias:fa,showAsAdmin:r,dataUser:b,editingFields:t,editableObservations:n,showSuccess:i,url:a,updateObs:C,toggleEdit:m,isEditing:v}}},oo=no,lo=Object(h["a"])(oo,Kn,Zn,!1,null,null,null),co=lo.exports,ro=function(){var e=this,a=e._self._c;return a("div",[a("Listados",{attrs:{"current-page":e.currentPage,items:[...e.casesItems||[]].sort((e,a)=>{const t=e.fechaAlta?new Date(e.fechaAlta.split("/").reverse().join("-")):new Date(0),s=a.fechaAlta?new Date(a.fechaAlta.split("/").reverse().join("-")):new Date(0);return s-t}),fields:e.filteredFields},on:{"page-changed":e.handlePageChange},scopedSlots:e._u([{key:"filters",fn:function(){},proxy:!0},e.showAsAdmin?{key:"order",fn:function(){return[a("div",{staticClass:"col-3 pl-0"},[a("label",{attrs:{for:""}},[e._v("Filtrar por:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.filterCases,expression:"filterCases"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.filterCases=a.target.multiple?t:t[0]}}},[a("option",{key:"1",attrs:{value:"all"}},[e._v("Todos los casos")]),a("option",{key:"2",attrs:{value:"confirmed"}},[e._v("Presupuesto aceptado")])])])]},proxy:!0}:null,{key:"tableActions",fn:function({data:t}){return[null!==t.item.telCliente&&null!==t.item.telEspecialista?a("b-button",{staticClass:"my-3 mx-3",attrs:{size:"sm"},on:{click:function(a){return e.guardaCaso(t.item)}}},[e._v("\n        Ver Detalle\n      ")]):e._e(),e.showAsAdmin?a("b-button",{staticClass:"my-3 mx-3",attrs:{size:"sm"},on:{click:function(a){return e.mueveCaso(t.item)}}},[e._v("\n        Mover estado\n      ")]):e._e()]}}],null,!0)}),a("b-modal",{attrs:{id:"bv-modal-example","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Mover estado\n    ")]},proxy:!0}]),model:{value:e.editEstado,callback:function(a){e.editEstado=a},expression:"editEstado"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.casoChange,expression:"casoChange"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.casoChange=a.target.multiple?t:t[0]}}},e._l(e.estadosFilter,(function(t,s){return a("option",{key:s,domProps:{value:t}},[e._v(e._s(t))])})),0),a("p-button",{staticClass:"mt-4",attrs:{type:"info",round:""},nativeOn:{click:function(a){return a.preventDefault(),e.updateCase.apply(null,arguments)}}},[e._v("\n      Aceptar\n    ")])],1)],1)},uo=[];async function po(e,a){console.log("Llegoo");const t=Object(l["d"])(p,"casos",e);await Object(l["m"])(t,{telEspecialista:null,status:"0",confirmaCaso:"0"}),mo(a)}async function mo(e){try{const a=Object(l["k"])(Object(l["b"])(p,"clientes"),Object(l["n"])("tel","==",e)),t=await Object(l["f"])(a);if(t.empty)return console.log("No se encontró cliente con ese teléfono"),!1;{const e=t.docs[0],a=Object(l["d"])(p,"clientes",e.id);return await Object(l["m"])(a,{confirmaCaso:"0"}),console.log("Cliente actualizado correctamente"),!0}}catch(a){return console.error("Error al actualizar cliente:",a),!1}}async function vo(e){console.log("Llegoo");const a=Object(l["d"])(p,"casos",e);await Object(l["m"])(a,{telEspecialista:null,status:"0",confirmaCaso:"1"})}async function bo(e){const a=Object(l["d"])(p,"casos",e);await Object(l["m"])(a,{status:"1",confirmaCaso:"1"})}async function fo(e){const a=Object(l["d"])(p,"casos",e);await Object(l["m"])(a,{status:"2"})}var Co={components:{Listados:dt},props:{cases:{type:Array,required:!0}},setup(e,{emit:a}){const t=Object(s["ref"])("all"),i=Object(s["ref"])(["Cliente por llamar","Caso sin asignar","Cliente sin presupuesto","Presupuesto pendiente","Presupuesto aceptado"]),n=Object(s["ref"])([]),o=JSON.parse(localStorage.getItem("userInform")),l=Object(s["ref"])(1),c=Object(s["computed"])(()=>!(!o.admin||!0!==o.admin)),r=Object(s["computed"])(()=>!(!o.superAdmin||!0!==o.superAdmin)),d=Object(s["ref"])(e.cases),u=r.value?[{key:"nombreCompleto",label:"Nombre apellidos"},{key:"fechaAlta",label:"Fecha de alta caso"},{key:"estadoCaso",label:"Estado del caso"},{key:"especialidadNombre",label:"Especialidad"},{key:"pago",label:"Pagado cliente"},{key:"actions",label:"Acciones"}]:[{key:"nombreCompleto",label:"Nombre apellidos"},{key:"fechaAlta",label:"Fecha de alta caso"},{key:"estadoCaso",label:"Estado del caso"},{key:"especialidadNombre",label:"Especialidad"},{key:"actions",label:"Acciones"}],p=Object(s["ref"])(null),m=Object(s["ref"])(!1),v=Object(s["ref"])(null),b=Object(s["computed"])(()=>{const e=JSON.parse(localStorage.getItem("userInform"));console.log(e);const a=e.routes.some(e=>!1===e.visibility);return a?u.filter(e=>"estadoCaso"!==e.key):u}),f=e=>{a("wantSeeCase",e)};return Object(s["watch"])(t,a=>{d.value=e.cases.filter(e=>"confirmed"!==a||"Presupuesto aceptado"===e.estadoCaso)}),{filteredFields:b,estados:i,guardaCaso:f,itemMueve:p,editEstado:m,casoChange:v,estadosFilter:n,showAsAdmin:c,filterCases:t,casesItems:d,currentPage:l,handlePageChange:e=>{l.value=e},updateCase:()=>{switch(v.value){case"Caso sin asignar":vo(p.value.id);break;case"Cliente sin presupuesto":bo(p.value.id);break;case"Presupuesto pendiente":fo(p.value.id);break;case"Cliente por llamar":po(p.value.id,p.value.telCliente);break;default:break}m.value=!1},mueveCaso:e=>{p.value=e,m.value=!0;const a=i.value.findIndex(a=>a===e.estadoCaso);console.log(i.value),console.log(e.estadoCaso),console.log(e),console.log(a),n.value=i.value.slice(0,a)}}}},ho=Co,go=Object(h["a"])(ho,ro,uo,!1,null,null,null),yo=go.exports,_o=function(){var e=this,a=e._self._c;return a("card",{staticClass:"card-user"},[e.showSuccessEspe?a("b-alert",{staticStyle:{position:"fixed",width:"100%",top:"0px","z-index":"9999"},attrs:{variant:"success",show:""}},[e._v("Especialista modificado correctamente")]):e._e(),a("div",[a("span",{staticStyle:{color:"#007bff",cursor:"pointer"},on:{click:function(a){return e.$emit("back")}}},[e._v("Volver listado casos cliente")])]),a("div",[e.showAsAdmin&&"4"!==e.caseDetail.status?a("p-button",{staticClass:"mt-3",attrs:{type:"info",round:""},nativeOn:{click:function(a){a.preventDefault(),e.modalCloseCase=!0}}},[e._v("\n     Caso finalizado\n    ")]):e._e(),e.showAsSuperAdmin&&"3"===e.caseDetail.status?a("p-button",{staticClass:"mt-3 ml-3",attrs:{type:"info",round:""},nativeOn:{click:function(a){a.preventDefault(),e.modalFactura=!0}}},[e._v("\n     Crear factura\n    ")]):e._e(),e.isClient&&e.showAsAdmin?a("p-button",{staticClass:"mt-3 ml-3",attrs:{type:"info",round:""},nativeOn:{click:function(a){a.preventDefault(),e.editEspe=!0}}},[e._v("\n      Editar especialista\n    ")]):e._e(),e.isClient&&e.showAsAdmin?a("p-button",{staticClass:"mt-3 ml-3",attrs:{type:"info",round:""},nativeOn:{click:function(a){a.preventDefault(),e.editEspecialidad=!0}}},[e._v("\n      Editar especialidad\n    ")]):e._e()],1),a("div",{staticClass:"row mb-4"},[a("div",{staticClass:"col-md-6 col-sm-12"},[a("h4",{staticClass:"title"},[e._v("\n              "+e._s(e.caseDetail.factura)+"\n          ")])]),a("div",{staticClass:"col-md-6 col-sm-12"},[a("h4",{staticClass:"title"},[e._v("\n              "+e._s(e.isClient?"Datos Especialista ":"Datos Cliente ")+"\n          ")])]),a("div",{staticClass:"col-md-6 col-sm-12"},[e.showAsAdmin?a("div",[a("span",{attrs:{for:""}},[e._v("Estado: "+e._s(e.caseDetail.estadoCaso))])]):e._e(),e.showAsAdmin?a("div",{staticClass:"mt-2"},[a("span",{attrs:{for:""}},[e._v("Fecha alta caso: "+e._s(e.caseDetail.fechaAlta))])]):e._e(),e.showAsAdmin?a("div",{staticClass:"mt-2"},[a("span",{attrs:{for:""}},[e._v("Tipo de cliente: "+e._s("1"===e.caseDetail.tipoCliente?"Despacho":"Particular"))])]):e._e(),e.showAsAdmin&&"1"===e.caseDetail.tipoCliente?a("div",{staticClass:"mt-2"},[a("span",{attrs:{for:""}},[e._v("Nombre del despacho: "+e._s(e.caseDetail.nombreDespacho))])]):e._e(),a("div",{staticClass:"mt-2"},[a("span",{attrs:{for:""}},[e._v("Especialidad: "+e._s(e.caseDetail.especialidadNombre))])])]),e.userCase?a("div",{staticClass:"col-md-6 col-sm-12"},[e._v("\n        "+e._s(e.userCase.id)+"\n          "),a("div",{},[e.isClient||e.showAsSuperAdmin?e._e():a("span",{attrs:{for:""}},[e._v(e._s(e.userCase.nombre+" "+e.userCase.apellidos))]),e.showAsSuperAdmin?a("a",{attrs:{href:`https://alexmc14.github.io/peritomedicotest/#/perfil/${e.userCase.id}?type=${e.isClient?"especialista":"cliente"}`,target:"_blank",rel:"noopener noreferrer"},on:{click:function(a){return e.$router.push({name:"UserProfile",params:{id:e.userCase.id},query:{type:e.isClient?"despacho":"cliente"}})}}},[e._v("\n                "+e._s(e.userCase.nombre+" "+e.userCase.apellidos)+"\n              ")]):e._e()]),a("div",{staticClass:"mt-2"},[a("span",[e._v(e._s(e.userCase.tel))])]),a("div",{staticClass:"mt-2"},[a("span",{attrs:{for:""}},[e._v(e._s(e.userCase.correo))])]),a("div",{staticClass:"mt-2"},[a("span",{attrs:{for:""}},[e._v(e._s(e.comunidades[e.userCase.comunidad]))])]),a("div",{staticClass:"mt-2"},[a("span",{attrs:{for:""}},[e._v(e._s(e.provincias[e.userCase.provincia]))])]),a("div",{staticClass:"mt-2"},[a("span",{attrs:{for:""}},[e._v(e._s(e.userCase.poblacion))])])]):e._e(),a("div",{staticClass:"col-12 text-center"},[a("h3",[e._v("Juicio")])])]),e.userCase&&e.userCase.tel?a("div",{staticClass:"row mb-4"},[a("div",{staticClass:"col-12"},[a("h4",{staticClass:"title"},[e._v("Citas/juicio del cliente")]),e.citasCliente.length>0?a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[e._v("Fecha")]),a("th",[e._v("Hora")]),a("th",[e._v("Tipo")]),a("th",[e._v("Lugar")])])]),a("tbody",e._l(e.citasCliente,(function(t){return a("tr",{key:t.id},[a("td",[e._v(e._s(e.formatDate(t.fecha)))]),a("td",[e._v(e._s(t.hora))]),a("td",[e._v(e._s("cita"===t.tipo?"Cita":"Juicio"))]),a("td",[e._v(e._s(t.lugar))])])})),0)])]):a("div",{staticClass:"text-center"},[a("p",[e._v("No hay citas registradas para este cliente.")])])])]):e._e(),e.userData.tel===e.caseDetail.telEspecialista?a("div",{staticClass:"row mb-4"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"text-center"},[a("label",{staticClass:"text-black",staticStyle:{"font-size":"16px","font-weight":"bold"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.especialista.informeEntregado,expression:"especialista.informeEntregado"}],staticClass:"mr-2",staticStyle:{transform:"scale(1.2)","max-height":"min-content"},attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.especialista.informeEntregado)?e._i(e.especialista.informeEntregado,null)>-1:e.especialista.informeEntregado},on:{change:function(a){var t=e.especialista.informeEntregado,s=a.target,i=!!s.checked;if(Array.isArray(t)){var n=null,o=e._i(t,n);s.checked?o<0&&e.$set(e.especialista,"informeEntregado",t.concat([n])):o>-1&&e.$set(e.especialista,"informeEntregado",t.slice(0,o).concat(t.slice(o+1)))}else e.$set(e.especialista,"informeEntregado",i)}}}),e._v("\n          Informe entregado\n          ")])])])]):e._e(),parseInt(e.caseDetail.status)>1?a("div",{staticClass:"accordion",attrs:{role:"tablist"}},[e.isDespacho||"praxis"!==e.caseDetail.especialidadNombre.toLowerCase()&&"incapacidad"!==e.caseDetail.especialidadNombre.toLowerCase()&&!e.caseDetail.especialidadNombre.toLowerCase().includes("laboral")&&!e.caseDetail.especialidadNombre.toLowerCase().includes("daño")?e._e():a("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[a("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-0",modifiers:{"accordion-0":!0}}],attrs:{block:"",variant:"info"}},[e._v("Documentación útil")])],1),a("b-collapse",{attrs:{id:"accordion-0",accordion:"my-accordion",role:"tabpanel"}},[a("b-card-body",[a("div",{staticClass:"row"},["incapacidad"===e.caseDetail.especialidadNombre.toLowerCase()?a("div",{staticClass:"col-3 text-center"},[a("div",{on:{click:function(a){return e.descargarArchivo("documents/plantillainformepericialincapacidad.docx","plantillaViabilidad.docx")}}},[a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("3b84"),alt:""}}),a("span",[e._v("Plantilla incapacidad")]),a("br")])]):e._e(),"praxis"===e.caseDetail.especialidadNombre.toLowerCase()?a("div",{staticClass:"col-3 text-center"},[a("div",{on:{click:function(a){return e.descargarArchivo("documents/plantillaViabilidad.docx","plantillaViabilidad.docx")}}},[a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("3b84"),alt:""}}),a("span",[e._v("Plantilla viabilidad")]),a("br")])]):e._e(),"praxis"===e.caseDetail.especialidadNombre.toLowerCase()?a("div",{staticClass:"col-3 text-center"},[a("div",{on:{click:function(a){return e.descargarArchivo("documents/plantillaInformePericial.docx","plantillaInformePericial.docx")}}},[a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("3b84"),alt:""}}),a("span",[e._v("Plantilla informe pericial")]),a("br")])]):e._e(),e.caseDetail.especialidadNombre.toLowerCase().includes("laboral")?a("div",{staticClass:"col-3 text-center"},[a("div",{on:{click:function(a){return e.descargarArchivo("documents/plantillaViabilidadIncapacidad.docx","plantillaInformePericial.docx")}}},[a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("3b84"),alt:""}}),a("span",[e._v("Plantilla incapacidad laboral")]),a("br")])]):e._e(),e.caseDetail.especialidadNombre.toLowerCase().includes("daño")?a("div",{staticClass:"col-3 text-center"},[a("div",{on:{click:function(a){return e.descargarArchivo("documents/plantillaVDC.docx","plantillaVDC.docx")}}},[a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("3b84"),alt:""}}),a("span",[e._v("Plantilla valoración del daño corporal")]),a("br")])]):e._e(),e.caseDetail.especialidadNombre.toLowerCase().includes("daño")?a("div",{staticClass:"col-3 text-center"},[a("div",{on:{click:function(a){return e.descargarArchivo("documents/baremoTrafico2016.pdf","baremoTrafico2016.pdf")}}},[a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("3b84"),alt:""}}),a("span",[e._v("Baremo tráfico 2016")]),a("br")])]):e._e()])])],1)],1),e.showAsSuperAdmin||e.isDespacho?a("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[a("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-5",modifiers:{"accordion-5":!0}}],attrs:{block:"",variant:"info"}},[e._v("Documentación médica")])],1),a("b-collapse",{attrs:{id:"accordion-5",accordion:"my-accordion",role:"tabpanel"}},[a("b-card-body",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[e.files.viabilidad?a("div",{staticClass:"row"},[a("h4",[e._v("Archivos Subidos:")]),a("div",{staticClass:"row"},e._l(e.files.viabilidad,(function(s){return a("div",{key:s.name,staticClass:"col-3 text-center;"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[s.name.includes(".pdf")||s.name.includes(".doc")||s.name.includes(".docx")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}):s.name.includes(".png")||s.name.includes(".jpg")||s.name.includes(".jpeg")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("4c8b"),alt:""}}):a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",[e._v(e._s(s.name))]),a("span",[e._v("Fecha de archivo subido: "+e._s(s.date?s.date.split("T")[0]:"Hoy"))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"viabilidad")}}},[a("p-button",{staticClass:"mt-2",attrs:{type:"danger",round:"",disabled:!s}},[e._v("\n                          Eliminar\n                      ")])],1):e._e()])})),0),a("div",{staticClass:"row"},e._l(e.files.informe,(function(s){return a("div",{key:s.name,staticClass:"col-3 text-center;"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[s.name.includes(".pdf")||s.name.includes(".doc")||s.name.includes(".docx")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}):s.name.includes(".png")||s.name.includes(".jpg")||s.name.includes(".jpeg")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("4c8b"),alt:""}}):a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",[e._v(e._s(s.name))]),a("span",[e._v("Fecha de archivo subido: "+e._s(s.date?s.date.split("T")[0]:"Hoy"))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"informe")}}},[a("p-button",{staticClass:"mt-2",attrs:{type:"danger",round:"",disabled:!s}},[e._v("\n                          Eliminar\n                      ")])],1):e._e()])})),0),a("div",{staticClass:"row"},e._l(e.files.informePericial,(function(s){return a("div",{key:s.name,staticClass:"col-3 text-center;"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[s.name.includes(".pdf")||s.name.includes(".doc")||s.name.includes(".docx")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}):s.name.includes(".png")||s.name.includes(".jpg")||s.name.includes(".jpeg")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("4c8b"),alt:""}}):a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",[e._v(e._s(s.name))]),a("span",[e._v("Fecha de archivo subido: "+e._s(s.date?s.date.split("T")[0]:"Hoy"))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"informePericial")}}},[a("p-button",{staticClass:"mt-2",attrs:{type:"danger",round:"",disabled:!s}},[e._v("\n                          Eliminar\n                      ")])],1):e._e()])})),0),a("div",{staticClass:"row"},[e._l(e.files.ratificacion,(function(s){return a("div",{key:s.name,staticClass:"col-3 text-center;"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[s.name.includes(".pdf")||s.name.includes(".doc")||s.name.includes(".docx")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}):s.name.includes(".png")||s.name.includes(".jpg")||s.name.includes(".jpeg")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("4c8b"),alt:""}}):a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",[e._v(e._s(s.name))]),a("span",[e._v("Fecha de archivo subido: "+e._s(s.date?s.date.split("T")[0]:"Hoy"))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"ratificacion")}}},[a("p-button",{staticClass:"mt-2",attrs:{type:"danger",round:"",disabled:!s}},[e._v("\n                          Eliminar\n                      ")])],1):e._e()])})),a("div",{staticClass:"row"},e._l(e.files.informeRatificacion,(function(s){return a("div",{key:s.name,staticClass:"col-3 text-center;"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[s.name.includes(".pdf")||s.name.includes(".doc")||s.name.includes(".docx")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}):s.name.includes(".png")||s.name.includes(".jpg")||s.name.includes(".jpeg")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("4c8b"),alt:""}}):a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",[e._v(e._s(s.name))]),a("span",[e._v("Fecha de archivo subido: "+e._s(s.date?s.date.split("T")[0]:"Hoy"))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"informeRatificacion")}}},[a("p-button",{staticClass:"mt-2",attrs:{type:"danger",round:"",disabled:!s}},[e._v("\n                          Eliminar\n                      ")])],1):e._e()])})),0)],2)]):e._e()])])])],1)],1):e._e(),e.showAsSuperAdmin||e.isDespacho?a("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[a("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-7",modifiers:{"accordion-7":!0}}],attrs:{block:"",variant:"info"}},[e._v("Documentación abogado")])],1),a("b-collapse",{attrs:{id:"accordion-7",accordion:"my-accordion",role:"tabpanel"}},[a("b-card-body",[a("div",{staticClass:"row"},[e.caseDetail.especialidadNombre.toLowerCase().includes("incapacidad")||e.caseDetail.especialidadNombre.toLowerCase().includes("discapacidad")?a("div",{staticClass:"col-12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("label",{staticClass:"text-black",attrs:{for:"fechaVencimiento"}},[e._v("Fecha vencimiento")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.abogado.fechaVencimiento,expression:"abogado.fechaVencimiento"}],attrs:{type:"date",id:"fechaVencimiento"},domProps:{value:e.abogado.fechaVencimiento},on:{input:function(a){a.target.composing||e.$set(e.abogado,"fechaVencimiento",a.target.value)}}})]),a("div",{staticClass:"col-6"},[a("label",{staticClass:"text-black",attrs:{for:"fechaVencimiento"}},[e._v("Situación laboral")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.abogado.situacionLaboral,expression:"abogado.situacionLaboral"}],attrs:{type:"text",id:"situacionLaboral"},domProps:{value:e.abogado.situacionLaboral},on:{input:function(a){a.target.composing||e.$set(e.abogado,"situacionLaboral",a.target.value)}}})]),a("div",{staticClass:"col-6 mt-3"},[a("label",{staticClass:"text-black",attrs:{for:"fechaVencimiento"}},[e._v("Reclamación previa")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.abogado.reclamacionPrevia,expression:"abogado.reclamacionPrevia"}],staticStyle:{"max-height":"min-content"},attrs:{type:"radio",id:"reclamacionPrevia",value:"true"},domProps:{checked:e._q(e.abogado.reclamacionPrevia,"true")},on:{change:function(a){return e.$set(e.abogado,"reclamacionPrevia","true")}}}),e._v(" Si\n                  "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.abogado.reclamacionPrevia,expression:"abogado.reclamacionPrevia"}],staticStyle:{"max-height":"min-content"},attrs:{type:"radio",id:"reclamacionPrevia",value:"false"},domProps:{checked:e._q(e.abogado.reclamacionPrevia,"false")},on:{change:function(a){return e.$set(e.abogado,"reclamacionPrevia","false")}}}),e._v(" No\n                ")]),a("div",{staticClass:"col-6 mt-3"},[a("label",{staticClass:"text-black",attrs:{for:"fechaVencimiento"}},[e._v("Fecha reaclamación previa")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.abogado.fechaReclamacionPrevia,expression:"abogado.fechaReclamacionPrevia"}],attrs:{type:"date",id:"fechaReclamacionPrevia"},domProps:{value:e.abogado.fechaReclamacionPrevia},on:{input:function(a){a.target.composing||e.$set(e.abogado,"fechaReclamacionPrevia",a.target.value)}}})]),a("div",{staticClass:"col-6 mt-3"},[a("label",{staticClass:"text-black",attrs:{for:"fechaVencimiento"}},[e._v("Tiene discapacidad")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.abogado.tieneDiscapacidad,expression:"abogado.tieneDiscapacidad"}],staticStyle:{"max-height":"min-content"},attrs:{type:"radio",id:"tieneDiscapacidad",value:"true"},domProps:{checked:e._q(e.abogado.tieneDiscapacidad,"true")},on:{change:function(a){return e.$set(e.abogado,"tieneDiscapacidad","true")}}}),e._v(" Si\n                  "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.abogado.tieneDiscapacidad,expression:"abogado.tieneDiscapacidad"}],staticStyle:{"max-height":"min-content"},attrs:{type:"radio",id:"tieneDiscapacidad",value:"false"},domProps:{checked:e._q(e.abogado.tieneDiscapacidad,"false")},on:{change:function(a){return e.$set(e.abogado,"tieneDiscapacidad","false")}}}),e._v(" No\n                ")]),a("div",{staticClass:"col-6 mt-3"},[a("label",{staticClass:"text-black",attrs:{for:"fechaVencimiento"}},[e._v("Demanda juicio")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.abogado.demandaJuicio,expression:"abogado.demandaJuicio"}],staticStyle:{"max-height":"min-content"},attrs:{type:"radio",id:"demandaJuicio",value:"true"},domProps:{checked:e._q(e.abogado.demandaJuicio,"true")},on:{change:function(a){return e.$set(e.abogado,"demandaJuicio","true")}}}),e._v(" Si\n                  "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.abogado.demandaJuicio,expression:"abogado.demandaJuicio"}],staticStyle:{"max-height":"min-content"},attrs:{type:"radio",id:"demandaJuicio",value:"false"},domProps:{checked:e._q(e.abogado.demandaJuicio,"false")},on:{change:function(a){return e.$set(e.abogado,"demandaJuicio","false")}}}),e._v(" No\n                ")]),a("div",{staticClass:"col-12 mt-4"},[a("label",{staticClass:"text-white custom-file-upload",attrs:{for:"file-upload"}},[a("input",{attrs:{type:"file",id:"file-upload",multiple:""},on:{change:e.onFileChange}}),e._v("\n                    Seleccionar archivo\n                  ")]),a("p-button",{staticClass:"ml-4",attrs:{type:"info",round:"",disabled:!e.file},nativeOn:{click:function(a){return a.preventDefault(),e.uploadFile("abogado")}}},[e._v("\n                    Subir Archivo\n                  ")])],1),e.files.abogado?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h4",[e._v("Archivos Subidos:")]),a("div",{staticClass:"row"},e._l(e.files.abogado,(function(s){return a("div",{key:s.name,staticClass:"col-3 text-center;"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[s.name.includes(".pdf")||s.name.includes(".doc")||s.name.includes(".docx")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}):s.name.includes(".png")||s.name.includes(".jpg")||s.name.includes(".jpeg")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("4c8b"),alt:""}}):a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",[e._v(e._s(s.name))]),a("span",[e._v("Fecha de archivo subido: "+e._s(s.date?s.date.split("T")[0]:"Hoy"))])]),a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"abogado")}}},[a("p-button",{staticClass:"mt-2",attrs:{type:"danger",round:"",disabled:!s}},[e._v("\n                          Eliminar\n                      ")])],1)])})),0)])]):e._e()])]):e._e(),e.caseDetail.especialidadNombre.toLowerCase().includes("valoración")?a("div",{staticClass:"col-12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("label",{staticClass:"text-black",attrs:{for:"fechaVencimiento"}},[e._v("Fecha de valoración")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.abogado.fechaValoracion,expression:"abogado.fechaValoracion"}],attrs:{type:"date",id:"fechaValoracion"},domProps:{value:e.abogado.fechaValoracion},on:{input:function(a){a.target.composing||e.$set(e.abogado,"fechaValoracion",a.target.value)}}})]),a("div",{staticClass:"col-6"},[a("label",{staticClass:"text-black",attrs:{for:"fechaVencimiento"}},[e._v("Situación laboral")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.abogado.situacionLaboral,expression:"abogado.situacionLaboral"}],attrs:{type:"text",id:"situacionLaboral"},domProps:{value:e.abogado.situacionLaboral},on:{input:function(a){a.target.composing||e.$set(e.abogado,"situacionLaboral",a.target.value)}}})]),a("div",{staticClass:"col-6 mt-3"},[a("label",{staticClass:"text-black",attrs:{for:"fechaVencimiento"}},[e._v("Fecha de demanda")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.abogado.fechaDemanda,expression:"abogado.fechaDemanda"}],attrs:{type:"date",id:"fechaDemanda"},domProps:{value:e.abogado.fechaDemanda},on:{input:function(a){a.target.composing||e.$set(e.abogado,"fechaDemanda",a.target.value)}}})]),a("div",{staticClass:"col-6 mt-3"},[a("label",{staticClass:"text-black",attrs:{for:"fechaVencimiento"}},[e._v("Fecha de accidente")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.abogado.fechaAccidente,expression:"abogado.fechaAccidente"}],attrs:{type:"date",id:"fechaAccidente"},domProps:{value:e.abogado.fechaAccidente},on:{input:function(a){a.target.composing||e.$set(e.abogado,"fechaAccidente",a.target.value)}}})]),a("div",{staticClass:"col-6 mt-3"},[a("label",{staticClass:"text-black",attrs:{for:"fechaVencimiento"}},[e._v("Quien es el contrario")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.abogado.contrario,expression:"abogado.contrario"}],attrs:{type:"text",id:"contrario"},domProps:{value:e.abogado.contrario},on:{input:function(a){a.target.composing||e.$set(e.abogado,"contrario",a.target.value)}}})]),a("div",{staticClass:"col-6 mt-3"},[a("label",{staticClass:"text-black",attrs:{for:"fechaVencimiento"}},[e._v("Tipo de accidente")]),a("br"),a("select",{directives:[{name:"model",rawName:"v-model",value:e.abogado.tipoAccidente,expression:"abogado.tipoAccidente"}],attrs:{id:"tipoAccidente"},on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.abogado,"tipoAccidente",a.target.multiple?t:t[0])}}},[a("option",{attrs:{value:"accidente"}},[e._v("Accidente")]),a("option",{attrs:{value:"caida"}},[e._v("Caída")])])]),a("div",{staticClass:"col-6 mt-3"},[a("label",{staticClass:"text-black",attrs:{for:"fechaVencimiento"}},[e._v("Condenado a costas")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.abogado.condenadoCostas,expression:"abogado.condenadoCostas"}],staticStyle:{"max-height":"min-content"},attrs:{type:"radio",id:"condenadoCostas",value:"true"},domProps:{checked:e._q(e.abogado.condenadoCostas,"true")},on:{change:function(a){return e.$set(e.abogado,"condenadoCostas","true")}}}),e._v(" Si\n                  "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.abogado.condenadoCostas,expression:"abogado.condenadoCostas"}],staticStyle:{"max-height":"min-content"},attrs:{type:"radio",id:"condenadoCostas",value:"false"},domProps:{checked:e._q(e.abogado.condenadoCostas,"false")},on:{change:function(a){return e.$set(e.abogado,"condenadoCostas","false")}}}),e._v(" No\n                ")]),a("div",{staticClass:"col-12 mt-4"},[a("label",{staticClass:"text-white custom-file-upload",attrs:{for:"file-upload"}},[a("input",{attrs:{type:"file",id:"file-upload",multiple:""},on:{change:e.onFileChange}}),e._v("\n                    Seleccionar archivo\n                  ")]),a("p-button",{staticClass:"ml-4",attrs:{type:"info",round:"",disabled:!e.file},nativeOn:{click:function(a){return a.preventDefault(),e.uploadFile("abogado")}}},[e._v("\n                    Subir Archivo\n                  ")])],1),e.files.abogado?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h4",[e._v("Archivos Subidos:")]),a("div",{staticClass:"row"},e._l(e.files.abogado,(function(s){return a("div",{key:s.name,staticClass:"col-3 text-center;"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[s.name.includes(".pdf")||s.name.includes(".doc")||s.name.includes(".docx")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}):s.name.includes(".png")||s.name.includes(".jpg")||s.name.includes(".jpeg")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("4c8b"),alt:""}}):a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",[e._v(e._s(s.name))]),a("span",[e._v("Fecha de archivo subido: "+e._s(s.date?s.date.split("T")[0]:"Hoy"))])]),a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"abogado")}}},[a("p-button",{staticClass:"mt-2",attrs:{type:"danger",round:"",disabled:!s}},[e._v("\n                          Eliminar\n                      ")])],1)])})),0)])]):e._e()])]):e._e()])])],1)],1):e._e(),!e.showAsSuperAdmin&&e.caseDetail.telEspecialista!==e.userInfo.tel||e.isDespacho?e._e():a("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[a("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-5",modifiers:{"accordion-5":!0}}],attrs:{block:"",variant:"info"}},[e._v("Factura especialista")])],1),a("b-collapse",{attrs:{id:"accordion-5",accordion:"my-accordion",role:"tabpanel"}},[a("b-card-body",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h3",[e._v("Factura del especialista")]),a("label",{staticClass:"text-white custom-file-upload",attrs:{for:"file-upload"}},[a("input",{attrs:{type:"file",id:"file-upload",multiple:""},on:{change:e.onFileChange}}),e._v("\n                  Seleccionar archivo\n                ")]),a("p-button",{staticClass:"ml-4",attrs:{type:"info",round:"",disabled:!e.file},nativeOn:{click:function(a){return a.preventDefault(),e.uploadFile("facturaEspecialista")}}},[e._v("\n                  Subir Archivo\n                ")])],1)]),e.files.facturaEspecialista?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h4",[e._v("Archivos Subidos:")]),a("div",{staticClass:"row"},e._l(e.files.facturaEspecialista,(function(s){return a("div",{key:s.name,staticClass:"col-3 text-center;"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[s.name.includes(".pdf")||s.name.includes(".doc")||s.name.includes(".docx")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}):s.name.includes(".png")||s.name.includes(".jpg")||s.name.includes(".jpeg")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("4c8b"),alt:""}}):a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",[e._v(e._s(s.name))]),a("br"),a("span",[e._v("Fecha de archivo subido: "+e._s(s.date?s.date.split("T")[0]:"Hoy"))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"facturaEspecialista")}}},[a("p-button",{staticClass:"mt-2",attrs:{type:"danger",round:""}},[e._v("\n                          Eliminar\n                      ")])],1):e._e()])})),0)])]):e._e()])],1)],1),e.showAsSuperAdmin||e.isDespacho?a("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[a("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-9",modifiers:{"accordion-9":!0}}],attrs:{block:"",variant:"info"}},[e._v("Factura despacho")])],1),a("b-collapse",{attrs:{id:"accordion-9",accordion:"my-accordion",role:"tabpanel"}},[a("b-card-body",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h3",[e._v("Factura del despacho")]),a("label",{staticClass:"text-white custom-file-upload",attrs:{for:"file-upload"}},[a("input",{attrs:{type:"file",id:"file-upload",multiple:""},on:{change:e.onFileChange}}),e._v("\n                  Seleccionar archivo\n                ")]),a("p-button",{staticClass:"ml-4",attrs:{type:"info",round:"",disabled:!e.file},nativeOn:{click:function(a){return a.preventDefault(),e.uploadFile("facturaDespacho")}}},[e._v("\n                  Subir Archivo\n                ")])],1)]),e.files.facturaDespacho?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h4",[e._v("Archivos Subidos:")]),a("div",{staticClass:"row"},e._l(e.files.facturaDespacho,(function(s){return a("div",{key:s.name,staticClass:"col-3 text-center;"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[s.name.includes(".pdf")||s.name.includes(".doc")||s.name.includes(".docx")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}):s.name.includes(".png")||s.name.includes(".jpg")||s.name.includes(".jpeg")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("4c8b"),alt:""}}):a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",[e._v(e._s(s.name))]),a("br"),a("span",[e._v("Fecha de archivo subido: "+e._s(s.date?s.date.split("T")[0]:"Hoy"))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"facturaDespacho")}}},[a("p-button",{staticClass:"mt-2",attrs:{type:"danger",round:""}},[e._v("\n                          Eliminar\n                      ")])],1):e._e()])})),0)])]):e._e()])],1)],1):e._e(),e.isDespacho?e._e():a("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[a("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-1",modifiers:{"accordion-1":!0}}],attrs:{block:"",variant:"info"}},[e._v("Estudio de viabilidad")])],1),a("b-collapse",{attrs:{id:"accordion-1",accordion:"my-accordion",role:"tabpanel"}},[a("b-card-body",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4"},[a("label",{staticClass:"d-block",attrs:{for:"plazoEstudio"}},[e._v("Plazo")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.estudio.plazo,expression:"estudio.plazo"}],attrs:{name:"plazoEstudio",type:"date"},domProps:{value:e.estudio.plazo},on:{input:function(a){a.target.composing||e.$set(e.estudio,"plazo",a.target.value)}}})]),a("div",{staticClass:"col-4"},[a("label",{staticClass:"d-block",attrs:{for:"fechaEncargo"}},[e._v("Fecha de encargo")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.estudio.fechaEncargo,expression:"estudio.fechaEncargo"}],attrs:{name:"fechaEncargo",type:"date"},domProps:{value:e.estudio.fechaEncargo},on:{input:function(a){a.target.composing||e.$set(e.estudio,"fechaEncargo",a.target.value)}}})]),a("div",{staticClass:"col-4"},[a("label",{staticClass:"d-block",attrs:{for:"estudioEnviado"}},[e._v("Enviado al cliente: ")]),a("label",{staticClass:"mr-1",attrs:{for:"estudioEnviado"}},[e._v("Si")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.estudio.enviadoCliente,expression:"estudio.enviadoCliente"}],staticClass:"hAuto",attrs:{type:"radio",id:"estudioEnviado",name:"estudioCliente",value:"true"},domProps:{checked:e._q(e.estudio.enviadoCliente,"true")},on:{change:function(a){return e.$set(e.estudio,"enviadoCliente","true")}}}),a("label",{staticClass:"ml-3 mr-1",attrs:{for:"estudioEnviado"}},[e._v("No")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.estudio.enviadoCliente,expression:"estudio.enviadoCliente"}],staticClass:"hAuto",attrs:{type:"radio",id:"estudioEnviado",name:"estudioCliente",value:"false"},domProps:{checked:e._q(e.estudio.enviadoCliente,"false")},on:{change:function(a){return e.$set(e.estudio,"enviadoCliente","false")}}})]),e.showAsAdmin?a("div",{staticClass:"col-4 mt-4"},[a("label",{staticClass:"d-block"},[e._v("Pagado por el cliente: ")]),a("label",{staticClass:"mr-1",attrs:{for:"estudioPagadoCliente"}},[e._v("Si")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.estudio.pagadoCliente,expression:"estudio.pagadoCliente"}],staticClass:"hAuto",attrs:{type:"radio",id:"estudioPagadoCliente",name:"estudioPagoCliente",value:"true"},domProps:{checked:e._q(e.estudio.pagadoCliente,"true")},on:{change:function(a){return e.$set(e.estudio,"pagadoCliente","true")}}}),a("label",{staticClass:"ml-3 mr-1",attrs:{for:"estudioPagadoCliente"}},[e._v("No")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.estudio.pagadoCliente,expression:"estudio.pagadoCliente"}],staticClass:"hAuto",attrs:{type:"radio",id:"estudioPagadoCliente",name:"estudioPagoCliente",value:"false"},domProps:{checked:e._q(e.estudio.pagadoCliente,"false")},on:{change:function(a){return e.$set(e.estudio,"pagadoCliente","false")}}})]):e._e(),e.showAsAdmin?a("div",{staticClass:"col-4 mt-4"},[a("label",{staticClass:"d-block"},[e._v("Pagado al especialista: ")]),a("label",{staticClass:"mr-1",attrs:{for:"estudioPagadoEspecialista"}},[e._v("Si")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.estudio.pagadoEspecialista,expression:"estudio.pagadoEspecialista"}],staticClass:"hAuto",attrs:{type:"radio",id:"estudioPagadoEspecialista",name:"estudioPagoEspecialista",value:"true"},domProps:{checked:e._q(e.estudio.pagadoEspecialista,"true")},on:{change:function(a){return e.$set(e.estudio,"pagadoEspecialista","true")}}}),a("label",{staticClass:"ml-4 mr-1",attrs:{for:"estudioPagadoEspecialista"}},[e._v("No")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.estudio.pagadoEspecialista,expression:"estudio.pagadoEspecialista"}],staticClass:"hAuto",attrs:{type:"radio",id:"estudioPagadoEspecialista",name:"estudioNoPagoEspecialista",value:"false"},domProps:{checked:e._q(e.estudio.pagadoEspecialista,"false")},on:{change:function(a){return e.$set(e.estudio,"pagadoEspecialista","false")}}})]):e._e(),a("div",{staticClass:"col-12"},[a("h3",[e._v("Archivos de estudio viabilidad")]),a("label",{staticClass:"text-white custom-file-upload",attrs:{for:"file-upload"}},[a("input",{attrs:{type:"file",id:"file-upload",multiple:""},on:{change:e.onFileChange}}),e._v("\n                  Seleccionar archivo\n                ")]),a("p-button",{staticClass:"ml-4",attrs:{type:"info",round:"",disabled:!e.file},nativeOn:{click:function(a){return a.preventDefault(),e.uploadFile("viabilidad")}}},[e._v("\n                  Subir Archivo\n                ")])],1)]),e.files.viabilidad?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h4",[e._v("Archivos Subidos:")]),a("div",{staticClass:"row"},e._l(e.files.viabilidad,(function(s){return a("div",{key:s.name,staticClass:"col-3 text-center;"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[s.name.includes(".pdf")||s.name.includes(".doc")||s.name.includes(".docx")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}):s.name.includes(".png")||s.name.includes(".jpg")||s.name.includes(".jpeg")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("4c8b"),alt:""}}):a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",[e._v(e._s(s.name))]),a("span",[e._v("Fecha de archivo subido: "+e._s(s.date?s.date.split("T")[0]:"Hoy"))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"viabilidad")}}},[a("p-button",{staticClass:"mt-2",attrs:{type:"danger",round:"",disabled:!s}},[e._v("\n                          Eliminar\n                      ")])],1):e._e()])})),0)])]):e._e(),a("div",{staticClass:"col-12 pl-0"},[a("h3",[e._v("Informe pericial")]),a("label",{staticClass:"text-white custom-file-upload",attrs:{for:"file-upload"}},[a("input",{attrs:{type:"file",id:"file-upload",multiple:""},on:{change:e.onFileChange}}),e._v("\n                  Seleccionar archivo\n                ")]),a("p-button",{staticClass:"ml-4",attrs:{type:"info",round:"",disabled:!e.file},nativeOn:{click:function(a){return a.preventDefault(),e.uploadFile("informeViabilidad")}}},[e._v("\n                  Subir Archivo\n                ")])],1),e.files.informeViabilidad?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h4",[e._v("Archivos Subidos:")]),a("div",{staticClass:"row"},e._l(e.files.informeViabilidad,(function(s){return a("div",{key:s.name,staticClass:"col-3 text-center;"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[s.name.includes(".pdf")||s.name.includes(".doc")||s.name.includes(".docx")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}):s.name.includes(".png")||s.name.includes(".jpg")||s.name.includes(".jpeg")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("4c8b"),alt:""}}):a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",[e._v(e._s(s.name))]),a("br"),a("span",[e._v("Fecha de archivo subido: "+e._s(s.date?s.date.split("T")[0]:"Hoy"))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"informeViabilidad")}}},[a("p-button",{staticClass:"mt-2",attrs:{type:"danger",round:"",disabled:!s}},[e._v("\n                          Eliminar\n                      ")])],1):e._e()])})),0)])]):e._e(),e.showAsSuperAdmin?a("div",{staticClass:"col-12 pl-0"},[a("h3",[e._v("Archivos Pagos de estudio de viabilidad")]),a("label",{staticClass:"text-white custom-file-upload",attrs:{for:"file-upload"}},[a("input",{attrs:{type:"file",id:"file-upload",multiple:""},on:{change:e.onFileChange}}),e._v("\n                  Seleccionar archivo\n                ")]),a("p-button",{staticClass:"ml-4",attrs:{type:"info",round:"",disabled:!e.file},nativeOn:{click:function(a){return a.preventDefault(),e.uploadFile("viabilidadPago")}}},[e._v("\n                  Subir Archivo\n                ")])],1):e._e(),e.files.viabilidadPago&&e.showAsSuperAdmin?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h4",[e._v("Archivos Subidos:")]),a("div",{staticClass:"row"},e._l(e.files.viabilidadPago,(function(s){return a("div",{key:s.name,staticClass:"col-3 text-center;"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[s.name.includes(".pdf")||s.name.includes(".doc")||s.name.includes(".docx")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}):s.name.includes(".png")||s.name.includes(".jpg")||s.name.includes(".jpeg")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("4c8b"),alt:""}}):a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",[e._v(e._s(s.name))]),a("br"),a("span",[e._v("Fecha de archivo subido: "+e._s(s.date?s.date.split("T")[0]:"Hoy"))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"viabilidadPago")}}},[a("p-button",{staticClass:"mt-2",attrs:{type:"danger",round:"",disabled:!s}},[e._v("\n                          Eliminar\n                      ")])],1):e._e()])})),0)])]):e._e()])],1)],1),e.isDespacho?e._e():a("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[a("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-2",modifiers:{"accordion-2":!0}}],attrs:{block:"",variant:"info"}},[e._v("Informe pericial médico")])],1),a("b-collapse",{attrs:{id:"accordion-2",accordion:"my-accordion",role:"tabpanel"}},[a("b-card-body",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4"},[a("label",{staticClass:"d-block",attrs:{for:"plazoInforme"}},[e._v("Plazo")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.informe.plazo,expression:"informe.plazo"}],attrs:{name:"plazoInforme",type:"date"},domProps:{value:e.informe.plazo},on:{input:function(a){a.target.composing||e.$set(e.informe,"plazo",a.target.value)}}})]),a("div",{staticClass:"col-4"},[a("label",{staticClass:"d-block",attrs:{for:"fechaEncargo"}},[e._v("Fecha de encargo")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.informe.fechaEncargo,expression:"informe.fechaEncargo"}],attrs:{name:"fechaEncargo",type:"date"},domProps:{value:e.informe.fechaEncargo},on:{input:function(a){a.target.composing||e.$set(e.informe,"fechaEncargo",a.target.value)}}})]),a("div",{staticClass:"col-4"},[a("label",{staticClass:"d-block",attrs:{for:"informeEnviado"}},[e._v("Enviado al cliente: ")]),a("label",{staticClass:"mr-1",attrs:{for:"informeEnviado"}},[e._v("Si")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.informe.enviadoCliente,expression:"informe.enviadoCliente"}],staticClass:"hAuto",attrs:{type:"radio",id:"informeEnviado",name:"informeCliente",value:"true"},domProps:{checked:e._q(e.informe.enviadoCliente,"true")},on:{change:function(a){return e.$set(e.informe,"enviadoCliente","true")}}}),a("label",{staticClass:"ml-3 mr-1",attrs:{for:"informeEnviado"}},[e._v("No")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.informe.enviadoCliente,expression:"informe.enviadoCliente"}],staticClass:"hAuto",attrs:{type:"radio",id:"informeEnviado",name:"informeCliente",value:"false"},domProps:{checked:e._q(e.informe.enviadoCliente,"false")},on:{change:function(a){return e.$set(e.informe,"enviadoCliente","false")}}})]),e.showAsAdmin?a("div",{staticClass:"col-4 mt-4"},[a("label",{staticClass:"d-block"},[e._v("Pagado por el cliente: ")]),a("label",{staticClass:"mr-1",attrs:{for:"informePagadoCliente"}},[e._v("Si")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.informe.pagadoCliente,expression:"informe.pagadoCliente"}],staticClass:"hAuto",attrs:{type:"radio",id:"informePagadoCliente",name:"informePagoCliente",value:"true"},domProps:{checked:e._q(e.informe.pagadoCliente,"true")},on:{change:function(a){return e.$set(e.informe,"pagadoCliente","true")}}}),a("label",{staticClass:"ml-3 mr-1",attrs:{for:"informePagadoCliente"}},[e._v("No")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.informe.pagadoCliente,expression:"informe.pagadoCliente"}],staticClass:"hAuto",attrs:{type:"radio",id:"informePagadoCliente",name:"informePagoCliente",value:"false"},domProps:{checked:e._q(e.informe.pagadoCliente,"false")},on:{change:function(a){return e.$set(e.informe,"pagadoCliente","false")}}})]):e._e(),e.showAsAdmin?a("div",{staticClass:"col-4 mt-4"},[a("label",{staticClass:"d-block"},[e._v("Pagado al especialista: ")]),a("label",{staticClass:"mr-1",attrs:{for:"informePagadoEspecialista"}},[e._v("Si")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.informe.pagadoEspecialista,expression:"informe.pagadoEspecialista"}],staticClass:"hAuto",attrs:{type:"radio",id:"informePagadoEspecialista",name:"informePagoEspecialista",value:"true"},domProps:{checked:e._q(e.informe.pagadoEspecialista,"true")},on:{change:function(a){return e.$set(e.informe,"pagadoEspecialista","true")}}}),a("label",{staticClass:"ml-4 mr-1",attrs:{for:"informePagadoEspecialista"}},[e._v("No")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.informe.pagadoEspecialista,expression:"informe.pagadoEspecialista"}],staticClass:"hAuto",attrs:{type:"radio",id:"informePagadoEspecialista",name:"informePagoEspecialista",value:"false"},domProps:{checked:e._q(e.informe.pagadoEspecialista,"false")},on:{change:function(a){return e.$set(e.informe,"pagadoEspecialista","false")}}})]):e._e(),a("div",{staticClass:"col-12"},[a("h3",[e._v("Archivos de estudio informe pericial")]),a("label",{staticClass:"text-white custom-file-upload",attrs:{for:"file-upload"}},[a("input",{attrs:{type:"file",id:"file-upload",multiple:""},on:{change:e.onFileChange}}),e._v("\n                  Seleccionar archivo\n                ")]),a("p-button",{staticClass:"ml-4",attrs:{type:"info",round:"",disabled:!e.file},nativeOn:{click:function(a){return a.preventDefault(),e.uploadFile("informe")}}},[e._v("\n                  Subir Archivo\n                ")])],1)]),e.files.informe?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h4",[e._v("Archivos Subidos:")]),a("div",{staticClass:"row"},e._l(e.files.informe,(function(s){return a("div",{key:s.name,staticClass:"col-3 text-center;"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[s.name.includes(".pdf")||s.name.includes(".doc")||s.name.includes(".docx")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}):s.name.includes(".png")||s.name.includes(".jpg")||s.name.includes(".jpeg")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("4c8b"),alt:""}}):a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",[e._v(e._s(s.name))]),a("br"),a("span",[e._v("Fecha de archivo subido: "+e._s(s.date?s.date.split("T")[0]:"Hoy"))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"informe")}}},[a("p-button",{staticClass:"mt-2",attrs:{type:"danger",round:""}},[e._v("\n                          Eliminar\n                      ")])],1):e._e()])})),0)])]):e._e(),a("div",{staticClass:"col-12 pl-0"},[a("h3",[e._v("Informe pericial")]),a("label",{staticClass:"text-white custom-file-upload",attrs:{for:"file-upload"}},[a("input",{attrs:{type:"file",id:"file-upload",multiple:""},on:{change:e.onFileChange}}),e._v("\n                  Seleccionar archivo\n                ")]),a("p-button",{staticClass:"ml-4",attrs:{type:"info",round:"",disabled:!e.file},nativeOn:{click:function(a){return a.preventDefault(),e.uploadFile("informePericial")}}},[e._v("\n                  Subir Archivo\n                ")])],1),e.files.informePericial?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h4",[e._v("Archivos Subidos:")]),a("div",{staticClass:"row"},e._l(e.files.informePericial,(function(s){return a("div",{key:s.name,staticClass:"col-3 text-center;"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[s.name.includes(".pdf")||s.name.includes(".doc")||s.name.includes(".docx")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}):s.name.includes(".png")||s.name.includes(".jpg")||s.name.includes(".jpeg")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("4c8b"),alt:""}}):a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",[e._v(e._s(s.name))]),a("br"),a("span",[e._v("Fecha de archivo subido: "+e._s(s.date?s.date.split("T")[0]:"Hoy"))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"informePericial")}}},[a("p-button",{staticClass:"mt-2",attrs:{type:"danger",round:"",disabled:!s}},[e._v("\n                          Eliminar\n                      ")])],1):e._e()])})),0)])]):e._e(),e.showAsSuperAdmin?a("div",{staticClass:"col-12 pl-0"},[a("h3",[e._v("Archivos Pagos de estudio informe pericial")]),a("label",{staticClass:"text-white custom-file-upload",attrs:{for:"file-upload"}},[a("input",{attrs:{type:"file",id:"file-upload",multiple:""},on:{change:e.onFileChange}}),e._v("\n                  Seleccionar archivo\n                ")]),a("p-button",{staticClass:"ml-4",attrs:{type:"info",round:"",disabled:!e.file},nativeOn:{click:function(a){return a.preventDefault(),e.uploadFile("informePago")}}},[e._v("\n                  Subir Archivo\n                ")])],1):e._e(),e.files.informePago&&e.showAsSuperAdmin?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h4",[e._v("Archivos Subidos:")]),a("div",{staticClass:"row"},e._l(e.files.informePago,(function(s){return a("div",{key:s.name,staticClass:"col-3 text-center;"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[s.name.includes(".pdf")||s.name.includes(".doc")||s.name.includes(".docx")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}):s.name.includes(".png")||s.name.includes(".jpg")||s.name.includes(".jpeg")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("4c8b"),alt:""}}):a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",[e._v(e._s(s.name))]),a("br"),a("span",[e._v("Fecha de archivo subido: "+e._s(s.date?s.date.split("T")[0]:"Hoy"))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"informePago")}}},[a("p-button",{staticClass:"mt-2",attrs:{type:"danger",round:"",disabled:!s}},[e._v("\n                          Eliminar\n                      ")])],1):e._e()])})),0)])]):e._e()])],1)],1),e.isDespacho?e._e():a("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[a("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-3",modifiers:{"accordion-3":!0}}],attrs:{block:"",variant:"info"}},[e._v("Ratificación en juicio")])],1),a("b-collapse",{attrs:{id:"accordion-3",accordion:"my-accordion",role:"tabpanel"}},[a("b-card-body",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4 mt-4"},[a("label",{staticClass:"d-block",attrs:{for:"ratificacionEnviado"}},[e._v("Enviado al cliente: ")]),a("label",{staticClass:"mr-1",attrs:{for:"ratificacionEnviado"}},[e._v("Si")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.ratificacion.enviadoCliente,expression:"ratificacion.enviadoCliente"}],staticClass:"hAuto",attrs:{type:"radio",id:"ratificacionEnviado",name:"ratificacionEnviado",value:"true"},domProps:{checked:e._q(e.ratificacion.enviadoCliente,"true")},on:{change:function(a){return e.$set(e.ratificacion,"enviadoCliente","true")}}}),a("label",{staticClass:"ml-3 mr-1",attrs:{for:"ratificacionEnviado"}},[e._v("No")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.ratificacion.enviadoCliente,expression:"ratificacion.enviadoCliente"}],staticClass:"hAuto",attrs:{type:"radio",id:"ratificacionEnviado",name:"ratificacionEnviado",value:"false"},domProps:{checked:e._q(e.ratificacion.enviadoCliente,"false")},on:{change:function(a){return e.$set(e.ratificacion,"enviadoCliente","false")}}})]),e.showAsAdmin?a("div",{staticClass:"col-4 mt-4"},[a("label",{staticClass:"d-block"},[e._v("Pagado por el cliente: ")]),a("label",{staticClass:"mr-1",attrs:{for:"ratificacionPagadoCliente"}},[e._v("Si")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.ratificacion.pagadoCliente,expression:"ratificacion.pagadoCliente"}],staticClass:"hAuto",attrs:{type:"radio",id:"ratificacionPagadoCliente",name:"ratificacionPagoCliente",value:"true"},domProps:{checked:e._q(e.ratificacion.pagadoCliente,"true")},on:{change:function(a){return e.$set(e.ratificacion,"pagadoCliente","true")}}}),a("label",{staticClass:"ml-3 mr-1",attrs:{for:"ratificacionPagadoCliente"}},[e._v("No")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.ratificacion.pagadoCliente,expression:"ratificacion.pagadoCliente"}],staticClass:"hAuto",attrs:{type:"radio",id:"ratificacionPagadoCliente",name:"ratificacionPagoCliente",value:"false"},domProps:{checked:e._q(e.ratificacion.pagadoCliente,"false")},on:{change:function(a){return e.$set(e.ratificacion,"pagadoCliente","false")}}})]):e._e(),e.showAsAdmin?a("div",{staticClass:"col-4 mt-4"},[a("label",{staticClass:"d-block"},[e._v("Pagado al especialista: ")]),a("label",{staticClass:"mr-1",attrs:{for:"ratificacionPagadoEspecialista"}},[e._v("Si")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.ratificacion.pagadoEspecialista,expression:"ratificacion.pagadoEspecialista"}],staticClass:"hAuto",attrs:{type:"radio",id:"ratificacionPagadoEspecialista",name:"ratificacionPagoEspecialista",value:"true"},domProps:{checked:e._q(e.ratificacion.pagadoEspecialista,"true")},on:{change:function(a){return e.$set(e.ratificacion,"pagadoEspecialista","true")}}}),a("label",{staticClass:"ml-4 mr-1",attrs:{for:"ratificacionPagadoEspecialista"}},[e._v("No")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.ratificacion.pagadoEspecialista,expression:"ratificacion.pagadoEspecialista"}],staticClass:"hAuto",attrs:{type:"radio",id:"ratificacionPagadoEspecialista",name:"ratificacionPagoEspecialista",value:"false"},domProps:{checked:e._q(e.ratificacion.pagadoEspecialista,"false")},on:{change:function(a){return e.$set(e.ratificacion,"pagadoEspecialista","false")}}})]):e._e(),a("div",{staticClass:"col-12"},[a("h3",[e._v("Archivos de ratificación de juicio")]),a("label",{staticClass:"text-white custom-file-upload",attrs:{for:"file-upload"}},[a("input",{attrs:{type:"file",id:"file-upload",multiple:""},on:{change:e.onFileChange}}),e._v("\n                  Seleccionar archivo\n                ")]),a("p-button",{staticClass:"ml-4",attrs:{type:"info",round:"",disabled:!e.file},nativeOn:{click:function(a){return a.preventDefault(),e.uploadFile("ratificacion")}}},[e._v("\n                  Subir Archivo\n                ")])],1)]),e.files.informe?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h4",[e._v("Archivos Subidos:")]),a("div",{staticClass:"row"},e._l(e.files.ratificacion,(function(s){return a("div",{key:s.name,staticClass:"col-3 text-center;"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[s.name.includes(".pdf")||s.name.includes(".doc")||s.name.includes(".docx")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}):s.name.includes(".png")||s.name.includes(".jpg")||s.name.includes(".jpeg")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("4c8b"),alt:""}}):a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",[e._v(e._s(s.name))]),a("br"),a("span",[e._v("Fecha de archivo subido: "+e._s(s.date?s.date.split("T")[0]:"Hoy"))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"ratificacion")}}},[a("p-button",{staticClass:"mt-2",attrs:{type:"danger",round:"",disabled:!s}},[e._v("\n                          Eliminar\n                      ")])],1):e._e()])})),0)])]):e._e(),e.showAsSuperAdmin?a("div",{staticClass:"col-12 pl-0"},[a("h3",[e._v("Informe de ratificación de juicio")]),a("label",{staticClass:"text-white custom-file-upload",attrs:{for:"file-upload"}},[a("input",{attrs:{type:"file",id:"file-upload",multiple:""},on:{change:e.onFileChange}}),e._v("\n                  Seleccionar archivo\n                ")]),a("p-button",{staticClass:"ml-4",attrs:{type:"info",round:"",disabled:!e.file},nativeOn:{click:function(a){return a.preventDefault(),e.uploadFile("informeRatificacion")}}},[e._v("\n                  Subir Archivo\n                ")])],1):e._e(),e.files.informeRatificacion?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h4",[e._v("Archivos Subidos:")]),a("div",{staticClass:"row"},e._l(e.files.informeRatificacion,(function(s){return a("div",{key:s.name,staticClass:"col-3 text-center;"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[s.name.includes(".pdf")||s.name.includes(".doc")||s.name.includes(".docx")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}):s.name.includes(".png")||s.name.includes(".jpg")||s.name.includes(".jpeg")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("4c8b"),alt:""}}):a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",[e._v(e._s(s.name))]),a("br"),a("span",[e._v("Fecha de archivo subido: "+e._s(s.date?s.date.split("T")[0]:"Hoy"))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"informeRatificacion")}}},[a("p-button",{staticClass:"mt-2",attrs:{type:"danger",round:"",disabled:!s}},[e._v("\n                          Eliminar\n                      ")])],1):e._e()])})),0)])]):e._e(),e.showAsSuperAdmin?a("div",{staticClass:"col-12 pl-0"},[a("h3",[e._v("Archivos Pagos de ratificación de juicio")]),a("label",{staticClass:"text-white custom-file-upload",attrs:{for:"file-upload"}},[a("input",{attrs:{type:"file",id:"file-upload",multiple:""},on:{change:e.onFileChange}}),e._v("\n                  Seleccionar archivo\n                ")]),a("p-button",{staticClass:"ml-4",attrs:{type:"info",round:"",disabled:!e.file},nativeOn:{click:function(a){return a.preventDefault(),e.uploadFile("ratificacionPago")}}},[e._v("\n                  Subir Archivo\n                ")])],1):e._e(),e.files.ratificacionPago&&e.showAsSuperAdmin?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h4",[e._v("Archivos Subidos:")]),a("div",{staticClass:"row"},e._l(e.files.ratificacionPago,(function(s){return a("div",{key:s.name,staticClass:"col-3 text-center;"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[s.name.includes(".pdf")||s.name.includes(".doc")||s.name.includes(".docx")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}):s.name.includes(".png")||s.name.includes(".jpg")||s.name.includes(".jpeg")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("4c8b"),alt:""}}):a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",[e._v(e._s(s.name))]),a("br"),a("span",[e._v("Fecha de archivo subido: "+e._s(s.date?s.date.split("T")[0]:"Hoy"))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"ratificacionPago")}}},[a("p-button",{staticClass:"mt-2",attrs:{type:"danger",round:"",disabled:!s}},[e._v("\n                          Eliminar\n                      ")])],1):e._e()])})),0)])]):e._e()])],1)],1),e.successMessage?a("b-alert",{attrs:{variant:"success",show:""}},[e._v(e._s(e.successMessage))]):e._e(),e.errorMessage?a("b-alert",{attrs:{variant:"danger",show:""}},[e._v(e._s(e.errorMessage))]):e._e(),e.showSuccess?a("b-alert",{attrs:{variant:"success",show:""}},[e._v("Caso actualizado correctamente")]):e._e(),a("p-button",{staticClass:"mt-4",staticStyle:{width:"100%"},attrs:{type:"info",round:""},nativeOn:{click:function(a){return a.preventDefault(),e.saveCase.apply(null,arguments)}}},[e._v("\n        Guardar caso\n      ")])],1):e._e(),a("b-modal",{attrs:{id:"bv-modal-example","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Editar especialista\n    ")]},proxy:!0}]),model:{value:e.editEspe,callback:function(a){e.editEspe=a},expression:"editEspe"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.espeChange,expression:"espeChange"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.espeChange=a.target.multiple?t:t[0]}}},e._l(e.especialistas,(function(t,s){return a("option",{key:s,domProps:{value:t.tel}},[e._v(e._s(`${t.nombre} ${t.apellidos}`))])})),0),a("i",{staticClass:"mt-3",staticStyle:{"white-space-collapse":"preserve-breaks"}},[e._v("\n      *Para poder ver reflejado el cambio de especialista tienes que volver al listado principal del cual viniste.\n    ")]),a("p-button",{staticClass:"mt-4",attrs:{type:"info",round:""},nativeOn:{click:function(a){return a.preventDefault(),e.updateEspe.apply(null,arguments)}}},[e._v("\n      Aceptar\n    ")])],1),a("b-modal",{attrs:{id:"bv-modal-example","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Editar especialidad\n    ")]},proxy:!0}]),model:{value:e.editEspecialidad,callback:function(a){e.editEspecialidad=a},expression:"editEspecialidad"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.especialidadChange,expression:"especialidadChange"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.especialidadChange=a.target.multiple?t:t[0]}}},e._l(e.especialidades,(function(t,s){return a("option",{key:s,domProps:{value:t.id}},[e._v(e._s(t.nombre))])})),0),a("i",{staticClass:"mt-3",staticStyle:{"white-space-collapse":"preserve-breaks"}},[e._v("\n      *Para poder ver reflejado el cambio de especialista tienes que volver al listado principal del cual viniste.\n    ")]),a("p-button",{staticClass:"mt-4",attrs:{type:"info",round:""},nativeOn:{click:function(a){return a.preventDefault(),e.updateEspecialidad.apply(null,arguments)}}},[e._v("\n      Aceptar\n    ")])],1),a("b-modal",{attrs:{id:"bv-modal-example","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Finalizar caso\n    ")]},proxy:!0}]),model:{value:e.modalCloseCase,callback:function(a){e.modalCloseCase=a},expression:"modalCloseCase"}},[a("p",[e._v("Deseas finalizar el caso")]),a("p-button",{staticClass:"mt-4",attrs:{type:"info",round:""},nativeOn:{click:function(a){return a.preventDefault(),e.closeCase.apply(null,arguments)}}},[e._v("\n      Aceptar\n    ")])],1),a("b-modal",{attrs:{id:"budget-modal","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Realizar Factura\n    ")]},proxy:!0}]),model:{value:e.modalFactura,callback:function(a){e.modalFactura=a},expression:"modalFactura"}},[a("factura")],1),a("b-modal",{attrs:{id:"delete-file-modal","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Confirmar eliminación\n    ")]},proxy:!0}]),model:{value:e.modalDeleteFile,callback:function(a){e.modalDeleteFile=a},expression:"modalDeleteFile"}},[a("p",[e._v("¿Estás seguro de que deseas eliminar el archivo "),a("strong",[e._v(e._s(e.fileToDelete&&e.fileToDelete.name))]),e._v("?")]),a("p-button",{staticClass:"mt-4 mr-2",attrs:{type:"danger",round:""},nativeOn:{click:function(a){return a.preventDefault(),e.deleteFile.apply(null,arguments)}}},[e._v("\n      Eliminar\n    ")]),a("p-button",{staticClass:"mt-4",attrs:{type:"secondary",round:""},nativeOn:{click:function(a){a.preventDefault(),e.modalDeleteFile=!1}}},[e._v("\n      Cancelar\n    ")])],1)],1)},wo=[],Oo={components:{Factura:oi},props:{caseDetail:{type:Object},userCase:{type:Object},user:{type:Object},isClient:{type:Boolean},isDespacho:{type:Boolean}},setup(e,{emit:a}){console.log(e.caseDetail,"Este es el caso");const t=Object(s["ref"])(!1),i=Object(s["ref"])(e.caseDetail.estudio?e.caseDetail.estudio:{}),n=Object(s["ref"])(e.caseDetail.informe?e.caseDetail.informe:{}),o=Object(s["ref"])(e.caseDetail.abogado?e.caseDetail.abogado:{}),r=Object(s["ref"])(e.caseDetail.ratificacion?e.caseDetail.ratificacion:{}),d=Object(s["ref"])(e.caseDetail.especialista?e.caseDetail.especialista:{}),u=Object(s["ref"])(null),m=Object(s["ref"])(null),b=Object(s["ref"])(""),f=Object(s["ref"])(""),C=Object(s["ref"])([]),h=Object(s["ref"])(!1),g=Object(s["ref"])(!1),y=Object(s["ref"])([]),_=Object(s["ref"])([]),w=Object(s["ref"])([]),O=Object(s["ref"])(""),j=Object(s["ref"])(""),k=Object(s["ref"])(!1),A=Object(s["ref"])(!1),x=Object(s["ref"])(!1),S=Object(s["ref"])(!1),D=Object(s["ref"])(null),E=Object(s["ref"])(null),P=Object(s["ref"])([]),F=Object(s["ref"])(JSON.parse(localStorage.getItem("userInform"))),N=e=>{if(!e)return"NA";const a=new Date(e),t=String(a.getDate()).padStart(2,"0"),s=String(a.getMonth()+1).padStart(2,"0"),i=a.getFullYear();return`${t}/${s}/${i}`},I=JSON.parse(localStorage.getItem("userInform")),L=Object(s["computed"])(()=>!(!I.admin||!0!==I.admin)),T=Object(s["computed"])(()=>!(!I.superAdmin||!0!==I.superAdmin)),Q=async()=>{const a=Object(l["d"])(p,"casos",e.caseDetail.id);await Object(l["m"])(a,{estudioPlazo:i.value.plazo?new Date(i.value.plazo).getTime():null,informePlazo:n.value.plazo?new Date(n.value.plazo).getTime():null,ratificacionPlazo:r.value.plazo?new Date(r.value.plazo).getTime():null,ratificacionJuicio:r.value.fechaJuicio?new Date(r.value.fechaJuicio).getTime():null,estudio:i.value,informe:n.value,ratificacion:r.value,abogado:o.value,especialista:d.value})},M=async()=>{const a=Object(l["d"])(p,"casos",e.caseDetail.id);await Object(l["m"])(a,{status:"4"}),A.value=!1},$=async()=>{const a=Object(l["d"])(p,"casos",e.caseDetail.id);await Object(l["m"])(a,{telEspecialista:O.value}),k.value=!0,h.value=!1,setTimeout(()=>{k.value=!1},4e3)},B=async()=>{const a=Object(l["d"])(p,"casos",e.caseDetail.id);await Object(l["m"])(a,{especialidad:j.value}),k.value=!0,g.value=!1,setTimeout(()=>{k.value=!1},4e3)},V=e=>{u.value=Array.from(e.target.files),b.value="",m.value=null,f.value=""},z=async()=>{try{const e=new FormData,a=window.location.hash.split("/")[window.location.hash.split("/").length-1];e.append("to","coordinacionpraxis@informesmedicospericiales.com"),e.append("subject","Nuevo documento subido"),e.append("text","Nuevo documento subido de praxis - link al perfil: https://alexmc14.github.io/peritomedicotest/#/perfil/"+a),e.append("html",`<p>Nuevo documento subido de praxis</p><p><a href="https://alexmc14.github.io/peritomedicotest/#/perfil/${a}" target="_blank">Ver perfil</a></p>`);const t=await fetch(li,{method:"POST",body:e}),s=await t.json();if(!s.success)throw new Error(s.error||"Error al enviar el email");console.log("Email enviado correctamente:",s.messageId)}catch(e){console.error("Error al enviar el presupuesto:",e),alert("Hubo un error al enviar el presupuesto: "+e.message)}},R=async()=>{try{const a=new FormData,t=window.location.hash.split("/")[window.location.hash.split("/").length-1];a.append("to","lsanchezamo@yahoo.es"),a.append("subject","Nuevo informe subido"),a.append("text",`Nuevo informe subido por ${F.value.nombre} ${F.value.apellidos} al cliente ${e.userCase.nombre} ${e.userCase.apellidos} - link al perfil: https://alexmc14.github.io/peritomedicotest/#/perfil/${t}`),a.append("html",`<p>Nuevo informe subido por <strong>${F.value.nombre} ${F.value.apellidos}</strong> al cliente <strong>${e.userCase.nombre} ${e.userCase.apellidos}</strong></p><p><a href="https://alexmc14.github.io/peritomedicotest/#/perfil/${t}" target="_blank">Ver perfil</a></p>`);const s=await fetch(li,{method:"POST",body:a}),i=await s.json();if(!i.success)throw new Error(i.error||"Error al enviar el email");console.log("Email enviado correctamente:",i.messageId)}catch(a){console.error("Error al enviar el presupuesto:",a),alert("Hubo un error al enviar el presupuesto: "+a.message)}},J=a=>{if(!u.value||0===u.value.length)return f.value="Por favor selecciona un archivo.",void setTimeout(()=>{f.value=""},2e3);const t=Array.isArray(u.value)?u.value:[u.value];for(const s of t){const t=Object(c["f"])(v,`casos/${e.caseDetail.factura}/${a}/${s.name}`),i=Object(c["h"])(t,s);i.on("state_changed",e=>{const a=e.bytesTransferred/e.totalBytes*100;m.value=a.toFixed(0)},e=>{f.value="Error al subir el archivo: "+e.message,setTimeout(()=>{f.value=""},2e3)},()=>{Object(c["b"])(i.snapshot.ref).then(e=>{b.value="Archivo subido con éxito! URL: "+e,setTimeout(()=>{b.value=""},2e3),"viabilidad"===a&&C.value.viabilidad.push({name:s.name,url:e,ref:i.snapshot.ref}),"informe"===a&&C.value.informe.push({name:s.name,url:e,ref:i.snapshot.ref}),"ratificacion"===a&&C.value.ratificacion.push({name:s.name,url:e,ref:i.snapshot.ref}),"viabilidadPago"===a&&C.value.viabilidadPago.push({name:s.name,url:e,ref:i.snapshot.ref}),"informePago"===a&&C.value.informePago.push({name:s.name,url:e,ref:i.snapshot.ref}),"ratificacionPago"===a&&C.value.ratificacionPago.push({name:s.name,url:e,ref:i.snapshot.ref}),"informeViabilidad"===a&&(C.value.informeViabilidad.push({name:s.name,url:e,ref:i.snapshot.ref}),R()),"informePericial"===a&&(C.value.informePericial.push({name:s.name,url:e,ref:i.snapshot.ref}),R()),"informeRatificacion"===a&&(C.value.informeRatificacion.push({name:s.name,url:e,ref:i.snapshot.ref}),R()),"facturaEspecialista"===a&&C.value.facturaEspecialista.push({name:s.name,url:e,ref:i.snapshot.ref}),"abogado"===a&&C.value.abogado.push({name:s.name,url:e,ref:i.snapshot.ref}),"facturaDespacho"===a&&C.value.facturaDespacho.push({name:s.name,url:e,ref:i.snapshot.ref}),u.value=null})})}"praxis"!==e.caseDetail.especialidadNombre.toLowerCase()||a.toLowerCase().includes("pago")||a.toLowerCase().includes("facturaEspecialista")||z()},q=async()=>{const a=["viabilidad","informe","ratificacion","viabilidadPago","informePago","ratificacionPago","informeViabilidad","informePericial","informeRatificacion","facturaEspecialista","abogado","facturaDespacho"];let t={viabilidad:[],informe:[],ratificacion:[],viabilidadPago:[],informePago:[],ratificacionPago:[],informeViabilidad:[],informePericial:[],informeRatificacion:[],facturaEspecialista:[],abogado:[],facturaDespacho:[]};await Promise.all(a.map(async a=>{const s=Object(c["f"])(v,`casos/${e.caseDetail.factura}/${a}`),i=await Object(c["e"])(s);t[a]=await Promise.all(i.items.map(async e=>{const a=await Object(c["b"])(e),t=Object(c["d"])(),s=a,i=Object(c["f"])(t,s),n=await Object(c["c"])(i);return{name:e.name,url:a,ref:e,date:n.timeCreated}}))})),t.informe.length>0&&(t.informe=t.informe.sort((e,a)=>new Date(e.date)-new Date(a.date))),t.ratificacion.length>0&&(t.ratificacion=t.ratificacion.sort((e,a)=>new Date(e.date)-new Date(a.date))),t.viabilidad.length>0&&(t.viabilidad=t.viabilidad.sort((e,a)=>new Date(e.date)-new Date(a.date))),t.viabilidadPago.length>0&&(t.viabilidadPago=t.viabilidadPago.sort((e,a)=>new Date(e.date)-new Date(a.date))),t.informePago.length>0&&(t.informePago=t.informePago.sort((e,a)=>new Date(e.date)-new Date(a.date))),t.ratificacionPago.length>0&&(t.ratificacionPago=t.ratificacionPago.sort((e,a)=>new Date(e.date)-new Date(a.date))),t.informeViabilidad.length>0&&(t.informeViabilidad=t.informeViabilidad.sort((e,a)=>new Date(e.date)-new Date(a.date))),t.informePericial.length>0&&(t.informePericial=t.informePericial.sort((e,a)=>new Date(e.date)-new Date(a.date))),t.informeRatificacion.length>0&&(t.informeRatificacion=t.informeRatificacion.sort((e,a)=>new Date(e.date)-new Date(a.date))),t.facturaEspecialista.length>0&&(t.facturaEspecialista=t.facturaEspecialista.sort((e,a)=>new Date(e.date)-new Date(a.date))),t.abogado.length>0&&(t.abogado=t.abogado.sort((e,a)=>new Date(e.date)-new Date(a.date))),t.facturaDespacho.length>0&&(t.facturaDespacho=t.facturaDespacho.sort((e,a)=>new Date(e.date)-new Date(a.date))),C.value=t},U=(e,a)=>{D.value=e,E.value=a,S.value=!0},H=async()=>{if(!D.value||!E.value)return;const e=D.value,a=E.value,t=e.ref;try{await Object(c["a"])(t),"viabilidad"===a&&(C.value.viabilidad=C.value.viabilidad.filter(a=>a.name!==e.name)),"informe"===a&&(C.value.informe=C.value.informe.filter(a=>a.name!==e.name)),"ratificacion"===a&&(C.value.ratificacion=C.value.ratificacion.filter(a=>a.name!==e.name)),"viabilidadPago"===a&&(C.value.viabilidadPago=C.value.viabilidadPago.filter(a=>a.name!==e.name)),"informePago"===a&&(C.value.informePago=C.value.informePago.filter(a=>a.name!==e.name)),"ratificacionPago"===a&&(C.value.ratificacionPago=C.value.ratificacionPago.filter(a=>a.name!==e.name)),"informeViabilidad"===a&&(C.value.informeViabilidad=C.value.informeViabilidad.filter(a=>a.name!==e.name)),"informePericial"===a&&(C.value.informePericial=C.value.informePericial.filter(a=>a.name!==e.name)),"informeRatificacion"===a&&(C.value.informeRatificacion=C.value.informeRatificacion.filter(a=>a.name!==e.name)),"facturaEspecialista"===a&&(C.value.facturaEspecialista=C.value.facturaEspecialista.filter(a=>a.name!==e.name)),"abogado"===a&&(C.value.abogado=C.value.abogado.filter(a=>a.name!==e.name)),"facturaDespacho"===a&&(C.value.facturaDespacho=C.value.facturaDespacho.filter(a=>a.name!==e.name)),b.value=`Archivo ${e.name} eliminado exitosamente.`,setTimeout(()=>{b.value=""},2e3),S.value=!1,D.value=null,E.value=null}catch(s){console.error("Error al eliminar el archivo:",s),f.value="Error al eliminar el archivo: "+s.message,setTimeout(()=>{f.value=""},2e3),S.value=!1,D.value=null,E.value=null}},W=async()=>{y.value=(await Object(l["f"])(Object(l["b"])(p,"especialistas"))).docs.map(e=>({id:e.id,...e.data()})).sort((e,a)=>`${e.nombre} ${e.apellidos}`.localeCompare(`${a.nombre} ${a.apellidos}`))},G=async()=>{_.value=(await Object(l["f"])(Object(l["b"])(p,"especialidades"))).docs.map(e=>({id:e.id,...e.data()}))},Y=async()=>{if(e.userCase&&e.userCase.tel&&e.user)try{const a=Object(l["k"])(Object(l["b"])(p,"citas"),Object(l["n"])("cliente.telCliente","==",e.isClient?e.user.tel:e.userCase.tel)),t=await Object(l["f"])(a);P.value=t.docs.map(e=>({id:e.id,...e.data()})).sort((e,a)=>new Date(a.fecha)-new Date(e.fecha))}catch(a){console.error("Error al obtener citas del cliente:",a),P.value=[]}};return Object(s["watch"])(h,e=>{!0===h.value&&0===y.value.length?W():!0===h.value&&console.log(y.value)}),Object(s["watch"])(g,e=>{!0===g.value&&0===_.value.length?G():!0===g.value&&console.log(_.value)}),Object(s["watch"])(()=>e.userCase,e=>{e&&e.tel&&Y()},{immediate:!0}),q(),{formatDate:N,comunidades:ba,provincias:fa,showAsAdmin:L,estudio:i,informe:n,ratificacion:r,showSuccess:t,closeCase:M,modalCloseCase:A,saveCase:()=>{t.value=!0,setTimeout(()=>{t.value=!1},2e3),Q()},openAllFiles:e=>{e.forEach((e,a)=>{e.url&&setTimeout(()=>{window.open(e.url,"_blank")},500*a)})},markAsClicked:e=>{console.log(e),w.value.includes(e)||w.value.push(e)},descargarArchivo:(e,a)=>{console.log(e);const t=document.createElement("a");t.href=e,t.download=a,document.body.appendChild(t),t.click(),document.body.removeChild(t)},onFileChange:V,uploadFile:J,uploadProgress:m,successMessage:b,errorMessage:f,file:u,files:C,deleteFile:H,confirmDeleteFile:U,modalDeleteFile:S,fileToDelete:D,editEspe:h,editEspecialidad:g,especialidades:_,especialistas:y,espeChange:O,especialidadChange:j,updateEspe:$,showSuccessEspe:k,updateEspecialidad:B,userInfo:F,showAsSuperAdmin:T,clickedFiles:w,modalFactura:x,citasCliente:P,abogado:o,userData:I,especialista:d}}},jo=Oo,ko=(t("510d"),Object(h["a"])(jo,_o,wo,!1,null,null,null)),Ao=ko.exports,xo=function(){var e=this,a=e._self._c;return a("card",{staticClass:"card-user"},[e.showSuccess?a("b-alert",{staticStyle:{position:"fixed",width:"100%",top:"0px","z-index":"9999"},attrs:{variant:"success",show:""}},[e._v("Caso actualizado correctamente")]):e._e(),a("div",[a("span",{staticStyle:{color:"#007bff",cursor:"pointer"},on:{click:function(a){return e.$emit("back")}}},[e._v("Volver listado casos cliente")])]),a("div",{staticClass:"row mb-4 mt-3"},[a("div",{staticClass:"col-md-6 col-sm-12"},[a("h4",{staticClass:"title"},[e._v("Caso Valmer #"+e._s(e.caseDetail.id))])]),a("div",{staticClass:"col-md-6 col-sm-12"},[a("h4",{staticClass:"title"},[e._v("Datos del Perito")])]),a("div",{staticClass:"col-md-6 col-sm-12"},[a("div",{staticClass:"mt-2"},[a("span",{attrs:{for:""}},[e._v("Estado: "+e._s(e.estadoTexto))])]),a("div",{staticClass:"mt-2"},[a("span",{attrs:{for:""}},[e._v("Fecha alta caso: "+e._s(e.formatDate(e.caseDetail.time)))])]),a("div",{staticClass:"mt-2"},[a("span",{attrs:{for:""}},[e._v("Especialidad: "+e._s(e.caseDetail.nombreEspe||"N/A"))])])]),a("div",{staticClass:"col-md-6 col-sm-12"},[a("div",{},[a("span",[e._v(e._s(e.caseDetail.peritoNombre)+" "+e._s(e.caseDetail.peritoApellidos))])]),a("div",{staticClass:"mt-2"},[a("span",[e._v(e._s(e.caseDetail.telEspecialista))])])])]),a("div",{staticClass:"accordion",attrs:{role:"tablist"}},[a("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[a("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-documentacion",modifiers:{"accordion-documentacion":!0}}],attrs:{block:"",variant:"info"}},[e._v("Documentación")])],1),a("b-collapse",{attrs:{id:"accordion-documentacion",accordion:"valmer-accordion",role:"tabpanel"}},[a("b-card-body",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("label",{staticClass:"text-white custom-file-upload",attrs:{for:"file-upload-documentacion"}},[a("input",{attrs:{type:"file",id:"file-upload-documentacion",multiple:""},on:{change:e.onFileChange}}),e._v("\n                Seleccionar archivo\n              ")]),a("p-button",{staticClass:"ml-4",attrs:{type:"info",round:"",disabled:!e.file},nativeOn:{click:function(a){return a.preventDefault(),e.uploadFile("documentacion")}}},[e._v("\n                Subir Archivo\n              ")])],1)]),e.files.documentacion&&e.files.documentacion.length>0?a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col-12"},[a("h4",[e._v("Archivos Subidos:")]),a("div",{staticClass:"row"},e._l(e.files.documentacion,(function(s){return a("div",{key:s.name,staticClass:"col-3 text-center"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[s.name.includes(".pdf")||s.name.includes(".doc")||s.name.includes(".docx")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}):s.name.includes(".png")||s.name.includes(".jpg")||s.name.includes(".jpeg")?a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("4c8b"),alt:""}}):a("img",{staticClass:"mb-3",staticStyle:{"max-width":"75px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",[e._v(e._s(s.name))]),a("br"),a("span",[e._v("Fecha: "+e._s(s.date?s.date.split("T")[0]:"Hoy"))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"documentacion")}}},[a("p-button",{staticClass:"mt-2",attrs:{type:"danger",round:""}},[e._v("Eliminar")])],1):e._e()])})),0)])]):e._e()])],1)],1),a("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[a("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-estudio-documentacion",modifiers:{"accordion-estudio-documentacion":!0}}],attrs:{block:"",variant:"info"}},[e._v("Estudio de documentación")])],1),a("b-collapse",{attrs:{id:"accordion-estudio-documentacion",accordion:"valmer-accordion",role:"tabpanel"}},[a("b-card-body",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("h5",[e._v("Informe estudio de documentación")]),a("label",{staticClass:"text-white custom-file-upload",attrs:{for:"file-upload-estudio-informe"}},[a("input",{attrs:{type:"file",id:"file-upload-estudio-informe",multiple:""},on:{change:e.onFileChange}}),e._v("\n                Seleccionar archivo\n              ")]),a("p-button",{staticClass:"ml-4",attrs:{type:"info",round:"",disabled:!e.file},nativeOn:{click:function(a){return a.preventDefault(),e.uploadFile("estudioDocumentacionInforme")}}},[e._v("\n                Subir\n              ")]),e.files.estudioDocumentacionInforme&&e.files.estudioDocumentacionInforme.length>0?a("div",{staticClass:"mt-3"},[a("div",{staticClass:"row"},e._l(e.files.estudioDocumentacionInforme,(function(s){return a("div",{key:s.name,staticClass:"col-6 text-center"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[a("img",{staticClass:"mb-2",staticStyle:{"max-width":"50px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",{staticStyle:{"font-size":"12px"}},[e._v(e._s(s.name))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"estudioDocumentacionInforme")}}},[a("p-button",{staticClass:"mt-1",attrs:{type:"danger",round:"",size:"sm"}},[e._v("Eliminar")])],1):e._e()])})),0)]):e._e()],1),a("div",{staticClass:"col-md-6"},[a("h5",[e._v("Factura estudio de documentación")]),a("label",{staticClass:"text-white custom-file-upload",attrs:{for:"file-upload-estudio-factura"}},[a("input",{attrs:{type:"file",id:"file-upload-estudio-factura",multiple:""},on:{change:e.onFileChange}}),e._v("\n                Seleccionar archivo\n              ")]),a("p-button",{staticClass:"ml-4",attrs:{type:"info",round:"",disabled:!e.file},nativeOn:{click:function(a){return a.preventDefault(),e.uploadFile("estudioDocumentacionFactura")}}},[e._v("\n                Subir\n              ")]),e.files.estudioDocumentacionFactura&&e.files.estudioDocumentacionFactura.length>0?a("div",{staticClass:"mt-3"},[a("div",{staticClass:"row"},e._l(e.files.estudioDocumentacionFactura,(function(s){return a("div",{key:s.name,staticClass:"col-6 text-center"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[a("img",{staticClass:"mb-2",staticStyle:{"max-width":"50px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",{staticStyle:{"font-size":"12px"}},[e._v(e._s(s.name))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"estudioDocumentacionFactura")}}},[a("p-button",{staticClass:"mt-1",attrs:{type:"danger",round:"",size:"sm"}},[e._v("Eliminar")])],1):e._e()])})),0)]):e._e()],1)])])],1)],1),a("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[a("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-visita1",modifiers:{"accordion-visita1":!0}}],attrs:{block:"",variant:"info"}},[e._v("Primera visita")])],1),a("b-collapse",{attrs:{id:"accordion-visita1",accordion:"valmer-accordion",role:"tabpanel"}},[a("b-card-body",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("h5",[e._v("Informe primera visita")]),a("label",{staticClass:"text-white custom-file-upload",attrs:{for:"file-upload-visita1-informe"}},[a("input",{attrs:{type:"file",id:"file-upload-visita1-informe",multiple:""},on:{change:e.onFileChange}}),e._v("\n                Seleccionar archivo\n              ")]),a("p-button",{staticClass:"ml-4",attrs:{type:"info",round:"",disabled:!e.file},nativeOn:{click:function(a){return a.preventDefault(),e.uploadFile("visita1Informe")}}},[e._v("\n                Subir\n              ")]),e.files.visita1Informe&&e.files.visita1Informe.length>0?a("div",{staticClass:"mt-3"},[a("div",{staticClass:"row"},e._l(e.files.visita1Informe,(function(s){return a("div",{key:s.name,staticClass:"col-6 text-center"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[a("img",{staticClass:"mb-2",staticStyle:{"max-width":"50px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",{staticStyle:{"font-size":"12px"}},[e._v(e._s(s.name))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"visita1Informe")}}},[a("p-button",{staticClass:"mt-1",attrs:{type:"danger",round:"",size:"sm"}},[e._v("Eliminar")])],1):e._e()])})),0)]):e._e()],1),a("div",{staticClass:"col-md-6"},[a("h5",[e._v("Factura primera visita")]),a("label",{staticClass:"text-white custom-file-upload",attrs:{for:"file-upload-visita1-factura"}},[a("input",{attrs:{type:"file",id:"file-upload-visita1-factura",multiple:""},on:{change:e.onFileChange}}),e._v("\n                Seleccionar archivo\n              ")]),a("p-button",{staticClass:"ml-4",attrs:{type:"info",round:"",disabled:!e.file},nativeOn:{click:function(a){return a.preventDefault(),e.uploadFile("visita1Factura")}}},[e._v("\n                Subir\n              ")]),e.files.visita1Factura&&e.files.visita1Factura.length>0?a("div",{staticClass:"mt-3"},[a("div",{staticClass:"row"},e._l(e.files.visita1Factura,(function(s){return a("div",{key:s.name,staticClass:"col-6 text-center"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[a("img",{staticClass:"mb-2",staticStyle:{"max-width":"50px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",{staticStyle:{"font-size":"12px"}},[e._v(e._s(s.name))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"visita1Factura")}}},[a("p-button",{staticClass:"mt-1",attrs:{type:"danger",round:"",size:"sm"}},[e._v("Eliminar")])],1):e._e()])})),0)]):e._e()],1)])])],1)],1),a("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[a("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-visita2",modifiers:{"accordion-visita2":!0}}],attrs:{block:"",variant:"info"}},[e._v("Segunda visita")])],1),a("b-collapse",{attrs:{id:"accordion-visita2",accordion:"valmer-accordion",role:"tabpanel"}},[a("b-card-body",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("h5",[e._v("Informe segunda visita")]),a("label",{staticClass:"text-white custom-file-upload",attrs:{for:"file-upload-visita2-informe"}},[a("input",{attrs:{type:"file",id:"file-upload-visita2-informe",multiple:""},on:{change:e.onFileChange}}),e._v("\n                Seleccionar archivo\n              ")]),a("p-button",{staticClass:"ml-4",attrs:{type:"info",round:"",disabled:!e.file},nativeOn:{click:function(a){return a.preventDefault(),e.uploadFile("visita2Informe")}}},[e._v("\n                Subir\n              ")]),e.files.visita2Informe&&e.files.visita2Informe.length>0?a("div",{staticClass:"mt-3"},[a("div",{staticClass:"row"},e._l(e.files.visita2Informe,(function(s){return a("div",{key:s.name,staticClass:"col-6 text-center"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[a("img",{staticClass:"mb-2",staticStyle:{"max-width":"50px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",{staticStyle:{"font-size":"12px"}},[e._v(e._s(s.name))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"visita2Informe")}}},[a("p-button",{staticClass:"mt-1",attrs:{type:"danger",round:"",size:"sm"}},[e._v("Eliminar")])],1):e._e()])})),0)]):e._e()],1),a("div",{staticClass:"col-md-6"},[a("h5",[e._v("Factura segunda visita")]),a("label",{staticClass:"text-white custom-file-upload",attrs:{for:"file-upload-visita2-factura"}},[a("input",{attrs:{type:"file",id:"file-upload-visita2-factura",multiple:""},on:{change:e.onFileChange}}),e._v("\n                Seleccionar archivo\n              ")]),a("p-button",{staticClass:"ml-4",attrs:{type:"info",round:"",disabled:!e.file},nativeOn:{click:function(a){return a.preventDefault(),e.uploadFile("visita2Factura")}}},[e._v("\n                Subir\n              ")]),e.files.visita2Factura&&e.files.visita2Factura.length>0?a("div",{staticClass:"mt-3"},[a("div",{staticClass:"row"},e._l(e.files.visita2Factura,(function(s){return a("div",{key:s.name,staticClass:"col-6 text-center"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[a("img",{staticClass:"mb-2",staticStyle:{"max-width":"50px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",{staticStyle:{"font-size":"12px"}},[e._v(e._s(s.name))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"visita2Factura")}}},[a("p-button",{staticClass:"mt-1",attrs:{type:"danger",round:"",size:"sm"}},[e._v("Eliminar")])],1):e._e()])})),0)]):e._e()],1)])])],1)],1),a("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[a("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-visita3",modifiers:{"accordion-visita3":!0}}],attrs:{block:"",variant:"info"}},[e._v("Tercera visita")])],1),a("b-collapse",{attrs:{id:"accordion-visita3",accordion:"valmer-accordion",role:"tabpanel"}},[a("b-card-body",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("h5",[e._v("Informe tercera visita")]),a("label",{staticClass:"text-white custom-file-upload",attrs:{for:"file-upload-visita3-informe"}},[a("input",{attrs:{type:"file",id:"file-upload-visita3-informe",multiple:""},on:{change:e.onFileChange}}),e._v("\n                Seleccionar archivo\n              ")]),a("p-button",{staticClass:"ml-4",attrs:{type:"info",round:"",disabled:!e.file},nativeOn:{click:function(a){return a.preventDefault(),e.uploadFile("visita3Informe")}}},[e._v("\n                Subir\n              ")]),e.files.visita3Informe&&e.files.visita3Informe.length>0?a("div",{staticClass:"mt-3"},[a("div",{staticClass:"row"},e._l(e.files.visita3Informe,(function(s){return a("div",{key:s.name,staticClass:"col-6 text-center"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[a("img",{staticClass:"mb-2",staticStyle:{"max-width":"50px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",{staticStyle:{"font-size":"12px"}},[e._v(e._s(s.name))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"visita3Informe")}}},[a("p-button",{staticClass:"mt-1",attrs:{type:"danger",round:"",size:"sm"}},[e._v("Eliminar")])],1):e._e()])})),0)]):e._e()],1),a("div",{staticClass:"col-md-6"},[a("h5",[e._v("Factura tercera visita")]),a("label",{staticClass:"text-white custom-file-upload",attrs:{for:"file-upload-visita3-factura"}},[a("input",{attrs:{type:"file",id:"file-upload-visita3-factura",multiple:""},on:{change:e.onFileChange}}),e._v("\n                Seleccionar archivo\n              ")]),a("p-button",{staticClass:"ml-4",attrs:{type:"info",round:"",disabled:!e.file},nativeOn:{click:function(a){return a.preventDefault(),e.uploadFile("visita3Factura")}}},[e._v("\n                Subir\n              ")]),e.files.visita3Factura&&e.files.visita3Factura.length>0?a("div",{staticClass:"mt-3"},[a("div",{staticClass:"row"},e._l(e.files.visita3Factura,(function(s){return a("div",{key:s.name,staticClass:"col-6 text-center"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[a("img",{staticClass:"mb-2",staticStyle:{"max-width":"50px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",{staticStyle:{"font-size":"12px"}},[e._v(e._s(s.name))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"visita3Factura")}}},[a("p-button",{staticClass:"mt-1",attrs:{type:"danger",round:"",size:"sm"}},[e._v("Eliminar")])],1):e._e()])})),0)]):e._e()],1)])])],1)],1),a("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[a("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-visita4",modifiers:{"accordion-visita4":!0}}],attrs:{block:"",variant:"info"}},[e._v("Cuarta visita")])],1),a("b-collapse",{attrs:{id:"accordion-visita4",accordion:"valmer-accordion",role:"tabpanel"}},[a("b-card-body",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("h5",[e._v("Informe cuarta visita")]),a("label",{staticClass:"text-white custom-file-upload",attrs:{for:"file-upload-visita4-informe"}},[a("input",{attrs:{type:"file",id:"file-upload-visita4-informe",multiple:""},on:{change:e.onFileChange}}),e._v("\n                Seleccionar archivo\n              ")]),a("p-button",{staticClass:"ml-4",attrs:{type:"info",round:"",disabled:!e.file},nativeOn:{click:function(a){return a.preventDefault(),e.uploadFile("visita4Informe")}}},[e._v("\n                Subir\n              ")]),e.files.visita4Informe&&e.files.visita4Informe.length>0?a("div",{staticClass:"mt-3"},[a("div",{staticClass:"row"},e._l(e.files.visita4Informe,(function(s){return a("div",{key:s.name,staticClass:"col-6 text-center"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[a("img",{staticClass:"mb-2",staticStyle:{"max-width":"50px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",{staticStyle:{"font-size":"12px"}},[e._v(e._s(s.name))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"visita4Informe")}}},[a("p-button",{staticClass:"mt-1",attrs:{type:"danger",round:"",size:"sm"}},[e._v("Eliminar")])],1):e._e()])})),0)]):e._e()],1),a("div",{staticClass:"col-md-6"},[a("h5",[e._v("Factura cuarta visita")]),a("label",{staticClass:"text-white custom-file-upload",attrs:{for:"file-upload-visita4-factura"}},[a("input",{attrs:{type:"file",id:"file-upload-visita4-factura",multiple:""},on:{change:e.onFileChange}}),e._v("\n                Seleccionar archivo\n              ")]),a("p-button",{staticClass:"ml-4",attrs:{type:"info",round:"",disabled:!e.file},nativeOn:{click:function(a){return a.preventDefault(),e.uploadFile("visita4Factura")}}},[e._v("\n                Subir\n              ")]),e.files.visita4Factura&&e.files.visita4Factura.length>0?a("div",{staticClass:"mt-3"},[a("div",{staticClass:"row"},e._l(e.files.visita4Factura,(function(s){return a("div",{key:s.name,staticClass:"col-6 text-center"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[a("img",{staticClass:"mb-2",staticStyle:{"max-width":"50px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",{staticStyle:{"font-size":"12px"}},[e._v(e._s(s.name))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"visita4Factura")}}},[a("p-button",{staticClass:"mt-1",attrs:{type:"danger",round:"",size:"sm"}},[e._v("Eliminar")])],1):e._e()])})),0)]):e._e()],1)])])],1)],1),a("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[a("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-imd",modifiers:{"accordion-imd":!0}}],attrs:{block:"",variant:"info"}},[e._v("IMD")])],1),a("b-collapse",{attrs:{id:"accordion-imd",accordion:"valmer-accordion",role:"tabpanel"}},[a("b-card-body",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("h5",[e._v("Informe IMD")]),a("label",{staticClass:"text-white custom-file-upload",attrs:{for:"file-upload-imd-informe"}},[a("input",{attrs:{type:"file",id:"file-upload-imd-informe",multiple:""},on:{change:e.onFileChange}}),e._v("\n                Seleccionar archivo\n              ")]),a("p-button",{staticClass:"ml-4",attrs:{type:"info",round:"",disabled:!e.file},nativeOn:{click:function(a){return a.preventDefault(),e.uploadFile("imdInforme")}}},[e._v("\n                Subir\n              ")]),e.files.imdInforme&&e.files.imdInforme.length>0?a("div",{staticClass:"mt-3"},[a("div",{staticClass:"row"},e._l(e.files.imdInforme,(function(s){return a("div",{key:s.name,staticClass:"col-6 text-center"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[a("img",{staticClass:"mb-2",staticStyle:{"max-width":"50px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",{staticStyle:{"font-size":"12px"}},[e._v(e._s(s.name))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"imdInforme")}}},[a("p-button",{staticClass:"mt-1",attrs:{type:"danger",round:"",size:"sm"}},[e._v("Eliminar")])],1):e._e()])})),0)]):e._e()],1),a("div",{staticClass:"col-md-6"},[a("h5",[e._v("Factura IMD")]),a("label",{staticClass:"text-white custom-file-upload",attrs:{for:"file-upload-imd-factura"}},[a("input",{attrs:{type:"file",id:"file-upload-imd-factura",multiple:""},on:{change:e.onFileChange}}),e._v("\n                Seleccionar archivo\n              ")]),a("p-button",{staticClass:"ml-4",attrs:{type:"info",round:"",disabled:!e.file},nativeOn:{click:function(a){return a.preventDefault(),e.uploadFile("imdFactura")}}},[e._v("\n                Subir\n              ")]),e.files.imdFactura&&e.files.imdFactura.length>0?a("div",{staticClass:"mt-3"},[a("div",{staticClass:"row"},e._l(e.files.imdFactura,(function(s){return a("div",{key:s.name,staticClass:"col-6 text-center"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[a("img",{staticClass:"mb-2",staticStyle:{"max-width":"50px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",{staticStyle:{"font-size":"12px"}},[e._v(e._s(s.name))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"imdFactura")}}},[a("p-button",{staticClass:"mt-1",attrs:{type:"danger",round:"",size:"sm"}},[e._v("Eliminar")])],1):e._e()])})),0)]):e._e()],1)])])],1)],1),a("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[a("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-pericial",modifiers:{"accordion-pericial":!0}}],attrs:{block:"",variant:"info"}},[e._v("Informe pericial")])],1),a("b-collapse",{attrs:{id:"accordion-pericial",accordion:"valmer-accordion",role:"tabpanel"}},[a("b-card-body",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("h5",[e._v("Informe pericial")]),a("label",{staticClass:"text-white custom-file-upload",attrs:{for:"file-upload-pericial-informe"}},[a("input",{attrs:{type:"file",id:"file-upload-pericial-informe",multiple:""},on:{change:e.onFileChange}}),e._v("\n                Seleccionar archivo\n              ")]),a("p-button",{staticClass:"ml-4",attrs:{type:"info",round:"",disabled:!e.file},nativeOn:{click:function(a){return a.preventDefault(),e.uploadFile("pericialInforme")}}},[e._v("\n                Subir\n              ")]),e.files.pericialInforme&&e.files.pericialInforme.length>0?a("div",{staticClass:"mt-3"},[a("div",{staticClass:"row"},e._l(e.files.pericialInforme,(function(s){return a("div",{key:s.name,staticClass:"col-6 text-center"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[a("img",{staticClass:"mb-2",staticStyle:{"max-width":"50px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",{staticStyle:{"font-size":"12px"}},[e._v(e._s(s.name))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"pericialInforme")}}},[a("p-button",{staticClass:"mt-1",attrs:{type:"danger",round:"",size:"sm"}},[e._v("Eliminar")])],1):e._e()])})),0)]):e._e()],1),a("div",{staticClass:"col-md-6"},[a("h5",[e._v("Factura informe pericial")]),a("label",{staticClass:"text-white custom-file-upload",attrs:{for:"file-upload-pericial-factura"}},[a("input",{attrs:{type:"file",id:"file-upload-pericial-factura",multiple:""},on:{change:e.onFileChange}}),e._v("\n                Seleccionar archivo\n              ")]),a("p-button",{staticClass:"ml-4",attrs:{type:"info",round:"",disabled:!e.file},nativeOn:{click:function(a){return a.preventDefault(),e.uploadFile("pericialFactura")}}},[e._v("\n                Subir\n              ")]),e.files.pericialFactura&&e.files.pericialFactura.length>0?a("div",{staticClass:"mt-3"},[a("div",{staticClass:"row"},e._l(e.files.pericialFactura,(function(s){return a("div",{key:s.name,staticClass:"col-6 text-center"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[a("img",{staticClass:"mb-2",staticStyle:{"max-width":"50px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",{staticStyle:{"font-size":"12px"}},[e._v(e._s(s.name))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"pericialFactura")}}},[a("p-button",{staticClass:"mt-1",attrs:{type:"danger",round:"",size:"sm"}},[e._v("Eliminar")])],1):e._e()])})),0)]):e._e()],1)])])],1)],1),a("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[a("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.accordion-ratificacion",modifiers:{"accordion-ratificacion":!0}}],attrs:{block:"",variant:"info"}},[e._v("Ratificación de juicio")])],1),a("b-collapse",{attrs:{id:"accordion-ratificacion",accordion:"valmer-accordion",role:"tabpanel"}},[a("b-card-body",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("h5",[e._v("Señalamiento")]),a("label",{staticClass:"text-white custom-file-upload",attrs:{for:"file-upload-ratificacion-senalamiento"}},[a("input",{attrs:{type:"file",id:"file-upload-ratificacion-senalamiento",multiple:""},on:{change:e.onFileChange}}),e._v("\n                Seleccionar archivo\n              ")]),a("p-button",{staticClass:"ml-4",attrs:{type:"info",round:"",disabled:!e.file},nativeOn:{click:function(a){return a.preventDefault(),e.uploadFile("ratificacionSenalamiento")}}},[e._v("\n                Subir\n              ")]),e.files.ratificacionSenalamiento&&e.files.ratificacionSenalamiento.length>0?a("div",{staticClass:"mt-3"},[a("div",{staticClass:"row"},e._l(e.files.ratificacionSenalamiento,(function(s){return a("div",{key:s.name,staticClass:"col-6 text-center"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[a("img",{staticClass:"mb-2",staticStyle:{"max-width":"50px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",{staticStyle:{"font-size":"12px"}},[e._v(e._s(s.name))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"ratificacionSenalamiento")}}},[a("p-button",{staticClass:"mt-1",attrs:{type:"danger",round:"",size:"sm"}},[e._v("Eliminar")])],1):e._e()])})),0)]):e._e()],1),a("div",{staticClass:"col-md-6"},[a("h5",[e._v("Factura ratificación")]),a("label",{staticClass:"text-white custom-file-upload",attrs:{for:"file-upload-ratificacion-factura"}},[a("input",{attrs:{type:"file",id:"file-upload-ratificacion-factura",multiple:""},on:{change:e.onFileChange}}),e._v("\n                Seleccionar archivo\n              ")]),a("p-button",{staticClass:"ml-4",attrs:{type:"info",round:"",disabled:!e.file},nativeOn:{click:function(a){return a.preventDefault(),e.uploadFile("ratificacionFactura")}}},[e._v("\n                Subir\n              ")]),e.files.ratificacionFactura&&e.files.ratificacionFactura.length>0?a("div",{staticClass:"mt-3"},[a("div",{staticClass:"row"},e._l(e.files.ratificacionFactura,(function(s){return a("div",{key:s.name,staticClass:"col-6 text-center"},[a("a",{class:{"clicked-file":e.clickedFiles.includes(s.name)},staticStyle:{display:"block"},attrs:{href:s.url,target:"_blank"},on:{click:function(a){return e.markAsClicked(s.name)}}},[a("img",{staticClass:"mb-2",staticStyle:{"max-width":"50px",display:"block",margin:"0 auto"},attrs:{src:t("77ef"),alt:""}}),a("span",{staticStyle:{"font-size":"12px"}},[e._v(e._s(s.name))])]),e.showAsSuperAdmin?a("div",{on:{click:function(a){return e.confirmDeleteFile(s,"ratificacionFactura")}}},[a("p-button",{staticClass:"mt-1",attrs:{type:"danger",round:"",size:"sm"}},[e._v("Eliminar")])],1):e._e()])})),0)]):e._e()],1)])])],1)],1)],1),e.successMessage?a("b-alert",{attrs:{variant:"success",show:""}},[e._v(e._s(e.successMessage))]):e._e(),e.errorMessage?a("b-alert",{attrs:{variant:"danger",show:""}},[e._v(e._s(e.errorMessage))]):e._e(),a("b-modal",{attrs:{id:"delete-file-modal","hide-footer":""},scopedSlots:e._u([{key:"modal-title",fn:function(){return[e._v("\n      Confirmar eliminación\n    ")]},proxy:!0}]),model:{value:e.modalDeleteFile,callback:function(a){e.modalDeleteFile=a},expression:"modalDeleteFile"}},[a("p",[e._v("¿Estás seguro de que deseas eliminar el archivo "),a("strong",[e._v(e._s(e.fileToDelete&&e.fileToDelete.name))]),e._v("?")]),a("p-button",{staticClass:"mt-4 mr-2",attrs:{type:"danger",round:""},nativeOn:{click:function(a){return a.preventDefault(),e.deleteFile.apply(null,arguments)}}},[e._v("\n      Eliminar\n    ")]),a("p-button",{staticClass:"mt-4",attrs:{type:"secondary",round:""},nativeOn:{click:function(a){a.preventDefault(),e.modalDeleteFile=!1}}},[e._v("\n      Cancelar\n    ")])],1)],1)},So=[],Do={props:{caseDetail:{type:Object,required:!0},user:{type:Object}},setup(e,{emit:a}){const t=Object(s["ref"])(!1),i=Object(s["ref"])(null),n=Object(s["ref"])(null),o=Object(s["ref"])(""),l=Object(s["ref"])(""),r=Object(s["ref"])([]),d=Object(s["ref"])(!1),u=Object(s["ref"])(null),p=Object(s["ref"])(null),m=["documentacion","estudioDocumentacionInforme","estudioDocumentacionFactura","visita1Informe","visita1Factura","visita2Informe","visita2Factura","visita3Informe","visita3Factura","visita4Informe","visita4Factura","imdInforme","imdFactura","pericialInforme","pericialFactura","ratificacionSenalamiento","ratificacionFactura"],b={};m.forEach((function(e){b[e]=[]}));const f=Object(s["ref"])(b),C=JSON.parse(localStorage.getItem("userInform")),h=Object(s["computed"])((function(){return!(!C.superAdmin||!0!==C.superAdmin)})),g=Object(s["computed"])((function(){var a={0:"Sin asignar",1:"Asignado",2:"En proceso",3:"Finalizado"};return a[e.caseDetail.status]||"Desconocido"}));var y=function(e){if(!e)return"N/A";var a=new Date(e),t=String(a.getDate()).padStart(2,"0"),s=String(a.getMonth()+1).padStart(2,"0"),i=a.getFullYear();return t+"/"+s+"/"+i},_=function(e){i.value=Array.from(e.target.files),o.value="",n.value=null,l.value=""},w=function(a){if(!i.value||0===i.value.length)return l.value="Por favor selecciona un archivo.",void setTimeout((function(){l.value=""}),2e3);var t=Array.isArray(i.value)?i.value:[i.value];t.forEach((function(t){var s=Object(c["f"])(v,"casos_valmer/"+e.caseDetail.id+"/"+a+"/"+t.name),r=Object(c["h"])(s,t);r.on("state_changed",(function(e){var a=e.bytesTransferred/e.totalBytes*100;n.value=a.toFixed(0)}),(function(e){l.value="Error al subir el archivo: "+e.message,setTimeout((function(){l.value=""}),2e3)}),(function(){Object(c["b"])(r.snapshot.ref).then((function(e){o.value="Archivo subido con éxito!",setTimeout((function(){o.value=""}),2e3),f.value[a]&&f.value[a].push({name:t.name,url:e,ref:r.snapshot.ref}),i.value=null}))}))}))},O=async function(){var a={};m.forEach((function(e){a[e]=[]})),await Promise.all(m.map((async function(t){try{var s=Object(c["f"])(v,"casos_valmer/"+e.caseDetail.id+"/"+t),i=await Object(c["e"])(s);a[t]=await Promise.all(i.items.map((async function(e){var a=await Object(c["b"])(e),t=Object(c["d"])(),s=Object(c["f"])(t,a),i=await Object(c["c"])(s);return{name:e.name,url:a,ref:e,date:i.timeCreated}})))}catch(n){a[t]=[]}}))),m.forEach((function(e){a[e].length>0&&(a[e]=a[e].sort((function(e,a){return new Date(e.date)-new Date(a.date)})))})),f.value=a},j=function(e,a){u.value=e,p.value=a,d.value=!0},k=async function(){if(u.value&&p.value){var e=u.value,a=p.value,t=e.ref;try{await Object(c["a"])(t),f.value[a]=f.value[a].filter((function(a){return a.name!==e.name})),o.value="Archivo "+e.name+" eliminado exitosamente.",setTimeout((function(){o.value=""}),2e3),d.value=!1,u.value=null,p.value=null}catch(s){console.error("Error al eliminar el archivo:",s),l.value="Error al eliminar el archivo: "+s.message,setTimeout((function(){l.value=""}),2e3),d.value=!1,u.value=null,p.value=null}}},A=function(e){r.value.includes(e)||r.value.push(e)};return O(),{showSuccess:t,file:i,uploadProgress:n,successMessage:o,errorMessage:l,files:f,clickedFiles:r,modalDeleteFile:d,fileToDelete:u,showAsSuperAdmin:h,estadoTexto:g,formatDate:y,onFileChange:_,uploadFile:w,confirmDeleteFile:j,deleteFile:k,markAsClicked:A}}},Eo=Do,Po=(t("297a"),Object(h["a"])(Eo,xo,So,!1,null,null,null)),Fo=Po.exports,No=function(){var e=this,a=e._self._c;return a("div",[a("Listados",{attrs:{"current-page":e.currentPage,items:[...e.casesItems||[]].sort((e,a)=>a.time-e.time),fields:e.fields},on:{"page-changed":e.handlePageChange},scopedSlots:e._u([{key:"filters",fn:function(){},proxy:!0},{key:"tableActions",fn:function({data:t}){return[a("b-button",{staticClass:"my-3 mx-3",attrs:{size:"sm"},on:{click:function(a){return e.verDetalle(t.item)}}},[e._v("\n        Ver Detalle\n      ")])]}}])})],1)},Io=[],Lo={components:{Listados:dt},props:{cases:{type:Array,required:!0}},setup(e,{emit:a}){const t=Object(s["ref"])(1),i=Object(s["ref"])(e.cases),n=[{key:"dias",label:"Días"},{key:"fechaAlta",label:"Fecha Alta"},{key:"nombreEspe",label:"Especialidad"},{key:"peritoNombre",label:"Perito"},{key:"estadoTexto",label:"Estado"},{key:"actions",label:"Acciones"}],o=e=>{a("wantSeeCase",e)},l=e=>{t.value=e};return{fields:n,casesItems:i,currentPage:t,handlePageChange:l,verDetalle:o}}},To=Lo,Qo=Object(h["a"])(To,No,Io,!1,null,null,null),Mo=Qo.exports,$o=function(){var e=this,a=e._self._c;return a("card",{staticClass:"card-user"},[a("div",[a("span",{staticStyle:{color:"#007bff",cursor:"pointer"},on:{click:function(a){return e.$emit("back")}}},[e._v("Volver")]),a("div",{staticClass:"col-12 mt-3"},[a("h3",[e._v("Selecciona las rutas visibles:")]),a("div",{staticClass:"row"},e._l(e.routes,(function(t,s){return a("div",{key:s,staticClass:"col-4 d-flex align-items-center",staticStyle:{"min-height":"40px"}},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.visibility,expression:"route.visibility"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.visibility)?e._i(t.visibility,null)>-1:t.visibility},on:{change:function(a){var s=t.visibility,i=a.target,n=!!i.checked;if(Array.isArray(s)){var o=null,l=e._i(s,o);i.checked?l<0&&e.$set(t,"visibility",s.concat([o])):l>-1&&e.$set(t,"visibility",s.slice(0,l).concat(s.slice(l+1)))}else e.$set(t,"visibility",n)}}}),a("label",{staticClass:"form-check-label",staticStyle:{"margin-left":"5px"}},[e._v(e._s(t.path))])])])})),0)]),a("div",{staticClass:"custom-select-wrapper col-md-6 mt-5"},[a("div",{staticClass:"custom-select-wrapper col-md-12"},[a("label",{attrs:{for:""}},[e._v("Que especialidad puede ver aparte de sus casos")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.verEspe,expression:"verEspe"}],staticClass:"custom-select",staticStyle:{"min-height":"100px"},attrs:{multiple:""},on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.verEspe=a.target.multiple?t:t[0]}}},e._l(e.especialidades,(function(t){return a("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.nombre))])})),0)])])]),a("div",{staticClass:"col-12 mt-3"},[a("p-button",{attrs:{type:"info",round:""},nativeOn:{click:function(a){return a.preventDefault(),e.saveInfo.apply(null,arguments)}}},[e._v("\r\n            Guardar\r\n          ")])],1)])},Bo=[],Vo={props:{user:{type:Object}},setup(e){const a=Object(s["ref"])(""),t=Object(s["ref"])(""),i=Object(s["ref"])([]),n=Object(s["ref"])([]),o=async()=>{n.value=(await Object(l["f"])(Object(l["b"])(p,"especialidades"))).docs.map(e=>({id:e.id,...e.data()}))},c=Object(s["ref"])([{path:"dashboard",visibility:!1},{path:"alta-especialidades",visibility:!1},{path:"listado-notificaciones-chats",visibility:!1},{path:"listado-clientes",visibility:!1},{path:"listado-clientes-llamar",visibility:!1},{path:"listado-clientes-sin-abogado",visibility:!1},{path:"listado-clientes-sin-abogado-llamar",visibility:!1},{path:"listado-casos-viable-juridicamente",visibility:!1},{path:"listado-presupuestos-abogado-enviados",visibility:!1},{path:"listado-presupuestos-enviados-seguimiento-abogado",visibility:!1},{path:"listado-especialistas",visibility:!1},{path:"listado-despachos",visibility:!1},{path:"alta-clientes",visibility:!1},{path:"casos-sin-asignar",visibility:!1},{path:"clientes-sin-presupuesto",visibility:!1},{path:"clientes-presupuesto-pendiente",visibility:!1},{path:"presupuestos-aceptados",visibility:!1},{path:"alta-especialista",visibility:!1},{path:"alta-despacho",visibility:!1},{path:"mis-casos",visibility:!1},{path:"mis-casos-abogados",visibility:!1},{path:"seguimiento-casos",visibility:!1},{path:"citas",visibility:!1},{path:"calendario",visibility:!1},{path:"calendario-remesas",visibility:!1},{path:"historico-login",visibility:!1},{path:"subir-facturas",visibility:!1},{path:"listado-facturas-propias",visibility:!1},{path:"listado-casos-con-fecha-encargo",visibility:!1},{path:"curso",visibility:!1},{path:"alta-casos-valmer",visibility:!1},{path:"listado-casos-valmer",visibility:!1},{path:"mis-casos-valmer",visibility:!1}]),r=async()=>{const a=[];n.value.forEach(e=>{i.value.includes(e.id)&&a.push(e)});const t=Object(l["k"])(Object(l["b"])(p,"especialistas"),Object(l["n"])("correo","==",e.user.correo)),s=await Object(l["f"])(t);if(s.docs.length>0){const e=Object(l["d"])(p,"especialistas",s.docs[0].id);await Object(l["m"])(e,{especialidadesObs:a,routes:c.value})}else{const t=Object(l["k"])(Object(l["b"])(p,"despachos"),Object(l["n"])("correo","==",e.user.correo)),s=await Object(l["f"])(t);if(s.docs.length>0){const e=Object(l["d"])(p,"despachos",s.docs[0].id);await Object(l["m"])(e,{especialidadesObs:a,routes:c.value})}else console.error("Usuario no encontrado en especialistas ni despachos")}},d=()=>{e.user.especialidadesObs.forEach(e=>{i.value.push(e.id)}),c.value.forEach(a=>{const t=e.user.routes.find(e=>"object"===typeof e&&e.path===a.path&&!0===e.visibility);t&&(a.visibility=!0)})};return Object(s["onMounted"])(()=>{o(),d()}),{mail:a,password:t,routes:c,verEspe:i,especialidades:n,saveInfo:()=>{r()}}}},zo=Vo,Ro=(t("2576"),Object(h["a"])(zo,$o,Bo,!1,null,"2a52553c",null)),Jo=Ro.exports,qo={components:{UserCard:co,CasosUsuario:yo,UserCase:Ao,UserCaseValmer:Fo,CasosValmer:Mo,GestionPermisos:Jo,Citas:Ms},setup(){const e=Object(s["ref"])(!1),a=Object(s["ref"])(!1),t=Object(s["ref"])(null),i=Object(s["ref"])({}),n=Object(s["ref"])([]),o=Object(s["ref"])(""),c=Object(s["ref"])(null),r=Object(s["ref"])([]),d=Object(s["ref"])(null),u=Object(s["ref"])(null),m=Object(s["ref"])(!1),v=Object(s["ref"])(!1),b=Object(s["ref"])(!1),f=Object(s["ref"])(!1),C=JSON.parse(localStorage.getItem("userInform")),h=Object(s["ref"])(C.despacho),g=Object(s["ref"])({fecha:"",cantidad:"",idCliente:"",nombreCliente:""}),y=Object(s["ref"])([]),_=Object(s["ref"])(!1),w=Object(s["computed"])(()=>!(!C.superAdmin||!0!==C.superAdmin)),O=async()=>{r.value=(await Object(l["f"])(Object(l["b"])(p,"especialidades"))).docs.map(e=>({id:e.id,...e.data()}))},j=e=>{if(!e)return"NA";const a=new Date(e),t=String(a.getDate()).padStart(2,"0"),s=String(a.getMonth()+1).padStart(2,"0"),i=a.getFullYear();return`${t}/${s}/${i}`},k=e=>"0"===e.confirmaCaso&&null===e.telEspecialista?"Cliente por llamar":"1"===e.confirmaCaso&&null===e.telEspecialista&&"0"===e.status?"Caso sin asignar":"1"===e.confirmaCaso&&null!==e.telEspecialista&&"1"===e.status?"Cliente sin presupuesto":"1"===e.confirmaCaso&&null!==e.telEspecialista&&"2"===e.status?"Presupuesto pendiente":"1"===e.confirmaCaso&&null!==e.telEspecialista&&"3"===e.status?"Presupuesto aceptado":"1"===e.confirmaCaso&&null!==e.telEspecialista&&"4"===e.status?"Caso finalizado":void 0,A=async()=>{let s;if(f.value=!0,a.value){if(s=Object(l["k"])(Object(l["b"])(p,"casos_valmer"),Object(l["n"])("telCliente","==",i.value.tel)),n.value=(await Object(l["f"])(s)).docs.map(e=>({id:e.id,...e.data()})),await Promise.all(n.value.map(async e=>{e.fechaAlta=j(e.time);const a=r.value.find(a=>a.id===e.especialidad);e.nombreEspe=a?a.nombre:"N/A",e.estadoTexto=x(e.status);const t=new Date(e.time),s=new Date,i=s-t;e.dias=Math.floor(i/864e5)})),c.value){const e=n.value.find(e=>e.id===c.value);e&&(d.value=e)}return setTimeout(()=>{m.value=n.value.length>0},500),void(f.value=!1)}if("despacho"!==t.value){const a=e.value?"telCliente":"telEspecialista";s=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])(a,"==",i.value.tel))}else s=Object(l["k"])(Object(l["b"])(p,"casos"),Object(l["n"])("idDespacho","==",o.value));n.value=(await Object(l["f"])(s)).docs.map(e=>({id:e.id,...e.data()})),n.value.map(async(e,a)=>{e.fechaAlta=j(e.time);const t=Object(l["k"])(Object(l["b"])(p,"clientes"),Object(l["n"])("tel","==",e.telCliente)),s=await Object(l["f"])(t),i=s.docs.map(e=>e.data())[0];e.nombreCompleto=`${i.nombre} ${i.apellidos}`,e.factura=e.id,e.estadoCaso=k(e),parseInt(e.status)>2&&(e.estudio?e.pago="true"===e.estudio.pagadoCliente?"Si ":"No ":e.pago="No ",e.informe?e.pago+="true"===e.informe.pagadoCliente?"Si ":"No ":e.pago+="No ",e.ratificacion?e.pago+="true"===e.ratificacion.pagadoCliente?"Si ":"No ":e.pago+="No "),e.especialidadNombre=r.value.find(a=>a.id===e.especialidad).nombre}),setTimeout(()=>{m.value=n.value.length>0},500),f.value=!1},x=e=>{const a={0:"Sin asignar",1:"Asignado",2:"En proceso",3:"Finalizado"};return a[e]||"Desconocido"},S=async()=>{let e;e="cliente"===t.value?"clientes":"especialista"===t.value?"especialistas":"cliente_valmer"===t.value?"clientes_valmer":"despachos";const a=Object(l["d"])(p,e,o.value),s=await Object(l["e"])(a);i.value={id:s.id,...s.data()},A()},D=async()=>{const a=e.value?"especialistas":"clientes",t=e.value?d.value.telEspecialista:d.value.telCliente,s=Object(l["k"])(Object(l["b"])(p,a),Object(l["n"])("tel","==",t)),i=(await Object(l["f"])(s)).docs.map(e=>({id:e.id,...e.data()}));u.value=i[0]};return Object(s["onMounted"])(()=>{const s=window.location.href,i=s.split("?")[1]||"",n=new URLSearchParams(i),l=s.split("type=")[1];t.value=n.get("type")||(l?l.split("&")[0]:null),e.value=s.includes("cliente"),a.value=s.includes("cliente_valmer"),c.value=n.get("casoId"),o.value=s.split("/")[s.split("/").length-1].split("?")[0],S(),O()}),{isDespacho:h,isValmer:a,user:i,typeUser:t,isClient:e,idUser:o,user:i,cases:n,caseDetail:d,userCase:u,showCases:m,gestionPermiso:v,showModalCita:b,showAsSuperAdmin:w,showRemesa:_,newRemesa:g,remesas:y,loadingCases:f,wantAddBook:()=>{b.value=!0},setCase:e=>{d.value=e,D()},addRemesa(){g.value.idCliente=i.value.id,g.value.nombreCliente=i.value.nombre+i.value.apellidos,g.value.pagado=!1,y.value.push(g.value),g.value={fecha:"",cantidad:"",idCliente:i.value.id,nombreCliente:i.value.nombre+i.value.apellidos}},addAllRemesas:async()=>{0!==y.value.length&&(Object(l["a"])(Object(l["b"])(p,"remesas"),y),_.value=!1,g.value={fecha:"",cantidad:"",idCliente:i.id,nombreCliente:i.value.nombre+" "+i.value.apellidos},y.value=[])}}}},Uo=qo,Ho=Object(h["a"])(Uo,Gn,Yn,!1,null,null,null),Wo=Ho.exports,Go=function(){var e=this,a=e._self._c;return a("card",{attrs:{title:"Notifications","sub-title":"Custom Vue notifications plugin"}},[a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("h5",[e._v("Notifications Style")]),a("div",{staticClass:"alert alert-info"},[a("span",[e._v("This is a plain notification")])]),a("div",{staticClass:"alert alert-info"},[a("button",{staticClass:"close",attrs:{type:"button","aria-hidden":"true"}},[e._v("×")]),a("span",[e._v("This is a notification with close button.")])]),a("div",{staticClass:"alert alert-info alert-with-icon",attrs:{"data-notify":"container"}},[a("button",{staticClass:"close",attrs:{type:"button","aria-hidden":"true"}},[e._v("×")]),a("span",{staticClass:"ti-bell",attrs:{"data-notify":"icon"}}),a("span",{attrs:{"data-notify":"message"}},[e._v("This is a notification with close button and icon.")])]),a("div",{staticClass:"alert alert-info alert-with-icon",attrs:{"data-notify":"container"}},[a("button",{staticClass:"close",attrs:{type:"button","aria-hidden":"true"}},[e._v("×")]),a("span",{staticClass:"ti-pie-chart",attrs:{"data-notify":"icon"}}),a("span",{attrs:{"data-notify":"message"}},[e._v("This is a notification with close button and icon and have many\n            lines. You can see that the icon and the close button are always\n            vertically aligned. This is a beautiful notification. So you don't\n            have to worry about the style.")])])]),a("div",{staticClass:"col-md-6"},[a("h5",[e._v("Notification states")]),a("div",{staticClass:"alert alert-info"},[a("button",{staticClass:"close",attrs:{type:"button","aria-hidden":"true"}},[e._v("×")]),a("span",[a("b",[e._v(" Info - ")]),e._v(' This is a regular notification made with\n            ".alert-info"')])]),a("div",{staticClass:"alert alert-success"},[a("button",{staticClass:"close",attrs:{type:"button","aria-hidden":"true"}},[e._v("×")]),a("span",[a("b",[e._v(" Success - ")]),e._v(' This is a regular notification made with\n            ".alert-success"')])]),a("div",{staticClass:"alert alert-warning"},[a("button",{staticClass:"close",attrs:{type:"button","aria-hidden":"true"}},[e._v("×")]),a("span",[a("b",[e._v(" Warning - ")]),e._v(' This is a regular notification made with\n            ".alert-warning"')])]),a("div",{staticClass:"alert alert-danger"},[a("button",{staticClass:"close",attrs:{type:"button","aria-hidden":"true"}},[e._v("×")]),a("span",[a("b",[e._v(" Danger - ")]),e._v(' This is a regular notification made with\n            ".alert-danger"')])])])]),a("br"),a("br"),a("div",{staticClass:"places-buttons"},[a("div",{staticClass:"row d-flex justify-content-center"},[a("div",[a("h5",[e._v("\n            Notifications Places\n            "),a("p",{staticClass:"category"},[e._v("Click to view notifications")])])])]),a("div",{staticClass:"row d-flex justify-content-center"},[a("div",{staticClass:"col-md-3"},[a("p-button",{attrs:{round:"",outline:"",block:""},nativeOn:{click:function(a){return e.notifyVue("top","left")}}},[e._v("Top Left")])],1),a("div",{staticClass:"col-md-3"},[a("p-button",{attrs:{round:"",outline:"",block:""},nativeOn:{click:function(a){return e.notifyVue("top","center")}}},[e._v("Top Center")])],1),a("div",{staticClass:"col-md-3"},[a("p-button",{attrs:{round:"",outline:"",block:""},nativeOn:{click:function(a){return e.notifyVue("top","right")}}},[e._v("Top Right")])],1)]),a("div",{staticClass:"row d-flex justify-content-center"},[a("div",{staticClass:"col-md-3"},[a("p-button",{attrs:{round:"",outline:"",block:""},nativeOn:{click:function(a){return e.notifyVue("bottom","left")}}},[e._v("Bottom Left")])],1),a("div",{staticClass:"col-md-3"},[a("p-button",{attrs:{round:"",outline:"",block:""},nativeOn:{click:function(a){return e.notifyVue("bottom","center")}}},[e._v("Bottom Center")])],1),a("div",{staticClass:"col-md-3"},[a("p-button",{attrs:{round:"",outline:"",block:""},nativeOn:{click:function(a){return e.notifyVue("bottom","right")}}},[e._v("Bottom Right")])],1)])])])])},Yo=[],Ko={data(){return{type:["","info","success","warning","danger"],notifications:{topCenter:!1}}},methods:{notifyVue(e,a){const t=Math.floor(4*Math.random()+1);this.$notify({component:fs,icon:"ti-gift",horizontalAlign:a,verticalAlign:e,type:this.type[t]})}}},Zo=Ko,Xo=Object(h["a"])(Zo,Go,Yo,!1,null,null,null),el=Xo.exports,al=function(){var e=this,a=e._self._c;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("card",[a("template",{slot:"header"},[a("h4",{staticClass:"card-title"},[e._v("320+ Themify Icons")]),a("p",{staticClass:"card-category"},[e._v("\n          Handcrafted by our friends from\n          "),a("a",{attrs:{target:"_blank",href:"https://themify.me/"}},[e._v("Themify")]),e._v(".\n        ")])]),a("div",{staticClass:"content all-icons"},[a("div",{staticClass:"icon-section"},[a("h3",[e._v("Arrows & Direction Icons")]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-arrow-up"}),a("span",{staticClass:"icon-name"},[e._v(" ti-arrow-up")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-arrow-right"}),a("span",{staticClass:"icon-name"},[e._v(" ti-arrow-right")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-arrow-left"}),a("span",{staticClass:"icon-name"},[e._v(" ti-arrow-left")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-arrow-down"}),a("span",{staticClass:"icon-name"},[e._v(" ti-arrow-down")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-arrows-vertical"}),a("span",{staticClass:"icon-name"},[e._v(" ti-arrows-vertical")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-arrows-horizontal"}),a("span",{staticClass:"icon-name"},[e._v(" ti-arrows-horizontal")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-angle-up"}),a("span",{staticClass:"icon-name"},[e._v(" ti-angle-up")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-angle-right"}),a("span",{staticClass:"icon-name"},[e._v(" ti-angle-right")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-angle-left"}),a("span",{staticClass:"icon-name"},[e._v(" ti-angle-left")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-angle-down"}),a("span",{staticClass:"icon-name"},[e._v(" ti-angle-down")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-angle-double-up"}),a("span",{staticClass:"icon-name"},[e._v(" ti-angle-double-up")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-angle-double-right"}),a("span",{staticClass:"icon-name"},[e._v(" ti-angle-double-right")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-angle-double-left"}),a("span",{staticClass:"icon-name"},[e._v(" ti-angle-double-left")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-angle-double-down"}),a("span",{staticClass:"icon-name"},[e._v(" ti-angle-double-down")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-move"}),a("span",{staticClass:"icon-name"},[e._v(" ti-move")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-fullscreen"}),a("span",{staticClass:"icon-name"},[e._v(" ti-fullscreen")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-arrow-top-right"}),a("span",{staticClass:"icon-name"},[e._v(" ti-arrow-top-right")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-arrow-top-left"}),a("span",{staticClass:"icon-name"},[e._v(" ti-arrow-top-left")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-arrow-circle-up"}),a("span",{staticClass:"icon-name"},[e._v(" ti-arrow-circle-up")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-arrow-circle-right"}),a("span",{staticClass:"icon-name"},[e._v(" ti-arrow-circle-right")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-arrow-circle-left"}),a("span",{staticClass:"icon-name"},[e._v(" ti-arrow-circle-left")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-arrow-circle-down"}),a("span",{staticClass:"icon-name"},[e._v(" ti-arrow-circle-down")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-arrows-corner"}),a("span",{staticClass:"icon-name"},[e._v(" ti-arrows-corner")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-split-v"}),a("span",{staticClass:"icon-name"},[e._v(" ti-split-v")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-split-v-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-split-v-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-split-h"}),a("span",{staticClass:"icon-name"},[e._v(" ti-split-h")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-hand-point-up"}),a("span",{staticClass:"icon-name"},[e._v(" ti-hand-point-up")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-hand-point-right"}),a("span",{staticClass:"icon-name"},[e._v(" ti-hand-point-right")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-hand-point-left"}),a("span",{staticClass:"icon-name"},[e._v(" ti-hand-point-left")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-hand-point-down"}),a("span",{staticClass:"icon-name"},[e._v(" ti-hand-point-down")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-back-right"}),a("span",{staticClass:"icon-name"},[e._v(" ti-back-right")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-back-left"}),a("span",{staticClass:"icon-name"},[e._v(" ti-back-left")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-exchange-vertical"}),a("span",{staticClass:"icon-name"},[e._v(" ti-exchange-vertical")])])]),a("h3",[e._v("Web App Icons")]),a("div",{staticClass:"icon-section"},[a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-wand"}),a("span",{staticClass:"icon-name"},[e._v(" ti-wand")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-save"}),a("span",{staticClass:"icon-name"},[e._v(" ti-save")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-save-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-save-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-direction"}),a("span",{staticClass:"icon-name"},[e._v(" ti-direction")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-direction-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-direction-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-user"}),a("span",{staticClass:"icon-name"},[e._v(" ti-user")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-link"}),a("span",{staticClass:"icon-name"},[e._v(" ti-link")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-unlink"}),a("span",{staticClass:"icon-name"},[e._v(" ti-unlink")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-trash"}),a("span",{staticClass:"icon-name"},[e._v(" ti-trash")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-target"}),a("span",{staticClass:"icon-name"},[e._v(" ti-target")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-tag"}),a("span",{staticClass:"icon-name"},[e._v(" ti-tag")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-desktop"}),a("span",{staticClass:"icon-name"},[e._v(" ti-desktop")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-tablet"}),a("span",{staticClass:"icon-name"},[e._v(" ti-tablet")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-mobile"}),a("span",{staticClass:"icon-name"},[e._v(" ti-mobile")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-email"}),a("span",{staticClass:"icon-name"},[e._v(" ti-email")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-star"}),a("span",{staticClass:"icon-name"},[e._v(" ti-star")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-spray"}),a("span",{staticClass:"icon-name"},[e._v(" ti-spray")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-signal"}),a("span",{staticClass:"icon-name"},[e._v(" ti-signal")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-shopping-cart"}),a("span",{staticClass:"icon-name"},[e._v(" ti-shopping-cart")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-shopping-cart-full"}),a("span",{staticClass:"icon-name"},[e._v(" ti-shopping-cart-full")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-settings"}),a("span",{staticClass:"icon-name"},[e._v(" ti-settings")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-search"}),a("span",{staticClass:"icon-name"},[e._v(" ti-search")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-zoom-in"}),a("span",{staticClass:"icon-name"},[e._v(" ti-zoom-in")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-zoom-out"}),a("span",{staticClass:"icon-name"},[e._v(" ti-zoom-out")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-cut"}),a("span",{staticClass:"icon-name"},[e._v(" ti-cut")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-ruler"}),a("span",{staticClass:"icon-name"},[e._v(" ti-ruler")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-ruler-alt-2"}),a("span",{staticClass:"icon-name"},[e._v(" ti-ruler-alt-2")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-ruler-pencil"}),a("span",{staticClass:"icon-name"},[e._v(" ti-ruler-pencil")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-ruler-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-ruler-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-bookmark"}),a("span",{staticClass:"icon-name"},[e._v(" ti-bookmark")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-bookmark-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-bookmark-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-reload"}),a("span",{staticClass:"icon-name"},[e._v(" ti-reload")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-plus"}),a("span",{staticClass:"icon-name"},[e._v(" ti-plus")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-minus"}),a("span",{staticClass:"icon-name"},[e._v(" ti-minus")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-close"}),a("span",{staticClass:"icon-name"},[e._v(" ti-close")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-pin"}),a("span",{staticClass:"icon-name"},[e._v(" ti-pin")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-pencil"}),a("span",{staticClass:"icon-name"},[e._v(" ti-pencil")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-pencil-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-pencil-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-paint-roller"}),a("span",{staticClass:"icon-name"},[e._v(" ti-paint-roller")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-paint-bucket"}),a("span",{staticClass:"icon-name"},[e._v(" ti-paint-bucket")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-na"}),a("span",{staticClass:"icon-name"},[e._v(" ti-na")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-medall"}),a("span",{staticClass:"icon-name"},[e._v(" ti-medall")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-medall-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-medall-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-marker"}),a("span",{staticClass:"icon-name"},[e._v(" ti-marker")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-marker-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-marker-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-lock"}),a("span",{staticClass:"icon-name"},[e._v(" ti-lock")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-unlock"}),a("span",{staticClass:"icon-name"},[e._v(" ti-unlock")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-location-arrow"}),a("span",{staticClass:"icon-name"},[e._v(" ti-location-arrow")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layers"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layers")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layers-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layers-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-key"}),a("span",{staticClass:"icon-name"},[e._v(" ti-key")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-image"}),a("span",{staticClass:"icon-name"},[e._v(" ti-image")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-heart"}),a("span",{staticClass:"icon-name"},[e._v(" ti-heart")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-heart-broken"}),a("span",{staticClass:"icon-name"},[e._v(" ti-heart-broken")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-hand-stop"}),a("span",{staticClass:"icon-name"},[e._v(" ti-hand-stop")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-hand-open"}),a("span",{staticClass:"icon-name"},[e._v(" ti-hand-open")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-hand-drag"}),a("span",{staticClass:"icon-name"},[e._v(" ti-hand-drag")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-flag"}),a("span",{staticClass:"icon-name"},[e._v(" ti-flag")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-flag-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-flag-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-flag-alt-2"}),a("span",{staticClass:"icon-name"},[e._v(" ti-flag-alt-2")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-eye"}),a("span",{staticClass:"icon-name"},[e._v(" ti-eye")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-import"}),a("span",{staticClass:"icon-name"},[e._v(" ti-import")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-export"}),a("span",{staticClass:"icon-name"},[e._v(" ti-export")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-cup"}),a("span",{staticClass:"icon-name"},[e._v(" ti-cup")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-crown"}),a("span",{staticClass:"icon-name"},[e._v(" ti-crown")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-comments"}),a("span",{staticClass:"icon-name"},[e._v(" ti-comments")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-comment"}),a("span",{staticClass:"icon-name"},[e._v(" ti-comment")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-comment-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-comment-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-thought"}),a("span",{staticClass:"icon-name"},[e._v(" ti-thought")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-clip"}),a("span",{staticClass:"icon-name"},[e._v(" ti-clip")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-check"}),a("span",{staticClass:"icon-name"},[e._v(" ti-check")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-check-box"}),a("span",{staticClass:"icon-name"},[e._v(" ti-check-box")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-camera"}),a("span",{staticClass:"icon-name"},[e._v(" ti-camera")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-announcement"}),a("span",{staticClass:"icon-name"},[e._v(" ti-announcement")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-brush"}),a("span",{staticClass:"icon-name"},[e._v(" ti-brush")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-brush-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-brush-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-palette"}),a("span",{staticClass:"icon-name"},[e._v(" ti-palette")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-briefcase"}),a("span",{staticClass:"icon-name"},[e._v(" ti-briefcase")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-bolt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-bolt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-bolt-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-bolt-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-blackboard"}),a("span",{staticClass:"icon-name"},[e._v(" ti-blackboard")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-bag"}),a("span",{staticClass:"icon-name"},[e._v(" ti-bag")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-world"}),a("span",{staticClass:"icon-name"},[e._v(" ti-world")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-wheelchair"}),a("span",{staticClass:"icon-name"},[e._v(" ti-wheelchair")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-car"}),a("span",{staticClass:"icon-name"},[e._v(" ti-car")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-truck"}),a("span",{staticClass:"icon-name"},[e._v(" ti-truck")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-timer"}),a("span",{staticClass:"icon-name"},[e._v(" ti-timer")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-ticket"}),a("span",{staticClass:"icon-name"},[e._v(" ti-ticket")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-thumb-up"}),a("span",{staticClass:"icon-name"},[e._v(" ti-thumb-up")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-thumb-down"}),a("span",{staticClass:"icon-name"},[e._v(" ti-thumb-down")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-stats-up"}),a("span",{staticClass:"icon-name"},[e._v(" ti-stats-up")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-stats-down"}),a("span",{staticClass:"icon-name"},[e._v(" ti-stats-down")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-shine"}),a("span",{staticClass:"icon-name"},[e._v(" ti-shine")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-shift-right"}),a("span",{staticClass:"icon-name"},[e._v(" ti-shift-right")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-shift-left"}),a("span",{staticClass:"icon-name"},[e._v(" ti-shift-left")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-shift-right-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-shift-right-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-shift-left-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-shift-left-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-shield"}),a("span",{staticClass:"icon-name"},[e._v(" ti-shield")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-notepad"}),a("span",{staticClass:"icon-name"},[e._v(" ti-notepad")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-server"}),a("span",{staticClass:"icon-name"},[e._v(" ti-server")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-pulse"}),a("span",{staticClass:"icon-name"},[e._v(" ti-pulse")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-printer"}),a("span",{staticClass:"icon-name"},[e._v(" ti-printer")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-power-off"}),a("span",{staticClass:"icon-name"},[e._v(" ti-power-off")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-plug"}),a("span",{staticClass:"icon-name"},[e._v(" ti-plug")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-pie-chart"}),a("span",{staticClass:"icon-name"},[e._v(" ti-pie-chart")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-panel"}),a("span",{staticClass:"icon-name"},[e._v(" ti-panel")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-package"}),a("span",{staticClass:"icon-name"},[e._v(" ti-package")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-music"}),a("span",{staticClass:"icon-name"},[e._v(" ti-music")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-music-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-music-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-mouse"}),a("span",{staticClass:"icon-name"},[e._v(" ti-mouse")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-mouse-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-mouse-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-money"}),a("span",{staticClass:"icon-name"},[e._v(" ti-money")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-microphone"}),a("span",{staticClass:"icon-name"},[e._v(" ti-microphone")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-menu"}),a("span",{staticClass:"icon-name"},[e._v(" ti-menu")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-menu-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-menu-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-map"}),a("span",{staticClass:"icon-name"},[e._v(" ti-map")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-map-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-map-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-location-pin"}),a("span",{staticClass:"icon-name"},[e._v(" ti-location-pin")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-light-bulb"}),a("span",{staticClass:"icon-name"},[e._v(" ti-light-bulb")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-info"}),a("span",{staticClass:"icon-name"},[e._v(" ti-info")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-infinite"}),a("span",{staticClass:"icon-name"},[e._v(" ti-infinite")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-id-badge"}),a("span",{staticClass:"icon-name"},[e._v(" ti-id-badge")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-hummer"}),a("span",{staticClass:"icon-name"},[e._v(" ti-hummer")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-home"}),a("span",{staticClass:"icon-name"},[e._v(" ti-home")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-help"}),a("span",{staticClass:"icon-name"},[e._v(" ti-help")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-headphone"}),a("span",{staticClass:"icon-name"},[e._v(" ti-headphone")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-harddrives"}),a("span",{staticClass:"icon-name"},[e._v(" ti-harddrives")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-harddrive"}),a("span",{staticClass:"icon-name"},[e._v(" ti-harddrive")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-gift"}),a("span",{staticClass:"icon-name"},[e._v(" ti-gift")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-game"}),a("span",{staticClass:"icon-name"},[e._v(" ti-game")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-filter"}),a("span",{staticClass:"icon-name"},[e._v(" ti-filter")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-files"}),a("span",{staticClass:"icon-name"},[e._v(" ti-files")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-file"}),a("span",{staticClass:"icon-name"},[e._v(" ti-file")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-zip"}),a("span",{staticClass:"icon-name"},[e._v(" ti-zip")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-folder"}),a("span",{staticClass:"icon-name"},[e._v(" ti-folder")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-envelope"}),a("span",{staticClass:"icon-name"},[e._v(" ti-envelope")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-dashboard"}),a("span",{staticClass:"icon-name"},[e._v(" ti-dashboard")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-cloud"}),a("span",{staticClass:"icon-name"},[e._v(" ti-cloud")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-cloud-up"}),a("span",{staticClass:"icon-name"},[e._v(" ti-cloud-up")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-cloud-down"}),a("span",{staticClass:"icon-name"},[e._v(" ti-cloud-down")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-clipboard"}),a("span",{staticClass:"icon-name"},[e._v(" ti-clipboard")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-calendar"}),a("span",{staticClass:"icon-name"},[e._v(" ti-calendar")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-book"}),a("span",{staticClass:"icon-name"},[e._v(" ti-book")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-bell"}),a("span",{staticClass:"icon-name"},[e._v(" ti-bell")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-basketball"}),a("span",{staticClass:"icon-name"},[e._v(" ti-basketball")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-bar-chart"}),a("span",{staticClass:"icon-name"},[e._v(" ti-bar-chart")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-bar-chart-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-bar-chart-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-archive"}),a("span",{staticClass:"icon-name"},[e._v(" ti-archive")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-anchor"}),a("span",{staticClass:"icon-name"},[e._v(" ti-anchor")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-alert"}),a("span",{staticClass:"icon-name"},[e._v(" ti-alert")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-alarm-clock"}),a("span",{staticClass:"icon-name"},[e._v(" ti-alarm-clock")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-agenda"}),a("span",{staticClass:"icon-name"},[e._v(" ti-agenda")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-write"}),a("span",{staticClass:"icon-name"},[e._v(" ti-write")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-wallet"}),a("span",{staticClass:"icon-name"},[e._v(" ti-wallet")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-video-clapper"}),a("span",{staticClass:"icon-name"},[e._v(" ti-video-clapper")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-video-camera"}),a("span",{staticClass:"icon-name"},[e._v(" ti-video-camera")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-vector"}),a("span",{staticClass:"icon-name"},[e._v(" ti-vector")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-support"}),a("span",{staticClass:"icon-name"},[e._v(" ti-support")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-stamp"}),a("span",{staticClass:"icon-name"},[e._v(" ti-stamp")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-slice"}),a("span",{staticClass:"icon-name"},[e._v(" ti-slice")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-shortcode"}),a("span",{staticClass:"icon-name"},[e._v(" ti-shortcode")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-receipt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-receipt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-pin2"}),a("span",{staticClass:"icon-name"},[e._v(" ti-pin2")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-pin-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-pin-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-pencil-alt2"}),a("span",{staticClass:"icon-name"},[e._v(" ti-pencil-alt2")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-eraser"}),a("span",{staticClass:"icon-name"},[e._v(" ti-eraser")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-more"}),a("span",{staticClass:"icon-name"},[e._v(" ti-more")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-more-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-more-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-microphone-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-microphone-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-magnet"}),a("span",{staticClass:"icon-name"},[e._v(" ti-magnet")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-line-double"}),a("span",{staticClass:"icon-name"},[e._v(" ti-line-double")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-line-dotted"}),a("span",{staticClass:"icon-name"},[e._v(" ti-line-dotted")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-line-dashed"}),a("span",{staticClass:"icon-name"},[e._v(" ti-line-dashed")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-ink-pen"}),a("span",{staticClass:"icon-name"},[e._v(" ti-ink-pen")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-info-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-info-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-help-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-help-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-headphone-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-headphone-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-gallery"}),a("span",{staticClass:"icon-name"},[e._v(" ti-gallery")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-face-smile"}),a("span",{staticClass:"icon-name"},[e._v(" ti-face-smile")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-face-sad"}),a("span",{staticClass:"icon-name"},[e._v(" ti-face-sad")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-credit-card"}),a("span",{staticClass:"icon-name"},[e._v(" ti-credit-card")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-comments-smiley"}),a("span",{staticClass:"icon-name"},[e._v(" ti-comments-smiley")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-time"}),a("span",{staticClass:"icon-name"},[e._v(" ti-time")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-share"}),a("span",{staticClass:"icon-name"},[e._v(" ti-share")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-share-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-share-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-rocket"}),a("span",{staticClass:"icon-name"},[e._v(" ti-rocket")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-new-window"}),a("span",{staticClass:"icon-name"},[e._v(" ti-new-window")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-rss"}),a("span",{staticClass:"icon-name"},[e._v(" ti-rss")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-rss-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-rss-alt")])])]),a("div",{staticClass:"icon-section"},[a("h3",[e._v("Control Icons")]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-control-stop"}),a("span",{staticClass:"icon-name"},[e._v(" ti-control-stop")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-control-shuffle"}),a("span",{staticClass:"icon-name"},[e._v(" ti-control-shuffle")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-control-play"}),a("span",{staticClass:"icon-name"},[e._v(" ti-control-play")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-control-pause"}),a("span",{staticClass:"icon-name"},[e._v(" ti-control-pause")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-control-forward"}),a("span",{staticClass:"icon-name"},[e._v(" ti-control-forward")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-control-backward"}),a("span",{staticClass:"icon-name"},[e._v(" ti-control-backward")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-volume"}),a("span",{staticClass:"icon-name"},[e._v(" ti-volume")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-control-skip-forward"}),a("span",{staticClass:"icon-name"},[e._v(" ti-control-skip-forward")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-control-skip-backward"}),a("span",{staticClass:"icon-name"},[e._v(" ti-control-skip-backward")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-control-record"}),a("span",{staticClass:"icon-name"},[e._v(" ti-control-record")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-control-eject"}),a("span",{staticClass:"icon-name"},[e._v(" ti-control-eject")])])]),a("div",{staticClass:"icon-section"},[a("h3",[e._v("Text Editor")]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-paragraph"}),a("span",{staticClass:"icon-name"},[e._v(" ti-paragraph")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-uppercase"}),a("span",{staticClass:"icon-name"},[e._v(" ti-uppercase")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-underline"}),a("span",{staticClass:"icon-name"},[e._v(" ti-underline")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-text"}),a("span",{staticClass:"icon-name"},[e._v(" ti-text")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-Italic"}),a("span",{staticClass:"icon-name"},[e._v(" ti-Italic")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-smallcap"}),a("span",{staticClass:"icon-name"},[e._v(" ti-smallcap")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-list"}),a("span",{staticClass:"icon-name"},[e._v(" ti-list")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-list-ol"}),a("span",{staticClass:"icon-name"},[e._v(" ti-list-ol")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-align-right"}),a("span",{staticClass:"icon-name"},[e._v(" ti-align-right")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-align-left"}),a("span",{staticClass:"icon-name"},[e._v(" ti-align-left")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-align-justify"}),a("span",{staticClass:"icon-name"},[e._v(" ti-align-justify")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-align-center"}),a("span",{staticClass:"icon-name"},[e._v(" ti-align-center")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-quote-right"}),a("span",{staticClass:"icon-name"},[e._v(" ti-quote-right")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-quote-left"}),a("span",{staticClass:"icon-name"},[e._v(" ti-quote-left")])])]),a("div",{staticClass:"icon-section"},[a("h3",[e._v("Layout Icons")]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-width-full"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-width-full")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-width-default"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-width-default")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-width-default-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-width-default-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-tab"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-tab")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-tab-window"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-tab-window")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-tab-v"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-tab-v")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-tab-min"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-tab-min")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-slider"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-slider")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-slider-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-slider-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-sidebar-right"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-sidebar-right")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-sidebar-none"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-sidebar-none")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-sidebar-left"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-sidebar-left")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-placeholder"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-placeholder")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-menu"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-menu")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-menu-v"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-menu-v")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-menu-separated"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-menu-separated")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-menu-full"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-menu-full")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-media-right"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-media-right")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-media-right-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-media-right-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-media-overlay"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-media-overlay")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-media-overlay-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-media-overlay-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-media-overlay-alt-2"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-media-overlay-alt-2")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-media-left"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-media-left")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-media-left-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-media-left-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-media-center"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-media-center")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-media-center-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-media-center-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-list-thumb"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-list-thumb")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-list-thumb-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-list-thumb-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-list-post"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-list-post")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-list-large-image"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-list-large-image")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-line-solid"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-line-solid")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-grid4"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-grid4")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-grid3"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-grid3")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-grid2"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-grid2")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-grid2-thumb"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-grid2-thumb")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-cta-right"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-cta-right")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-cta-left"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-cta-left")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-cta-center"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-cta-center")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-cta-btn-right"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-cta-btn-right")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-cta-btn-left"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-cta-btn-left")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-column4"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-column4")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-column3"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-column3")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-column2"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-column2")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-accordion-separated"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-accordion-separated")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-accordion-merged"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-accordion-merged")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-accordion-list"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-accordion-list")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-widgetized"}),a("span",{staticClass:"icon-name"},[e._v(" ti-widgetized")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-widget"}),a("span",{staticClass:"icon-name"},[e._v(" ti-widget")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-widget-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-widget-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-view-list"}),a("span",{staticClass:"icon-name"},[e._v(" ti-view-list")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-view-list-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-view-list-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-view-grid"}),a("span",{staticClass:"icon-name"},[e._v(" ti-view-grid")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-upload"}),a("span",{staticClass:"icon-name"},[e._v(" ti-upload")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-download"}),a("span",{staticClass:"icon-name"},[e._v(" ti-download")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-loop"}),a("span",{staticClass:"icon-name"},[e._v(" ti-loop")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-sidebar-2"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-sidebar-2")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-grid4-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-grid4-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-grid3-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-grid3-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-grid2-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-grid2-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-column4-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-column4-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-column3-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-column3-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-layout-column2-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-layout-column2-alt")])])]),a("div",{staticClass:"icon-section"},[a("h3",[e._v("Brand Icons")]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-flickr"}),a("span",{staticClass:"icon-name"},[e._v(" ti-flickr")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-flickr-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-flickr-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-instagram"}),a("span",{staticClass:"icon-name"},[e._v(" ti-instagram")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-google"}),a("span",{staticClass:"icon-name"},[e._v(" ti-google")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-github"}),a("span",{staticClass:"icon-name"},[e._v(" ti-github")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-facebook"}),a("span",{staticClass:"icon-name"},[e._v(" ti-facebook")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-dropbox"}),a("span",{staticClass:"icon-name"},[e._v(" ti-dropbox")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-dropbox-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-dropbox-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-dribbble"}),a("span",{staticClass:"icon-name"},[e._v(" ti-dribbble")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-apple"}),a("span",{staticClass:"icon-name"},[e._v(" ti-apple")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-android"}),a("span",{staticClass:"icon-name"},[e._v(" ti-android")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-yahoo"}),a("span",{staticClass:"icon-name"},[e._v(" ti-yahoo")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-trello"}),a("span",{staticClass:"icon-name"},[e._v(" ti-trello")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-stack-overflow"}),a("span",{staticClass:"icon-name"},[e._v(" ti-stack-overflow")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-soundcloud"}),a("span",{staticClass:"icon-name"},[e._v(" ti-soundcloud")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-sharethis"}),a("span",{staticClass:"icon-name"},[e._v(" ti-sharethis")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-sharethis-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-sharethis-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-reddit"}),a("span",{staticClass:"icon-name"},[e._v(" ti-reddit")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-microsoft"}),a("span",{staticClass:"icon-name"},[e._v(" ti-microsoft")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-microsoft-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-microsoft-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-linux"}),a("span",{staticClass:"icon-name"},[e._v(" ti-linux")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-jsfiddle"}),a("span",{staticClass:"icon-name"},[e._v(" ti-jsfiddle")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-joomla"}),a("span",{staticClass:"icon-name"},[e._v(" ti-joomla")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-html5"}),a("span",{staticClass:"icon-name"},[e._v(" ti-html5")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-css3"}),a("span",{staticClass:"icon-name"},[e._v(" ti-css3")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-drupal"}),a("span",{staticClass:"icon-name"},[e._v(" ti-drupal")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-wordpress"}),a("span",{staticClass:"icon-name"},[e._v(" ti-wordpress")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-tumblr"}),a("span",{staticClass:"icon-name"},[e._v(" ti-tumblr")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-tumblr-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-tumblr-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-skype"}),a("span",{staticClass:"icon-name"},[e._v(" ti-skype")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-youtube"}),a("span",{staticClass:"icon-name"},[e._v(" ti-youtube")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-vimeo"}),a("span",{staticClass:"icon-name"},[e._v(" ti-vimeo")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-vimeo-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-vimeo-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-twitter"}),a("span",{staticClass:"icon-name"},[e._v(" ti-twitter")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-twitter-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-twitter-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-linkedin"}),a("span",{staticClass:"icon-name"},[e._v(" ti-linkedin")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-pinterest"}),a("span",{staticClass:"icon-name"},[e._v(" ti-pinterest")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-pinterest-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-pinterest-alt")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-themify-logo"}),a("span",{staticClass:"icon-name"},[e._v(" ti-themify-logo")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-themify-favicon"}),a("span",{staticClass:"icon-name"},[e._v(" ti-themify-favicon")])]),a("div",{staticClass:"icon-container"},[a("span",{staticClass:"ti-themify-favicon-alt"}),a("span",{staticClass:"icon-name"},[e._v(" ti-themify-favicon-alt")])])])])],2)],1)])},tl=[],sl={},il=sl,nl=Object(h["a"])(il,al,tl,!1,null,null,null),ol=nl.exports,ll=function(){var e=this,a=e._self._c;return a("card",{staticClass:"card-map",attrs:{title:"Google Maps"}},[a("div",{staticClass:"map"},[a("div",{attrs:{id:"map"}})])])},cl=[],rl={mounted(){var e=new window.google.maps.LatLng(40.748817,-73.985428),a={zoom:13,center:e,scrollwheel:!1,styles:[{featureType:"water",stylers:[{saturation:43},{lightness:-11},{hue:"#0088ff"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{hue:"#ff0000"},{saturation:-100},{lightness:99}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#808080"},{lightness:54}]},{featureType:"landscape.man_made",elementType:"geometry.fill",stylers:[{color:"#ece2d9"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#ccdca1"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#767676"}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{color:"#ffffff"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#b8cb93"}]},{featureType:"poi.park",stylers:[{visibility:"on"}]},{featureType:"poi.sports_complex",stylers:[{visibility:"on"}]},{featureType:"poi.medical",stylers:[{visibility:"on"}]},{featureType:"poi.business",stylers:[{visibility:"simplified"}]}]},t=new window.google.maps.Map(document.getElementById("map"),a),s=new window.google.maps.Marker({position:e,title:"Hello World!"});s.setMap(t)}},dl=rl,ul=Object(h["a"])(dl,ll,cl,!1,null,null,null),pl=ul.exports,ml=function(){var e=this,a=e._self._c;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("card",[a("template",{slot:"header"},[a("h4",{staticClass:"card-title"},[e._v("Paper Dashboard Headings")]),a("p",{staticClass:"card-category"},[e._v("\n            Created using\n            "),a("a",{attrs:{href:"https://www.google.com/fonts/specimen/Muli"}},[e._v("Muli")]),e._v(" Font\n            Family\n          ")])]),a("div",{staticClass:"content"},[a("div",{staticClass:"typo-line"},[a("h1",[a("p",{staticClass:"category"},[e._v("Header 1")]),e._v("\n              Paper Dashboard Heading\n            ")])]),a("div",{staticClass:"typo-line"},[a("h2",[a("p",{staticClass:"category"},[e._v("Header 2")]),e._v("\n              Paper Dashboard Heading\n            ")])]),a("div",{staticClass:"typo-line"},[a("h3",[a("p",{staticClass:"category"},[e._v("Header 3")]),e._v("\n              Paper Dashboard Heading\n            ")])]),a("div",{staticClass:"typo-line"},[a("h4",[a("p",{staticClass:"category"},[e._v("Header 4")]),e._v("\n              Paper Dashboard Heading\n            ")])]),a("div",{staticClass:"typo-line"},[a("h5",[a("p",{staticClass:"category"},[e._v("Header 5")]),e._v("\n              Paper Dashboard Heading\n            ")])]),a("div",{staticClass:"typo-line"},[a("h6",[a("p",{staticClass:"category"},[e._v("Header 6")]),e._v("\n              Paper Dashboard Heading\n            ")])]),a("div",{staticClass:"typo-line"},[a("p",[a("span",{staticClass:"category"},[e._v("Paragraph")]),e._v("Lorem ipsum dolor sit amet,\n              consectetuer adipiscing elit, sed diam nonummy nibh euismod\n              tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi\n              enim ad minim veniam.\n            ")])]),a("div",{staticClass:"typo-line"},[a("p",{staticClass:"category"},[e._v("Quote")]),a("blockquote",[a("p",[e._v("\n                Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed\n                diam nonummy nibh euismod tincidunt ut laoreet dolore magna\n                aliquam erat volutpat. Ut wisi enim ad minim veniam.\n              ")]),a("small",[e._v(" Steve Jobs, CEO Apple ")])])]),a("div",{staticClass:"typo-line"},[a("p",{staticClass:"category"},[e._v("Muted Text")]),a("p",{staticClass:"text-muted"},[e._v("\n              Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam\n              nonummy nibh euismod tincidunt ut laoreet.\n            ")])]),a("div",{staticClass:"typo-line"},[a("p",{staticClass:"category"},[e._v("Coloured Text")]),a("p",{staticClass:"text-primary"},[e._v("\n              Text Primary - Light Bootstrap Table Heading and complex bootstrap\n              dashboard you've ever seen on the internet.\n            ")]),a("p",{staticClass:"text-info"},[e._v("\n              Text Info - Light Bootstrap Table Heading and complex bootstrap\n              dashboard you've ever seen on the internet.\n            ")]),a("p",{staticClass:"text-success"},[e._v("\n              Text Success - Light Bootstrap Table Heading and complex bootstrap\n              dashboard you've ever seen on the internet.\n            ")]),a("p",{staticClass:"text-warning"},[e._v("\n              Text Warning - Light Bootstrap Table Heading and complex bootstrap\n              dashboard you've ever seen on the internet.\n            ")]),a("p",{staticClass:"text-danger"},[e._v("\n              Text Danger - Light Bootstrap Table Heading and complex bootstrap\n              dashboard you've ever seen on the internet.\n            ")])]),a("div",{staticClass:"typo-line"},[a("h2",[a("p",{staticClass:"category"},[e._v("Small Tag")]),e._v("\n              Header with small subtitle\n              "),a("br"),a("small",[e._v('".small" is a tag for the headers')])])]),a("div",{staticClass:"typo-line"},[a("p",{staticClass:"category"},[e._v("Lists")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3"},[a("h5",[e._v("Unordered List")]),a("ul",[a("li",[e._v("List Item")]),a("li",[e._v("List Item")]),a("li",{staticClass:"list-unstyled"},[a("ul",[a("li",[e._v("List Item")]),a("li",[e._v("List Item")]),a("li",[e._v("List Item")])])]),a("li",[e._v("List Item")])])]),a("div",{staticClass:"col-md-3"},[a("h5",[e._v("Ordered List")]),a("ol",[a("li",[e._v("List Item")]),a("li",[e._v("List Item")]),a("li",[e._v("List Item")])])]),a("div",{staticClass:"col-md-3"},[a("h5",[e._v("Unstyled List")]),a("ul",{staticClass:"list-unstyled"},[a("li",[e._v("List Item")]),a("li",[e._v("List Item")]),a("li",[e._v("List Item")])])]),a("div",{staticClass:"col-md-3"},[a("h5",[e._v("Inline List")]),a("ul",{staticClass:"list-inline"},[a("li",[e._v("List Item")]),a("li",[e._v("List Item")]),a("li",[e._v("List Item")])])])])]),a("div",{staticClass:"typo-line"},[a("p",{staticClass:"category"},[e._v("Blockquotes")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("h5",[e._v("Default Blockquote")]),a("blockquote",[a("p",[e._v("\n                    Lorem ipsum dolor sit amet, consectetur adipiscing elit.\n                    Integer posuere erat a ante.\n                  ")])])]),a("div",{staticClass:"col-md-6"},[a("h5",[e._v("Blockquote with Citation")]),a("blockquote",[a("p",[e._v("\n                    Lorem ipsum dolor sit amet, consectetur adipiscing elit.\n                    Integer posuere erat a ante.\n                  ")]),a("small",[e._v("Someone famous in\n                    "),a("cite",{attrs:{title:"Source Title"}},[e._v("Source Title")])])])])])]),a("div",{staticClass:"typo-line"},[a("p",{staticClass:"category"},[e._v("Code")]),a("p",[e._v("\n              This is\n              "),a("code",[e._v(".css-class-as-code")]),e._v(", an example of an inline code\n              element. Wrap inline code within a\n              "),a("code",[e._v(" <code>...</code>")]),e._v("tag.\n            ")]),a("pre",[e._v("1. #This is an example of preformatted text. 2. #Here is another line of code")])])])],2)],1)])},vl=[],bl={},fl=bl,Cl=Object(h["a"])(fl,ml,vl,!1,null,null,null),hl=Cl.exports,gl=function(){var e=this,a=e._self._c;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("card",{attrs:{title:e.table1.title,subTitle:e.table1.subTitle}},[a("div",{staticClass:"table-responsive",attrs:{slot:"raw-content"},slot:"raw-content"},[a("paper-table",{attrs:{data:e.table1.data,columns:e.table1.columns}})],1)])],1),a("div",{staticClass:"col-12"},[a("card",{staticClass:"card-plain"},[a("div",{staticClass:"table-full-width table-responsive"},[a("paper-table",{attrs:{type:"hover",title:e.table2.title,"sub-title":e.table2.subTitle,data:e.table2.data,columns:e.table2.columns}})],1)])],1)])},yl=[];const _l=["Id","Name","Salary","Country","City"],wl=[{id:1,name:"Dakota Rice",salary:"$36.738",country:"Niger",city:"Oud-Turnhout"},{id:2,name:"Minerva Hooper",salary:"$23,789",country:"Curaçao",city:"Sinaai-Waas"},{id:3,name:"Sage Rodriguez",salary:"$56,142",country:"Netherlands",city:"Baileux"},{id:4,name:"Philip Chaney",salary:"$38,735",country:"Korea, South",city:"Overland Park"},{id:5,name:"Doris Greene",salary:"$63,542",country:"Malawi",city:"Feldkirchen in Kärnten"}];var Ol={components:{PaperTable:Oe},data(){return{table1:{title:"Stripped Table",subTitle:"Here is a subtitle for this table",columns:[..._l],data:[...wl]},table2:{title:"Table on Plain Background",subTitle:"Here is a subtitle for this table",columns:[..._l],data:[...wl]}}}},jl=Ol,kl=Object(h["a"])(jl,gl,yl,!1,null,null,null),Al=kl.exports,xl=function(){var e=this,a=e._self._c;return a("div",[a("div",{staticClass:"content"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"card"},[e._m(0),a("div",{staticClass:"card-body"},[a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"upload-section"},[a("h5",[e._v("📁 Subir/Realizar foto")]),a("div",{staticClass:"file-upload"},[a("input",{ref:"fileInput",staticClass:"file-input",attrs:{type:"file",accept:"image/*"},on:{change:e.handleFileUpload}}),a("button",{staticClass:"btn btn-info btn-lg",on:{click:function(a){return e.$refs.fileInput.click()}}},[a("i",{staticClass:"ti-upload"}),e._v(" Seleccionar archivo\n                      ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.fechaFactura,expression:"fechaFactura"}],staticClass:"form-control",attrs:{type:"date",id:"fechaFactura",max:e.fechaActual},domProps:{value:e.fechaFactura},on:{input:function(a){a.target.composing||(e.fechaFactura=a.target.value)}}}),a("button",{staticClass:"btn btn-success btn-lg",attrs:{disabled:!e.fotoCapturada||!e.fechaFactura},on:{click:e.crearPDF}},[a("i",{staticClass:"ti-save"}),e._v(" Subir Factura\n                      ")])]),e.fotoCapturada?a("div",{staticClass:"image-preview mt-3"},[a("h6",[e._v("Vista previa:")]),a("div",{staticClass:"image-container"},[a("img",{staticClass:"preview-image",attrs:{src:e.fotoCapturada,alt:"Preview"}})]),a("button",{staticClass:"btn btn-warning btn-sm",on:{click:e.limpiarFoto}},[a("i",{staticClass:"ti-trash"}),e._v(" Limpiar\n                      ")])]):e._e()])])])])])])])])])])},Sl=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"card-header"},[a("h4",{staticClass:"card-title"},[a("i",{staticClass:"ti-camera"}),e._v(" Subir Facturas\n              ")]),a("p",{staticClass:"card-category"},[e._v("Captura facturas con la cámara y conviértelas a PDF")])])}],Dl=t("8baf"),El={name:"SubirFacturas",data(){return{cameraActiva:!1,fotoCapturada:null,stream:null,canvas:null,fechaFactura:"",fechaActual:(new Date).toISOString().slice(0,10)}},mounted(){this.canvas=document.createElement("canvas")},beforeUnmount(){this.detenerCamera()},methods:{async toggleCamera(){this.cameraActiva?this.detenerCamera():await this.activarCamera()},async activarCamera(){try{this.stream=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720}}}),this.$refs.video.srcObject=this.stream,this.cameraActiva=!0}catch(e){console.error("Error accediendo a la cámara:",e),alert("Error accediendo a la cámara: "+e.message)}},detenerCamera(){this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null),this.cameraActiva=!1},tomarFoto(){if(!this.cameraActiva)return;const e=this.$refs.video,a=this.canvas.getContext("2d");this.canvas.width=e.videoWidth,this.canvas.height=e.videoHeight,a.drawImage(e,0,0,this.canvas.width,this.canvas.height),this.fotoCapturada=this.canvas.toDataURL("image/jpeg",.8)},async crearPDF(){if(this.fotoCapturada&&this.fechaFactura)try{const e=new Dl["a"],a=this.fotoCapturada,t=e.getImageProperties(a),s=e.internal.pageSize.getWidth(),i=t.height*s/t.width,n=e.internal.pageSize.getHeight();let o=s,r=i;i>n&&(r=n,o=t.width*n/t.height);const d=(s-o)/2,u=(n-r)/2;e.addImage(a,"JPEG",d,u,o,r);const m=JSON.parse(localStorage.getItem("userInform")),b={fecha:this.fechaFactura,usuario:m?m.correo||m.email:null,createdAt:(new Date).toISOString()},f=await Object(l["a"])(Object(l["b"])(p,"facturasPropias"),b),C=f.id,h=e.output("blob"),g=`facturas/${C}.pdf`,y=Object(c["f"])(v,g);await Object(c["g"])(y,h);const _=await Object(c["b"])(y);await Object(l["m"])(Object(l["d"])(p,"facturasPropias",C),{url:_}),alert("Factura guardada correctamente."),this.limpiarFoto()}catch(e){console.error("Error generando o guardando la factura:",e),alert("Error generando o guardando la factura: "+e.message)}else alert("Debes capturar una foto y seleccionar la fecha.")},limpiarFoto(){this.fotoCapturada=null,this.fechaFactura=""},handleFileUpload(e){const a=e.target.files[0];if(!a)return;if(!a.type.startsWith("image/"))return void alert("Por favor selecciona un archivo de imagen");const t=new FileReader;t.onload=e=>{this.fotoCapturada=e.target.result},t.readAsDataURL(a),e.target.value=""}}},Pl=El,Fl=(t("cb88"),Object(h["a"])(Pl,xl,Sl,!1,null,"2c30cd58",null)),Nl=Fl.exports,Il=function(){var e=this,a=e._self._c;return a("div",{staticClass:"content"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"card"},[e._m(0),a("div",{staticClass:"card-body"},[e.loading?a("div",{staticClass:"text-center q-mt-lg"},[a("span",[e._v("Cargando facturas...")])]):a("div",[0===e.facturas.length?a("div",{staticClass:"text-center"},[a("p",[e._v("No hay facturas propias registradas.")])]):a("div",[a("table",{staticClass:"table table-hover"},[e._m(1),a("tbody",e._l(e.facturas,(function(t){return a("tr",{key:t.id},[a("td",[e._v(e._s(e.formatDate(t.fecha)))]),a("td",[e._v(e._s(t.usuario))]),a("td",[a("button",{staticClass:"btn btn-info btn-sm",on:{click:function(a){return e.previewFactura(t.url)}}},[a("i",{staticClass:"ti-eye"}),e._v(" Ver PDF\n                    ")])]),a("td",[a("button",{staticClass:"btn btn-success btn-sm",on:{click:function(a){return e.downloadFactura(t)}}},[a("i",{staticClass:"ti-download"}),e._v(" Descargar\n                    ")])]),a("td",[a("button",{staticClass:"btn btn-warning btn-sm mr-2",on:{click:function(a){return e.openEditModal(t)}}},[a("i",{staticClass:"ti-pencil"}),e._v(" Editar")]),a("button",{staticClass:"btn btn-danger btn-sm",on:{click:function(a){return e.confirmDelete(t)}}},[a("i",{staticClass:"ti-trash"}),e._v(" Eliminar")])])])})),0)])])])])]),e.pdfPreviewUrl?a("div",{staticClass:"modal-pdf-preview",on:{click:function(a){if(a.target!==a.currentTarget)return null;e.pdfPreviewUrl=null}}},[a("div",{staticClass:"pdf-modal-content"},[a("iframe",{attrs:{src:e.pdfPreviewUrl,width:"100%",height:"600px"}}),a("button",{staticClass:"btn btn-danger mt-2",on:{click:function(a){e.pdfPreviewUrl=null}}},[e._v("Cerrar")])])]):e._e(),e.editModal?a("div",{staticClass:"modal-pdf-preview",on:{click:function(a){return a.target!==a.currentTarget?null:e.closeEditModal.apply(null,arguments)}}},[a("div",{staticClass:"pdf-modal-content"},[a("h5",[e._v("Editar fecha de factura")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.editFecha,expression:"editFecha"}],staticClass:"form-control mb-3",attrs:{type:"date",max:e.fechaActual},domProps:{value:e.editFecha},on:{input:function(a){a.target.composing||(e.editFecha=a.target.value)}}}),a("button",{staticClass:"btn btn-success mr-2",on:{click:e.saveEdit}},[e._v("Guardar")]),a("button",{staticClass:"btn btn-secondary",on:{click:e.closeEditModal}},[e._v("Cancelar")])])]):e._e(),e.deleteModal?a("div",{staticClass:"modal-pdf-preview",on:{click:function(a){return a.target!==a.currentTarget?null:e.closeDeleteModal.apply(null,arguments)}}},[a("div",{staticClass:"pdf-modal-content"},[a("h5",[e._v("¿Seguro que quieres eliminar esta factura?")]),a("button",{staticClass:"btn btn-danger mr-2",on:{click:e.deleteFactura}},[e._v("Eliminar")]),a("button",{staticClass:"btn btn-secondary",on:{click:e.closeDeleteModal}},[e._v("Cancelar")])])]):e._e()])])},Ll=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"card-header"},[a("h4",{staticClass:"card-title"},[e._v("Listado de Facturas")])])},function(){var e=this,a=e._self._c;return a("thead",[a("tr",[a("th",[e._v("Fecha")]),a("th",[e._v("Usuario")]),a("th",[e._v("Previsualización")]),a("th",[e._v("Descargar")]),a("th",[e._v("Acciones")])])])}],Tl={name:"ListadoFacturasPropias",setup(){const e=Object(s["ref"])([]),a=Object(s["ref"])(!0),t=Object(s["ref"])(null),i=Object(s["ref"])(!1),n=Object(s["ref"])(!1),o=Object(s["ref"])(null),r=Object(s["ref"])(null),d=Object(s["ref"])(""),u=(new Date).toISOString().slice(0,10),m=e=>{if(!e)return"";const a=new Date(e);return a.toLocaleDateString()},b=e=>{t.value=e},f=async()=>{a.value=!0;const t=Object(l["k"])(Object(l["b"])(p,"facturasPropias"),Object(l["j"])("fecha","desc")),s=await Object(l["f"])(t);e.value=s.docs.map(e=>({id:e.id,...e.data()})),a.value=!1},C=e=>{o.value=e,d.value=e.fecha,i.value=!0},h=()=>{i.value=!1,o.value=null,d.value=""},g=async()=>{d.value&&(await Object(l["m"])(Object(l["d"])(p,"facturasPropias",o.value.id),{fecha:d.value}),o.value.fecha=d.value,h(),await f())},y=e=>{r.value=e,n.value=!0},_=()=>{n.value=!1,r.value=null},w=async()=>{if(r.value.url)try{const e=`facturas/${r.value.id}.pdf`,a=Object(c["f"])(v,e);await Object(c["a"])(a)}catch(e){}await Object(l["c"])(Object(l["d"])(p,"facturasPropias",r.value.id)),_(),await f()},O=async e=>{try{const a=await fetch(e.url),t=await a.blob(),s=window.URL.createObjectURL(t),i=document.createElement("a");i.href=s,i.download=`factura-${e.fecha}.pdf`,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(s),document.body.removeChild(i)}catch(a){console.error("Error descargando la factura:",a),alert("Error descargando la factura")}};return Object(s["onMounted"])(f),{facturas:e,loading:a,pdfPreviewUrl:t,formatDate:m,previewFactura:b,editModal:i,deleteModal:n,openEditModal:C,closeEditModal:h,saveEdit:g,editFecha:d,fechaActual:u,confirmDelete:y,closeDeleteModal:_,deleteFactura:w,downloadFactura:O}}},Ql=Tl,Ml=(t("9113"),Object(h["a"])(Ql,Il,Ll,!1,null,"a2cc1018",null)),$l=Ml.exports,Bl=function(){var e=this,a=e._self._c;return a("div",{staticClass:"curso-container"},[e.isAdmin?a("div",{staticClass:"admin-panel"},[a("div",{staticClass:"card"},[e._m(0),a("div",{staticClass:"card-body"},[a("div",{staticClass:"status-bar mb-4"},[e.cursoEnVivo?a("span",{staticClass:"badge badge-danger live-badge"},[a("span",{staticClass:"pulse"}),e._v(" EN VIVO\n          ")]):a("span",{staticClass:"badge badge-secondary"},[e._v("\n            DESCONECTADO\n          ")])]),a("div",{staticClass:"admin-controls mb-4"},[e.cursoEnVivo?e._e():a("button",{staticClass:"btn btn-danger btn-lg",attrs:{disabled:e.loading},on:{click:e.iniciarEmision}},[a("i",{staticClass:"ti-control-play"}),e._v("\n            "+e._s(e.loading?"Iniciando...":"Iniciar Emisión")+"\n          ")]),e.cursoEnVivo?a("button",{staticClass:"btn btn-outline-danger btn-lg",on:{click:e.terminarEmision}},[a("i",{staticClass:"ti-control-stop"}),e._v("\n            Terminar Emisión\n          ")]):e._e()]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.cursoEnVivo,expression:"cursoEnVivo"}],ref:"jitsiContainer",staticClass:"video-container"}),e.cursoEnVivo?a("div",{staticClass:"alert alert-info mt-3"},[a("i",{staticClass:"ti-info-alt"}),a("strong",[e._v("Tip:")]),e._v(" Usa el botón de compartir pantalla en la barra inferior de Jitsi para mostrar tu pantalla.\n        ")]):e._e()])])]):a("div",{staticClass:"viewer-panel"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[e._m(1),e.cursoEnVivo?a("div",{staticClass:"live-indicator"},[e._m(2)]):e._e()]),a("div",{staticClass:"card-body"},[e.cursoEnVivo?e._e():a("div",{staticClass:"waiting-screen"},[a("div",{staticClass:"waiting-content"},[a("i",{staticClass:"ti-time waiting-icon"}),a("h5",[e._v("Esperando a que comience la emisión...")]),a("p",{staticClass:"text-muted"},[e._v("Te conectarás automáticamente cuando el curso comience.")]),e.checkingStatus?a("div",{staticClass:"spinner-border text-primary",attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[e._v("Comprobando...")])]):e._e()])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.cursoEnVivo,expression:"cursoEnVivo"}],ref:"jitsiContainer",staticClass:"video-container"})])])]),e.error?a("div",{staticClass:"alert alert-danger mt-3"},[a("i",{staticClass:"ti-alert"}),e._v(" "+e._s(e.error)+"\n  ")]):e._e()])},Vl=[function(){var e=this,a=e._self._c;return a("div",{staticClass:"card-header"},[a("h4",{staticClass:"card-title"},[a("i",{staticClass:"ti-video-camera"}),e._v(" Panel de Emisión - Curso en Directo\n        ")])])},function(){var e=this,a=e._self._c;return a("h4",{staticClass:"card-title"},[a("i",{staticClass:"ti-video-camera"}),e._v(" Curso en Directo\n        ")])},function(){var e=this,a=e._self._c;return a("span",{staticClass:"badge badge-danger live-badge"},[a("span",{staticClass:"pulse"}),e._v(" EN VIVO\n          ")])}];const zl="CursoPeritoMedico";var Rl={name:"Curso",data(){return{isAdmin:!1,cursoEnVivo:!1,loading:!1,error:null,checkingStatus:!0,jitsiApi:null,unsubscribe:null}},async mounted(){const e=localStorage.getItem("userInform");if(e){const a=JSON.parse(e);this.isAdmin=!0===a.admin}await this.loadJitsiScript(),this.listenCursoStatus()},beforeDestroy(){this.unsubscribe&&this.unsubscribe(),this.jitsiApi&&this.jitsiApi.dispose()},methods:{loadJitsiScript(){return new Promise((e,a)=>{if(window.JitsiMeetExternalAPI)return void e();const t=document.createElement("script");t.src="https://meet.jit.si/external_api.js",t.onload=e,t.onerror=a,document.head.appendChild(t)})},listenCursoStatus(){const e=Object(l["g"])(),a=Object(l["d"])(e,"configuracion","curso");this.unsubscribe=Object(l["i"])(a,e=>{if(this.checkingStatus=!1,e.exists()){const a=e.data(),t=this.cursoEnVivo;this.cursoEnVivo=!0===a.enVivo,this.isAdmin||!this.cursoEnVivo||t||this.$nextTick(()=>{this.joinAsViewer()}),!this.cursoEnVivo&&t&&this.jitsiApi&&(this.jitsiApi.dispose(),this.jitsiApi=null)}else this.cursoEnVivo=!1},e=>{console.error("Error escuchando estado del curso:",e),this.checkingStatus=!1})},getUserName(){const e=localStorage.getItem("userInform");if(e){const a=JSON.parse(e);return a.nombre||a.email||"Usuario"}return"Usuario"},async iniciarEmision(){this.loading=!0,this.error=null;try{this.jitsiApi=new window.JitsiMeetExternalAPI("meet.jit.si",{roomName:zl,parentNode:this.$refs.jitsiContainer,width:"100%",height:500,userInfo:{displayName:this.getUserName()+" (Presentador)"},configOverwrite:{startWithAudioMuted:!1,startWithVideoMuted:!1,prejoinPageEnabled:!1,disableModeratorIndicator:!1,enableClosePage:!1,disableDeepLinking:!0,startScreenSharing:!1,enableNoisyMicDetection:!1},interfaceConfigOverwrite:{TOOLBAR_BUTTONS:["microphone","camera","desktop","fullscreen","fodeviceselection","hangup","settings","videoquality","tileview"],SHOW_JITSI_WATERMARK:!1,SHOW_WATERMARK_FOR_GUESTS:!1,DEFAULT_BACKGROUND:"#1a1a1a",DISABLE_JOIN_LEAVE_NOTIFICATIONS:!0,MOBILE_APP_PROMO:!1,HIDE_INVITE_MORE_HEADER:!0}}),this.jitsiApi.addListener("videoConferenceJoined",()=>{console.log("Admin unido a la conferencia")}),this.jitsiApi.addListener("videoConferenceLeft",()=>{console.log("Admin salió de la conferencia")});const e=Object(l["g"])();await Object(l["l"])(Object(l["d"])(e,"configuracion","curso"),{enVivo:!0,roomName:zl,iniciadoEn:(new Date).toISOString(),iniciadoPor:this.getUserName()}),this.cursoEnVivo=!0}catch(e){console.error("Error iniciando emisión:",e),this.error=e.message||"Error al iniciar la emisión"}finally{this.loading=!1}},async terminarEmision(){try{this.jitsiApi&&(this.jitsiApi.executeCommand("hangup"),this.jitsiApi.dispose(),this.jitsiApi=null);const e=Object(l["g"])();await Object(l["l"])(Object(l["d"])(e,"configuracion","curso"),{enVivo:!1,roomName:null,terminadoEn:(new Date).toISOString()}),this.cursoEnVivo=!1}catch(e){console.error("Error terminando emisión:",e),this.error=e.message}},joinAsViewer(){if(!this.jitsiApi)try{this.jitsiApi=new window.JitsiMeetExternalAPI("meet.jit.si",{roomName:zl,parentNode:this.$refs.jitsiContainer,width:"100%",height:500,userInfo:{displayName:this.getUserName()},configOverwrite:{startWithAudioMuted:!0,startWithVideoMuted:!0,prejoinPageEnabled:!1,disableModeratorIndicator:!0,enableClosePage:!1,disableDeepLinking:!0},interfaceConfigOverwrite:{TOOLBAR_BUTTONS:["fullscreen","settings","videoquality","tileview"],SHOW_JITSI_WATERMARK:!1,SHOW_WATERMARK_FOR_GUESTS:!1,DEFAULT_BACKGROUND:"#1a1a1a",DISABLE_JOIN_LEAVE_NOTIFICATIONS:!0,MOBILE_APP_PROMO:!1,HIDE_INVITE_MORE_HEADER:!0,FILM_STRIP_MAX_HEIGHT:0}}),this.jitsiApi.addListener("videoConferenceJoined",()=>{console.log("Viewer unido a la conferencia"),this.jitsiApi.executeCommand("toggleAudio"),this.jitsiApi.executeCommand("toggleVideo")})}catch(e){console.error("Error uniéndose como viewer:",e),this.error="Error al conectar con el curso"}}}},Jl=Rl,ql=(t("b7a0"),Object(h["a"])(Jl,Bl,Vl,!1,null,"1806ad74",null)),Ul=ql.exports,Hl=function(){var e=this,a=e._self._c;return a("div",[e.showSuccess?a("b-alert",{attrs:{variant:"success",show:""}},[e._v("Caso Valmer dado de alta correctamente")]):e._e(),e.showError?a("b-alert",{attrs:{variant:"danger",show:""}},[e._v("Error al dar de alta el caso")]):e._e(),a("card",{staticClass:"card-user"},[a("h3",[e._v("Alta Caso Valmer")]),a("form",{on:{submit:function(a){return a.preventDefault(),e.sendInfo.apply(null,arguments)}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h4",[e._v("Datos del cliente")])]),a("div",{staticClass:"col-md-6"},[a("fg-input",{attrs:{type:"text",label:"Nombre",placeholder:"Nombre"},model:{value:e.cliente.nombre,callback:function(a){e.$set(e.cliente,"nombre",a)},expression:"cliente.nombre"}})],1),a("div",{staticClass:"col-md-6"},[a("fg-input",{attrs:{type:"text",label:"Apellidos",placeholder:"Apellidos"},model:{value:e.cliente.apellidos,callback:function(a){e.$set(e.cliente,"apellidos",a)},expression:"cliente.apellidos"}})],1),a("div",{staticClass:"col-md-6"},[a("fg-input",{attrs:{type:"text",label:"Correo",placeholder:"Correo"},model:{value:e.cliente.correo,callback:function(a){e.$set(e.cliente,"correo",a)},expression:"cliente.correo"}})],1),a("div",{staticClass:"col-md-6"},[a("fg-input",{attrs:{type:"text",label:"Teléfono",placeholder:"Teléfono"},model:{value:e.cliente.tel,callback:function(a){e.$set(e.cliente,"tel",a)},expression:"cliente.tel"}})],1),a("div",{staticClass:"custom-select-wrapper col-md-6"},[a("label",{attrs:{for:""}},[e._v("Comunidad Autónoma")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.cliente.comunidad,expression:"cliente.comunidad"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.cliente,"comunidad",a.target.multiple?t:t[0])}}},e._l(e.comunidades,(function(t,s){return a("option",{key:s,domProps:{value:s}},[e._v(e._s(t))])})),0)]),a("div",{staticClass:"custom-select-wrapper col-md-6"},[a("label",{attrs:{for:""}},[e._v("Provincia")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.cliente.provincia,expression:"cliente.provincia"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.cliente,"provincia",a.target.multiple?t:t[0])}}},e._l(e.provincias,(function(t,s){return a("option",{key:s,domProps:{value:s}},[e._v(e._s(t))])})),0)]),a("div",{staticClass:"custom-select-wrapper col-md-6 mt-2"},[a("fg-input",{attrs:{type:"text",label:"Población",placeholder:"Población"},model:{value:e.cliente.poblacion,callback:function(a){e.$set(e.cliente,"poblacion",a)},expression:"cliente.poblacion"}})],1),a("div",{staticClass:"custom-select-wrapper col-md-12 mt-2"},[a("label",{staticStyle:{display:"block"}},[e._v("Observaciones")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.cliente.observaciones,expression:"cliente.observaciones"}],staticStyle:{width:"100%",border:"none","background-color":"#fffcf5",padding:"7px 18px"},attrs:{type:"text",label:"Observaciones",rows:"3"},domProps:{value:e.cliente.observaciones},on:{input:function(a){a.target.composing||e.$set(e.cliente,"observaciones",a.target.value)}}})]),a("div",{staticClass:"col-12 mt-4"},[a("h4",[e._v("Datos del caso")])]),a("div",{staticClass:"custom-select-wrapper col-md-6"},[a("label",{attrs:{for:""}},[e._v("Tipo de contacto / Especialidad")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.caso.especialidad,expression:"caso.especialidad"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.$set(e.caso,"especialidad",a.target.multiple?t:t[0])}}},e._l(e.especialidades,(function(t){return a("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.nombre))])})),0)]),a("div",{staticClass:"custom-select-wrapper col-md-6"},[a("label",{attrs:{for:""}},[e._v("Perito asignado")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.peritoSeleccionado,expression:"peritoSeleccionado"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.peritoSeleccionado=a.target.multiple?t:t[0]}}},[a("option",{domProps:{value:null}},[e._v("Sin asignar")]),e._l(e.peritos,(function(t){return a("option",{key:t.id,domProps:{value:t}},[e._v(e._s(t.nombre)+" "+e._s(t.apellidos))])}))],2)]),a("div",{staticClass:"col-12 text-center mt-4 py-2"},[a("p-button",{attrs:{type:"info",round:""},nativeOn:{click:function(a){return a.preventDefault(),e.sendInfo.apply(null,arguments)}}},[e._v("\n            Dar de alta caso Valmer\n          ")])],1)])])])],1)},Wl=[],Gl={setup(){const e=Object(s["ref"])(!1),a=Object(s["ref"])(!1),t=Object(s["ref"])([]),i=Object(s["ref"])([]),n=Object(s["ref"])(null),o=Object(s["ref"])({nombre:"",apellidos:"",correo:"",tel:"",comunidad:"",provincia:"",poblacion:"",observaciones:""}),c=Object(s["ref"])({especialidad:"",status:"0"}),r=async()=>{t.value=(await Object(l["f"])(Object(l["b"])(p,"especialidades"))).docs.map(e=>({id:e.id,...e.data()})),i.value=(await Object(l["f"])(Object(l["b"])(p,"especialistas"))).docs.map(e=>({id:e.id,...e.data()})),i.value.sort((e,a)=>{const t=e["nombre"]||"",s=a["nombre"]||"";return t.toLowerCase().localeCompare(s.toLowerCase())})},d=async()=>{const e=Object(l["k"])(Object(l["b"])(p,"clientes_valmer"),Object(l["n"])("tel","==",o.value.tel)),a=await Object(l["f"])(e);if(a.docs.length>0)return a.docs[0].id;{o.value.time=(new Date).getTime(),o.value.nombreLower=o.value.nombre.toLowerCase(),o.value.apellidosLower=o.value.apellidos.toLowerCase();const e=await Object(l["a"])(Object(l["b"])(p,"clientes_valmer"),o.value);return e.id}},u=async e=>{const a={...c.value,telCliente:o.value.tel,clienteId:e,time:(new Date).getTime()};n.value?(a.peritoId=n.value.id,a.peritoNombre=n.value.nombre,a.peritoApellidos=n.value.apellidos,a.telEspecialista=n.value.tel,a.status="1"):(a.telEspecialista=null,a.status="0");const t=await Object(l["a"])(Object(l["b"])(p,"casos_valmer"),a);return t.id},m=async()=>{try{if(!o.value.tel||!c.value.especialidad)return a.value=!0,void setTimeout(()=>{a.value=!1},2e3);const t=await d();await u(t),o.value={nombre:"",apellidos:"",correo:"",tel:"",comunidad:"",provincia:"",poblacion:"",observaciones:""},c.value={especialidad:"",status:"0"},n.value=null,e.value=!0,setTimeout(()=>{e.value=!1},2e3)}catch(t){console.error("Error al dar de alta caso Valmer:",t),a.value=!0,setTimeout(()=>{a.value=!1},2e3)}};return Object(s["onMounted"])(()=>{r()}),{cliente:o,caso:c,comunidades:ba,provincias:fa,especialidades:t,peritos:i,peritoSeleccionado:n,showSuccess:e,showError:a,sendInfo:m}}},Yl=Gl,Kl=(t("bf09"),Object(h["a"])(Yl,Hl,Wl,!1,null,"e30bc3e6",null)),Zl=Kl.exports,Xl=function(){var e=this,a=e._self._c;return a("div",[a("Listados",{attrs:{items:e.filteredCasos,fields:e.fields,"current-page":e.currentPage},on:{"page-changed":e.handlePageChange},scopedSlots:e._u([{key:"filters",fn:function(){return[a("Formulario",{attrs:{filters:e.filterFields,formClass:"form-filters",fieldClass:"col-4"},on:{submit:e.handleFiltersSubmit}})]},proxy:!0},{key:"tableActions",fn:function({data:t}){return[t.item.clienteId?a("b-button",{staticClass:"mt-3 mx-1",attrs:{size:"sm",variant:"info"},on:{click:function(a){return e.$router.push({name:"UserProfile",params:{id:t.item.clienteId},query:{type:"cliente_valmer",casoId:t.item.id}})}}},[a("b-icon",{attrs:{icon:"eye",variant:"white"}})],1):e._e(),t.item.peritoId?e._e():a("b-button",{staticClass:"mt-3 mx-1",attrs:{size:"sm",variant:"success"},on:{click:function(a){return e.abrirAsignarPerito(t.item)}}},[a("b-icon",{attrs:{icon:"person-plus",variant:"white"}})],1)]}}])}),a("b-modal",{attrs:{title:"Asignar Perito"},on:{ok:e.asignarPerito},model:{value:e.showAsignarPerito,callback:function(a){e.showAsignarPerito=a},expression:"showAsignarPerito"}},[a("div",{staticClass:"custom-select-wrapper"},[a("label",[e._v("Seleccionar Perito")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.peritoSeleccionado,expression:"peritoSeleccionado"}],staticClass:"custom-select",on:{change:function(a){var t=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var a="_value"in e?e._value:e.value;return a}));e.peritoSeleccionado=a.target.multiple?t:t[0]}}},[a("option",{domProps:{value:null}},[e._v("Seleccione un perito")]),e._l(e.peritos,(function(t){return a("option",{key:t.id,domProps:{value:t}},[e._v("\n          "+e._s(t.nombre)+" "+e._s(t.apellidos)+"\n        ")])}))],2)])])],1)},ec=[],ac={components:{Listados:dt,Formulario:Sa},setup(){const e=Object(s["ref"])([]),a=Object(s["ref"])([]),t=Object(s["ref"])([]),i=Object(s["ref"])(1),n=Object(s["ref"])(!1),o=Object(s["ref"])(null),c=Object(s["ref"])(null),r=[{key:"dias",label:"Días"},{key:"nombreCliente",label:"Nombre"},{key:"apellidosCliente",label:"Apellidos"},{key:"telCliente",label:"Teléfono"},{key:"nombreEspe",label:"Especialidad"},{key:"peritoNombre",label:"Perito"},{key:"estadoTexto",label:"Estado"},{key:"actions",label:"Acciones"}],d=Object(s["ref"])({searchQuery:"",searchQueryName:"",filterStatus:""}),u=[{name:"searchQuery",label:"Filtrar por teléfono",type:"input",placeholder:"Buscar por teléfono"},{name:"searchQueryName",label:"Filtrar por nombre",type:"input",placeholder:"Buscar por nombre"},{name:"filterStatus",label:"Estado",type:"select",options:[{value:"",label:"Todos"},{value:"0",label:"Sin asignar"},{value:"1",label:"Asignado"},{value:"2",label:"En proceso"},{value:"3",label:"Finalizado"}]}],m=e=>{const a={0:"Sin asignar",1:"Asignado",2:"En proceso",3:"Finalizado"};return a[e]||"Desconocido"},v=async()=>{try{const t=await Object(l["f"])(Object(l["b"])(p,"casos_valmer"));let s=t.docs.map(e=>({id:e.id,...e.data()}));await Promise.all(s.map(async e=>{const t=Object(l["k"])(Object(l["b"])(p,"clientes_valmer"),Object(l["n"])("tel","==",e.telCliente)),s=await Object(l["f"])(t);if(s.docs.length>0){const a=s.docs[0].data();e.clienteId=s.docs[0].id,e.nombreCliente=a.nombre||"N/A",e.apellidosCliente=a.apellidos||"N/A",e.correo=a.correo||"N/A",e.comunidadCliente=ba[a.comunidad]||"N/A",e.provinciaCliente=fa[a.provincia]||"N/A",e.observaciones=a.observaciones||""}else e.clienteId=null,e.nombreCliente="N/A",e.apellidosCliente="N/A",e.correo="N/A",e.comunidadCliente="N/A",e.provinciaCliente="N/A";const i=a.value.find(a=>a.id===e.especialidad);e.nombreEspe=i?i.nombre:"N/A";const n=new Date(e.time),o=new Date,c=o-n;e.dias=Math.floor(c/864e5),e.estadoTexto=m(e.status),e.peritoNombre=e.peritoNombre||"Sin asignar"})),e.value=s.sort((e,a)=>a.time-e.time)}catch(t){console.error("Error al buscar casos Valmer:",t)}},b=Object(s["computed"])(()=>{let a=e.value;return d.value.filterStatus&&(a=a.filter(e=>e.status===d.value.filterStatus)),d.value.searchQuery&&(a=a.filter(e=>e.telCliente&&e.telCliente.toLowerCase().includes(d.value.searchQuery.toLowerCase()))),d.value.searchQueryName&&(a=a.filter(e=>e.nombreCliente&&e.nombreCliente.toLowerCase().includes(d.value.searchQueryName.toLowerCase())||e.apellidosCliente&&e.apellidosCliente.toLowerCase().includes(d.value.searchQueryName.toLowerCase()))),a}),f=async()=>{a.value=(await Object(l["f"])(Object(l["b"])(p,"especialidades"))).docs.map(e=>({id:e.id,...e.data()}))},C=async()=>{t.value=(await Object(l["f"])(Object(l["b"])(p,"especialistas"))).docs.map(e=>({id:e.id,...e.data()})),t.value.sort((e,a)=>{const t=e["nombre"]||"",s=a["nombre"]||"";return t.toLowerCase().localeCompare(s.toLowerCase())})},h=e=>{i.value=parseInt(e)},g=e=>{Object.assign(d.value,e)},y=e=>{o.value=e,c.value=null,n.value=!0},_=async()=>{if(c.value&&o.value)try{const a=Object(l["d"])(p,"casos_valmer",o.value.id);await Object(l["m"])(a,{peritoId:c.value.id,peritoNombre:c.value.nombre,peritoApellidos:c.value.apellidos,telEspecialista:c.value.tel,status:"1"});const t=e.value.findIndex(e=>e.id===o.value.id);-1!==t&&(e.value[t].peritoId=c.value.id,e.value[t].peritoNombre=c.value.nombre,e.value[t].peritoApellidos=c.value.apellidos,e.value[t].telEspecialista=c.value.tel,e.value[t].status="1",e.value[t].estadoTexto="Asignado"),n.value=!1,o.value=null,c.value=null}catch(a){console.error("Error al asignar perito:",a)}};return Object(s["onMounted"])(async()=>{await f(),await C(),await v()}),{fields:r,filterFields:u,handleFiltersSubmit:g,casos:e,filteredCasos:b,handlePageChange:h,currentPage:i,showAsignarPerito:n,casoSeleccionado:o,peritoSeleccionado:c,peritos:t,abrirAsignarPerito:y,asignarPerito:_,getEstado:m}}},tc=ac,sc=(t("3758"),Object(h["a"])(tc,Xl,ec,!1,null,"223e2b5c",null)),ic=sc.exports,nc=function(){var e=this,a=e._self._c;return a("div",[a("Listados",{attrs:{items:e.filteredCasos,fields:e.fields,"current-page":e.currentPage},on:{"page-changed":e.handlePageChange},scopedSlots:e._u([{key:"filters",fn:function(){return[a("Formulario",{attrs:{filters:e.filterFields,formClass:"form-filters",fieldClass:"col-4"},on:{submit:e.handleFiltersSubmit}})]},proxy:!0},{key:"tableActions",fn:function({data:t}){return[a("b-button",{staticClass:"mt-3 mx-1",attrs:{size:"sm",variant:"info"},on:{click:function(a){return e.$router.push({name:"UserProfile",params:{id:t.item.clienteId},query:{type:"cliente_valmer",casoId:t.item.id}})}}},[a("b-icon",{attrs:{icon:"eye",variant:"white"}})],1)]}}])})],1)},oc=[],lc={components:{Listados:dt,Formulario:Sa},setup(){const e=Object(s["ref"])([]),a=Object(s["ref"])([]),t=Object(s["ref"])({}),i=Object(s["ref"])(1),n=[{key:"dias",label:"Días"},{key:"nombreCliente",label:"Nombre"},{key:"apellidosCliente",label:"Apellidos"},{key:"telCliente",label:"Teléfono"},{key:"nombreEspe",label:"Especialidad"},{key:"estadoTexto",label:"Estado"},{key:"actions",label:"Acciones"}],o=Object(s["ref"])({searchQuery:"",searchQueryName:""}),c=[{name:"searchQuery",label:"Filtrar por teléfono",type:"input",placeholder:"Buscar por teléfono"},{name:"searchQueryName",label:"Filtrar por nombre",type:"input",placeholder:"Buscar por nombre"}],r=e=>{const a={0:"Sin asignar",1:"Asignado",2:"En proceso",3:"Finalizado"};return a[e]||"Desconocido"},d=async()=>{try{const s=Object(l["k"])(Object(l["b"])(p,"casos_valmer"),Object(l["n"])("telEspecialista","==",t.value.tel)),i=await Object(l["f"])(s);let n=i.docs.map(e=>({id:e.id,...e.data()}));await Promise.all(n.map(async e=>{const t=Object(l["k"])(Object(l["b"])(p,"clientes_valmer"),Object(l["n"])("tel","==",e.telCliente)),s=await Object(l["f"])(t);if(s.docs.length>0){const a=s.docs[0].data();e.clienteId=s.docs[0].id,e.nombreCliente=a.nombre||"N/A",e.apellidosCliente=a.apellidos||"N/A",e.correo=a.correo||"N/A",e.comunidadCliente=ba[a.comunidad]||"N/A",e.provinciaCliente=fa[a.provincia]||"N/A",e.observaciones=a.observaciones||""}else e.clienteId=null,e.nombreCliente="N/A",e.apellidosCliente="N/A",e.correo="N/A",e.comunidadCliente="N/A",e.provinciaCliente="N/A";const i=a.value.find(a=>a.id===e.especialidad);e.nombreEspe=i?i.nombre:"N/A";const n=new Date(e.time),o=new Date,c=o-n;e.dias=Math.floor(c/864e5),e.estadoTexto=r(e.status)})),e.value=n.sort((e,a)=>a.time-e.time)}catch(s){console.error("Error al buscar mis casos Valmer:",s)}},u=Object(s["computed"])(()=>{let a=e.value;return o.value.searchQuery&&(a=a.filter(e=>e.telCliente&&e.telCliente.toLowerCase().includes(o.value.searchQuery.toLowerCase()))),o.value.searchQueryName&&(a=a.filter(e=>e.nombreCliente&&e.nombreCliente.toLowerCase().includes(o.value.searchQueryName.toLowerCase())||e.apellidosCliente&&e.apellidosCliente.toLowerCase().includes(o.value.searchQueryName.toLowerCase()))),a}),m=async()=>{a.value=(await Object(l["f"])(Object(l["b"])(p,"especialidades"))).docs.map(e=>({id:e.id,...e.data()}))},v=e=>{i.value=parseInt(e)},b=e=>{Object.assign(o.value,e)};return Object(s["onMounted"])(async()=>{t.value=JSON.parse(localStorage.getItem("userInform")),await m(),await d()}),{fields:n,filterFields:c,handleFiltersSubmit:b,casos:e,filteredCasos:u,handlePageChange:v,currentPage:i}}},cc=lc,rc=Object(h["a"])(cc,nc,oc,!1,null,null,null),dc=rc.exports;s["default"].use(_["a"]);const uc=[{path:"/",component:K,redirect:"/mis-casos",children:[{path:"dashboard",name:"dashboard",component:ya},{path:"login",name:"login",component:Fa},{path:"historico-login",name:"historico-login",component:At},{path:"que-haces-aqui-tu",name:"que-haces-aqui-tu",component:Di},{path:"/perfil/:id",name:"UserProfile",component:Wo},{path:"alta-especialidades",name:"alta-especialidades",component:ys},{path:"listado-notificaciones-chats",name:"listado-notificaciones-chats",component:yt},{path:"listado-clientes",name:"listado-clientes",component:vt},{path:"calendario",name:"calendario",component:As},{path:"calendario-remesas",name:"calendario-remesas",component:Fs},{path:"citas",name:"citas",component:Ms},{path:"listado-clientes-llamar",name:"listado-clientes-llamar",component:Mt},{path:"listado-clientes-sin-abogado",name:"listado-clientes-sin-abogado",component:on},{path:"listado-clientes-sin-abogado-llamar",name:"listado-clientes-sin-abogado-llamar",component:pn},{path:"listado-casos-viable-juridicamente",name:"listado-casos-viable-juridicamente",component:hn},{path:"listado-presupuestos-abogado-enviados",name:"listado-presupuestos-abogado-enviados",component:jn},{path:"listado-presupuestos-enviados-seguimiento-abogado",name:"listado-presupuestos-enviados-seguimiento-abogado",component:En},{path:"listado-casos-con-fecha-encargo",name:"listado-casos-con-fecha-encargo",component:Tn},{path:"aceptar-caso/:id",name:"aceptar-caso",component:Oi},{path:"listado-especialistas",name:"listado-especialistas",component:Yt},{path:"alta-clientes",name:"alta-clientes",component:Js},{path:"casos-sin-asignar",name:"casos-sin-asignar",component:Ys},{path:"clientes-sin-presupuesto",name:"clientes-sin-presupuesto",component:ui},{path:"clientes-presupuesto-pendiente",name:"clientes-presupuesto-pendiente",component:Ci},{path:"presupuestos-aceptados",name:"presupuestos-aceptados",component:Li},{path:"mis-casos",name:"mis-casos",component:Vi},{path:"seguimiento-casos",name:"seguimiento-casos",component:Xi},{path:"mis-casos-abogados",name:"mis-casos-abogados",component:Hi},{path:"alta-especialista",name:"Alta especialista",component:zn},{path:"alta-despacho",name:"Alta altadespacho",component:Wn},{path:"listado-despachos",name:"Listado despachos",component:cs},{path:"stats",name:"stats",component:Wo},{path:"notifications",name:"notifications",component:el},{path:"icons",name:"icons",component:ol},{path:"maps",name:"maps",component:pl},{path:"typography",name:"typography",component:hl},{path:"table-list",name:"table-list",component:Al},{path:"subir-facturas",name:"subir-facturas",component:Nl},{path:"listado-facturas-propias",name:"listado-facturas-propias",component:$l},{path:"curso",name:"curso",component:Ul},{path:"alta-casos-valmer",name:"alta-casos-valmer",component:Zl},{path:"listado-casos-valmer",name:"listado-casos-valmer",component:ic},{path:"mis-casos-valmer",name:"mis-casos-valmer",component:dc}]},{path:"*",component:se}];var pc=uc;s["default"].use(_["a"]);const mc=new _["a"]({routes:pc});let vc=null;const bc=Object(b["b"])();function fc(){return new Promise((e,a)=>{const t=Object(b["c"])(bc,a=>{t(),e(a)},a)})}mc.beforeEach(async(e,a,t)=>{const s=e.matched.some(e=>e.meta.requiresAuth);if(vc=await fc(),s&&!vc||null===vc)"login"!==e.name?t({name:"login"}):t();else{const a=localStorage.getItem("userInform");if(null===a){console.log("Correooo",vc.email.replaceAll(" ",""));const e=Object(l["k"])(Object(l["b"])(p,"especialistas"),Object(l["n"])("correo","==",vc.email.replaceAll(" ",""))),a=await Object(l["f"])(e);if(console.log("Queryyy",a.docs),a.docs.length>0)localStorage.setItem("userInform",JSON.stringify(a.docs[0].data()));else{const e=Object(l["k"])(Object(l["b"])(p,"despachos"),Object(l["n"])("correo","==",vc.email.replaceAll(" ",""))),a=await Object(l["f"])(e);if(a.docs.length>0){const e=a.docs[0].data();e.id=a.docs[0].id,e.despacho=!0,localStorage.setItem("userInform",JSON.stringify(e))}else console.error("No se encontroooo")}}s||!vc||"login"!==e.name||t()?t():t({name:"dashboard"})}});var Cc=mc,hc=t("5f5b"),gc=t("b1e0"),yc=t("7346"),_c=t.n(yc);const wc={install(e){e.component("fg-input",ue),e.component("drop-down",Ce),e.component("card",Le),e.component("p-button",De)}};var Oc=wc,jc=t("c7db");const kc={install(e){e.directive("click-outside",jc["directive"])}};var Ac=kc,xc=(t("54ba"),t("f9e3"),t("0e00"),t("e454"),{install(e){e.use(Oc),e.use(Ac),e.use(va),e.use(_c.a)}}),Sc=(t("72e0"),t("2dd8"),t("9483"));Object(Sc["a"])("/peritomedicotest/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(e){console.log("New content is available; refreshing automatically."),e.waiting&&e.waiting.postMessage({type:"SKIP_WAITING"})},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}}),
/*!

 =========================================================
 * Vue Paper Dashboard - v1.0.1
 =========================================================

 * Product Page: http://www.creative-tim.com/product/paper-dashboard
 * Copyright 2023 Creative Tim (http://www.creative-tim.com)
 * Licensed under MIT (https://github.com/creativetimofficial/paper-dashboard/blob/master/LICENSE.md)

 =========================================================

 * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

 */
Notification.requestPermission().then(e=>{"granted"===e?(console.log("Notification permission granted."),Object(r["b"])(m,{vapidKey:"YOUR_PUBLIC_VAPID_KEY"}).then(e=>{e?console.log("FCM Token:",e):console.log("No registration token available. Request permission to generate one.")}).catch(e=>{console.log("An error occurred while retrieving token. ",e)})):console.log("Unable to get permission to notify.")}),Object(r["c"])(m,e=>{console.log("Message received. ",e)}),s["default"].use(hc["a"]),s["default"].use(gc["a"]),s["default"].use(xc),new s["default"]({router:Cc,render:e=>e(y)}).$mount("#app")},"580a":function(e,a,t){},"5b77":function(e,a,t){},"5d2b":function(e,a,t){"use strict";t("daa0")},"5fe4":function(e,a,t){"use strict";t.d(a,"c",(function(){return u})),t.d(a,"a",(function(){return p})),t.d(a,"b",(function(){return m}));var s=t("1494");let i="https://perito-back.onrender.com/firebase-sync",n=!0,o="crm_informesmedicospericiales",l=null;function c(e){if(!e)return e;const a={};for(const[t,s]of Object.entries(e))s&&"object"===typeof s?s.toDate&&"function"===typeof s.toDate?a[t]={_type:"timestamp",seconds:s.seconds,nanoseconds:s.nanoseconds,iso:s.toDate().toISOString()}:void 0!==s.latitude&&void 0!==s.longitude?a[t]={_type:"geopoint",latitude:s.latitude,longitude:s.longitude}:Array.isArray(s)?a[t]=s.map(e=>c(e)):a[t]=c(s):a[t]=s;return a}function r(){if(l&&"function"===typeof l)try{return l()}catch(e){console.warn("[Sync] Error al obtener tenant-id desde función:",e.message)}if(o)return o;try{const e=localStorage.getItem("tenantId")||localStorage.getItem("tenant-id");if(e)return e}catch(e){}return null}function d(e,a,t,s,o="update"){try{const l=e.path,d=e.id,u=r(),p={collection:l.split("/").slice(0,-1).join("/"),documentId:d,timestamp:(new Date).toISOString(),changeType:o,tenantId:u,dataBefore:c(a),dataAfter:c(t),updates:c(s)};if(console.log("[Sync] Cambios detectados:",{collection:p.collection,documentId:p.documentId,timestamp:p.timestamp,changeType:p.changeType,updates:p.updates,dataBefore:p.dataBefore,dataAfter:p.dataAfter}),!n||!i)return void console.log("[Sync] API no configurada - cambios no enviados");console.log("[Sync] Enviando cambios a la API:",{collection:p.collection,documentId:p.documentId}),setTimeout(async()=>{try{const e=new AbortController,t=setTimeout(()=>e.abort(),1e4);try{const a={"Content-Type":"application/json"};u&&(a["x-tenant-id"]=u);const s=await fetch(i,{method:"POST",headers:a,body:JSON.stringify(p),signal:e.signal});clearTimeout(t),s.ok?console.log("[Sync] Datos enviados exitosamente a la API:",{collection:p.collection,documentId:p.documentId,status:s.status}):console.error("[Sync] Error en respuesta de la API:",{status:s.status,statusText:s.statusText,collection:p&&p.collection||"N/A",documentId:p&&p.documentId||"N/A"})}catch(a){clearTimeout(t),a.name,"AbortError"!==a.name?console.error("[Sync] Error al enviar datos a la API:",{error:a.message,collection:p&&p.collection||"N/A",documentId:p&&p.documentId||"N/A",payload:p}):console.warn("[Sync] Timeout al enviar datos a la API:",{collection:p&&p.collection||"N/A",documentId:p&&p.documentId||"N/A"})}}catch(t){0,console.error("[Sync] Error inesperado al procesar sincronización:",{error:t.message,stack:t.stack,docRef:e&&e.path||"N/A"})}},0)}catch(l){console.error("[Sync] Error al preparar sincronización:",{error:l.message,docRef:e&&e.path||"N/A"})}}async function u(e,a){console.log("[Sync] updateDoc llamado:",{docPath:e&&e.path||"N/A",dataKeys:a?Object.keys(a):[]});let t=null,i=null;try{try{const a=await Object(s["getDoc"])(e);t=a.exists()?a.data():null}catch(n){0}await Object(s["updateDoc"])(e,a),Promise.resolve().then(async()=>{try{const n=await Object(s["getDoc"])(e);i=n.exists()?n.data():null,d(e,t,i,a,"update")}catch(n){d(e,t,null,a,"update")}}).catch(()=>{})}catch(n){throw n}}async function p(e,a){console.log("[Sync] addDoc llamado:",{collectionPath:e.path,dataKeys:a?Object.keys(a):[]});try{const t=await Object(s["addDoc"])(e,a);return Promise.resolve().then(async()=>{try{const e=await Object(s["getDoc"])(t),i=e.exists()?e.data():null;d(t,null,i,a,"create")}catch(e){d(t,null,null,a,"create")}}).catch(()=>{}),t}catch(t){throw t}}async function m(e){console.log("[Sync] deleteDoc llamado:",{docPath:e&&e.path||"N/A"});let a=null;try{try{const t=await Object(s["getDoc"])(e);a=t.exists()?t.data():null}catch(t){0}await Object(s["deleteDoc"])(e),d(e,a,null,null,"delete")}catch(t){throw t}}},6702:function(e,a,t){"use strict";t("aeca")},"6ce8":function(e,a,t){},"6d71":function(e,a,t){},"6f56":function(e,a,t){},"70c4":function(e,a,t){},7354:function(e,a,t){"use strict";t("3e14")},"77ef":function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAMAAABrrFhUAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAbsAAAG7AEedTg1AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAspQTFRF////8VZC4uXn4uXn4uXn8VZC4uXn4uXn8VZC4uXn8VZC4uXn4uXn8VZC8VZCwMbL4uXn4uXn4uXn4uXn8VZC4uXn4uXn8VZCsLe9s7m/s7q/trzCt73Eu8LGvMPHxMnOxcrOyc/TytHYy9LZzNPazdHX0dfc0dfd09fb1tvf1tvg17/A2Nzg2bi32d3f3uHj3+Pk4eTm4peR4pmS4uTm4uXn5NHQ6Keg6Z6V7G5f7IF07YBz72BN8FxI8GRS8VZC8VdD8VhE8VlF8VlG8VpG8VtH8VtI8VxJ8l1J8l1K8l5L8l9M8mFO8mFP8mJP8mNQ8mRS8mVS8mVT8mZU8mdV8mhW82lX82pY82tZ82ta82xa821b829d83Bf83Fg83Ji9HRk9HVl9HZm9Hho9Hlp9Hpr9Hts9Hxs9Hxt9H5u9H5v9H9w9IBx9YBx9YJz9YJ09YN09YV39YZ39YZ49Yh69Yp89Yt99ox/9o2A9o6A9o6B9o+C9pCC9pCD9pKF9pSH9paJ9paK9peL9piL9piM95qO95uP95yR952R96CU96CV96GW96OY96SZ+KWa+Kac+Kec+Kmf+Kqg+Kui+Kyi+K2j+K2k+K6l+K+l+K+m+LCn+bGo+bOq+bOr+bWs+bWt+bat+bev+biw+bmx+buz+by0+r22+r62+sC5+sG6+sK7+sO8+sS9+sW++sW/+sfB+8nD+8rE+8vE+8vF+8zG+83H+87I+8/J+9DK+9HL+9HM+9LN+9PN/NbR/NfT/NjT/NnU/NnV/NrV/NvW/NvX/N3Y/N7a/N/b/ODc/OHd/eLe/ePg/eTh/eXi/ebk/ejl/ejm/enn/ern/ero/evp/ezq/u3r/u7s/u/t/vDu/vDv/vHv/vLw/vLx/vPy/vTy/vX0/vb1/vf2/vj3/vj4//n4//r5//r6//v7//z7//z8//39//7+////nuyNngAAABh0Uk5TAAEGBxckLUlufX6WmLK0wMHE2uLm8vP1v+XjuQAAB2lJREFUeNrt3fl71EQYB/DQLpTSoj3osihyFJBLLBXCJTArIBZaRCmIKNYKigoiAp6g4gGCCiqeKMWzXqCgRVRUDi9AKApqQUErRW66/4MIm3SPJDtLjnln5v3+2HeSZ+azSTOz6TNVlLNOalpmVo5f9TjnKkDiy8hTWSQAQyAl3a+ySQCEgC9bVZkBABBokquyBGAu4GM4/tMAjAVSslXWAGwF0lX2ACwFfH4IAAwFMlQQAMwEUvOAALASSFOhADASyIQDwEYgCxAAE4EcSAAsBPygABgIqLAAvBeABuC5ADgArwXgAXgsABDAWwGIAJ4KgATwUgAmgIcCQAG8E4AK4JkAWACvBOACeCQAGMAbAcgAngiABvBCADaABwLAAdwXgA7gugB4ALcF4AO4LMABgLsCPAC4KsAFgJsCfAC4KMAJgHsCvAC4JsANgFsC/AC4JMARgDsCPAG4IsAVgBsCfAG4IMAaoBVrAdYArQOMBVgDtAkwFmAN0DbAWIA1QJcAYwHWAIXnMRZgDaC2C7AVYA5Q0IqtAHMAtX2AqQB7gMILmAqwB1ALzmcpAABAvZilAAQAtYDhXQACQC1sz+xZoAJJQTtGMyIVTAq7tG3T2vvVsQosXfOTi3AAyQqIB5CkgIAAyQmICJCUgJAAyQiICZCEgKAA9AKiAlALCAtAKyAuAKWAwAB0AiIDUAkIDUAjIDYAhYDgAIkFRAdIKCA8QCIB8QESCEgAYC0gA4ClgBQAVgJyAFgISAJgLiALgKmANABmAvIAmAhIBGAsIBOAoYBUAEYCcgEYCEgGEC8gG0CcgHQAsQLyAcQISAgQLSAjQJSAlACRAnICRAhICtAgICuALiAtgCYgL0BYQGKAMwIyA5wWkBrgfwG5AU4JSA6gdpUdQEUABEAABEAABEAA6zRu1rwF4SyDB/Tr4xBAo6YtCZcZ1Le3EwCNziHc5tLeDgA0JRynr32Axi15BhjUxzZAM8J1+tkGaM43wADbAC34BhhsG4BwHgRAAARAAARAAARAAARAAARAAARAAARAAARAABcALlv4SfXOqGz5cuWzNwcNG4+dOj0yd0y+Zqj12S8vnznLKDOuDQIBGLExZJjaFWPj2k7fFt+uvnbHR3NGmpy8+I3jIbPUPAQD4GXTHh55vSi66a2mozm67mHDD3RtyCr3gQDYZ9HD7WVRTb+zGs2W2+LPPdly/KGfIACMseziv9Mib5YT1uNZVRp78vnWBxwLAgCYYN3H2hsampaGEuS3iTEnf8q6fQ2BDxDaVUwPEPpzUlIAb/IAEHo+CYDQgVuSANg+EhTAkil6HqjYVK93s+6qOIDPX9PzzmdbD0UO6vcSWoBfYp8xrAHujfrxtBq9p6/EATwS1bTo/tURvx0/NgKoK4nLCCgzQRMAMmq9VtiRAOBUyr9tEJhnAHAA8FTYDIBc/Y9WuT4hAAku1wH2DRcEgCzQKgsTAxDyqi4wXxSA4J5wpYIGgHyqVauDggCQqnBlJRVAaa1Wni0KwNJw5SsqAPKkVq4UBWBeuPIDHUDxwXB5pygAFeHKOjoA8q5WLxUEYFO48h4lgP7YmCsGwISj4cpLlAAz9Fl1LMDJ72PyxXOj4QN8o1XuoQQYr9WXU6wF9k6FDrBIKxy+ghIgqF0y79MshvaPBQ0w/C29p2sJJQCpDterqJbDK+ACBG98fHtDR2dTA2gryDVUAJuBAexpeC9QF9nPrwktQEncTMgSYDUwAJOcvIka4Pa4bxCsAI5P5wNgAaEGeEKrP00B8PccwgXAMkIP8LZWnxkLcKwyJhWPjSI8AJxYEqQHGLZbu7iLuJwJGn3PH/2yh3Y1uJGIAVD96DCSBEDxX1r5Bf4B6ms3LJ0S997KGmCZfnAZnwCLyvSYvPO3BJhwOBSzeuZ/OZwMwPhd+uVzp4wA5b/q499K5AMoWt7waujEZNkArpz1wQHDd6kCA9Rs07PrSPTz48chMgCY5+fxRGqAbWMIdwDjtM7fbR9gcwnhDyCo/QYrS9h06BHL4R9cPCT2iAe1OwMwAFkTfqs9JHHTDZZf8IwzmB6F/7DwQ8gAY/aensDPpWg66ZDpwunFcsMjFp+5Nq6DDEBGV+6u2ziDqj9lq2rqY5ZNf2xZV/mM+e1z1/q9+6smEtAAkIMACIAACIAACIAACIAACIAACIAACIAA0m2o2F/2LTV7yb6pag/Jt9Ud2EnyjZW758u9tfYl+Q4A8Lu5+sDu+Y4A8Lm9fv9ePTrlOwVglXzY6Sg7QGfZAbpJDtChp+QAF6lyA1yoSg3QIfHnLzBAx87deqpeAOB/mkIABEAABEAABEAABEAABEAABEAABJAPwM/3+P22AXL4BsixDZDFN0CWbYBMvgEybQOk8Q2QZhsgNY/n8eel2gZQMngGyLA/fsXH8YPQ73MAQEnnFyDdifErKdm8jj87xREAxZfL5/hzfYpDacKlQG4TxbH4OLwLsn2Kg0lJ5+xZ4E9PUZyNL4OjGVFehk9xPqlpmVk54C8Ef05WZprF/O8/D8lk0cSN2SYAAAAASUVORK5CYII="},"7bdd":function(e,a,t){},"7c44":function(e,a,t){},"7cda":function(e,a,t){"use strict";t("5b77")},"7f1a":function(e,a,t){"use strict";t("3fdb")},"8c31":function(e,a,t){},9028:function(e,a,t){"use strict";t("2cb6")},9113:function(e,a,t){"use strict";t("3e67")},"91af":function(e,a,t){"use strict";t("6ce8")},9426:function(e,a,t){"use strict";t("01e2")},a16c:function(e,a,t){e.exports=t.p+"assets/img/header.ab7f76a4.png"},ad5e:function(e,a,t){"use strict";t("ddac")},aeca:function(e,a,t){},b7a0:function(e,a,t){"use strict";t("1663")},b83e:function(e,a,t){},bf09:function(e,a,t){"use strict";t("70c4")},c057:function(e,a,t){"use strict";(function(e){t.d(a,"b",(function(){return o})),t.d(a,"d",(function(){return l})),t.d(a,"e",(function(){return c})),t.d(a,"f",(function(){return r})),t.d(a,"l",(function(){return d})),t.d(a,"k",(function(){return u})),t.d(a,"n",(function(){return p})),t.d(a,"j",(function(){return m})),t.d(a,"h",(function(){return v})),t.d(a,"i",(function(){return b})),t.d(a,"g",(function(){return f}));var s=t("5fe4");t.d(a,"a",(function(){return s["a"]})),t.d(a,"c",(function(){return s["b"]})),t.d(a,"m",(function(){return s["c"]}));var i=t("1494");const n={};for(const a in i)"updateDoc"!==a&&"default"!==a&&i["hasOwnProperty"](a)&&(n[a]=i[a]);const o=i["collection"],l=i["doc"],c=i["getDoc"],r=i["getDocs"],d=i["setDoc"],u=i["query"],p=i["where"],m=i["orderBy"],v=i["limit"],b=i["onSnapshot"],f=(i["serverTimestamp"],i["Timestamp"],i["getFirestore"]);i["connectFirestoreEmulator"],i["writeBatch"],i["runTransaction"],i["startAfter"],i["endBefore"],i["startAt"],i["endAt"],i["increment"],i["arrayUnion"],i["arrayRemove"];e.exports&&(Object.keys(n).forEach(a=>{"addDoc"!==a&&"deleteDoc"!==a&&(e.exports[a]=n[a])}),e.exports.updateDoc=s["c"],e.exports.addDoc=s["a"],e.exports.deleteDoc=s["b"])}).call(this,t("dd40")(e))},c374:function(e,a,t){"use strict";t("d2bd")},c4a2:function(e,a,t){"use strict";t("7bdd")},c5b7:function(e,a,t){},c5ba:function(e,a,t){e.exports=t.p+"assets/img/footer.fc6f68b6.png"},cb88:function(e,a,t){"use strict";t("6f56")},ccc5:function(e,a,t){"use strict";t("26a2")},d2bd:function(e,a,t){},da79:function(e,a,t){"use strict";t("8c31")},daa0:function(e,a,t){},ddac:function(e,a,t){},def1:function(e,a,t){"use strict";t("f963")},e454:function(e,a,t){},f418:function(e,a,t){},f957:function(e,a,t){"use strict";t("35cf")},f963:function(e,a,t){}});